!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Uppy=t()}}(function(){function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(e){if(G===setTimeout)return setTimeout(e,0);if((G===t||!G)&&setTimeout)return G=setTimeout,setTimeout(e,0);try{return G(e,0)}catch(t){try{return G.call(null,e,0)}catch(t){return G.call(this,e,0)}}}function n(){tt&&Q&&(tt=!1,Q.length?Z=Q.concat(Z):et=-1,Z.length&&r())}function r(){if(!tt){var t=o(n);tt=!0;for(var r=Z.length;r;){for(Q=Z,Z=[];++et<r;)Q&&Q[et].run();et=-1,r=Z.length}Q=null,tt=!1,function(t){if(Y===clearTimeout)return clearTimeout(t);if((Y===e||!Y)&&clearTimeout)return Y=clearTimeout,clearTimeout(t);try{Y(t)}catch(e){try{return Y.call(null,t)}catch(e){return Y.call(this,t)}}}(t)}}function i(t,e){this.fun=t,this.array=e}function s(){}function a(t){return 2!==t.length?0+t:t}function l(t){var e=/(?:\.([^.]+))?$/.exec(t)[1];return{name:t.replace("."+e,""),extension:e}}function u(t,e,o){var n=t.split(",")[1],r=e.mimeType||t.split(",")[0].split(":")[1].split(";")[0];null==r&&(r="plain/text");for(var i=atob(n),s=[],a=0;a<i.length;a++)s.push(i.charCodeAt(a));return o?new File([new Uint8Array(s)],e.name||"",{type:r}):new Blob([new Uint8Array(s)],{type:r})}function p(t){if(!t.bytesUploaded)return 0;var e=new Date-t.uploadStarted;return t.bytesUploaded/(e/1e3)}function c(t){return t.bytesTotal-t.bytesUploaded}function h(t){return t&&"object"===(void 0===t?"undefined":it(t))&&t.nodeType===Node.ELEMENT_NODE}function d(){return dt((Math.random()*_t<<0).toString(St),wt)}function f(){return bt=bt<_t?bt:0,++bt-1}function y(){return"c"+(new Date).getTime().toString(St)+dt(f().toString(St),wt)+mt()+(d()+d())}function g(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}function m(t){return"application/xml"===t.getResponseHeader("Content-Type").toLowerCase()}function v(t,e){function o(){r.readEntries(function(t){t.length>0?(n=n.concat(b(t)),o()):Vt(n.map(function(t){return function(e){v(t,e)}}),e)})}var n=[];if(t.isFile)t.file(function(o){o.fullPath=t.fullPath,e(null,o)},function(t){e(t)});else if(t.isDirectory){var r=t.createReader();o()}}function b(t){return Array.prototype.slice.call(t||[],0)}function w(t){var e=rn.open(t,pn);return new nn(function(t,o){e.onupgradeneeded=function(e){var o=e.target.result,n=e.currentTarget.transaction;if(e.oldVersion<2&&o.createObjectStore(ln,{keyPath:"id"}).createIndex("store","store",{unique:!1}),e.oldVersion<3){var r=n.objectStore(ln);r.createIndex("expires","expires",{unique:!1}),r.openCursor().onsuccess=function(t){var e=t.target.result;if(e){var o=e.value;o.expires=Date.now()+un,e.update(o)}}}n.oncomplete=function(){t(o)}},e.onsuccess=function(e){t(e.target.result)},e.onerror=o})}function S(t){return new nn(function(e,o){t.onsuccess=function(t){e(t.target.result)},t.onerror=o})}function _(t){try{return JSON.parse(t)}catch(t){return null}}function P(t,e,o){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}function k(t){function e(){if(e.enabled){var t=e,o=+new Date,n=o-(Mn||o);t.diff=n,t.prev=Mn,t.curr=o,Mn=o;for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];r[0]=Bn.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var s=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,o){if("%%"===e)return e;s++;var n=Bn.formatters[o];if("function"==typeof n){var i=r[s];e=n.call(t,i),r.splice(s,1),s--}return e}),Bn.formatArgs.call(t,r),(e.log||Bn.log||console.log.bind(console)).apply(t,r)}}return e.namespace=t,e.enabled=Bn.enabled(t),e.useColors=Bn.useColors(),e.color=function(t){var e,o=0;for(e in t)o=(o<<5)-o+t.charCodeAt(e),o|=0;return Bn.colors[Math.abs(o)%Bn.colors.length]}(t),"function"==typeof Bn.init&&Bn.init(e),e}function x(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}function E(t){if(t)return function(t){for(var e in E.prototype)t[e]=E.prototype[e];return t}(t)}function T(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}function O(t){var e="";do{e=ar[t%lr]+e,t=Math.floor(t/lr)}while(t>0);return e}function A(){var t=O(+new Date);return t!==ir?(pr=0,ir=t):t+"."+O(pr++)}function C(t){var e=t&&t.forceBase64;fr&&!e||(this.supportsBinary=!1),tr.call(this,t)}function D(){}function U(t){var e=""+t.type;return Dr.BINARY_EVENT!==t.type&&Dr.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),Ur("encoded %j as %s",t,e),e}function I(){this.reconstructor=null}function F(t){this.reconPack=t,this.buffers=[]}function j(){return{type:Dr.ERROR,data:"parser error"}}function R(t,e,o){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,o&&o.query&&(this.query=o.query),this.io.autoConnect&&this.open()}function B(t,e){if(!(this instanceof B))return new B(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new Nn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=e.parser||Dr;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}function M(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,n=zr(t),r=n.source,i=n.id,s=n.path,a=Wr[i]&&s in Wr[i].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?(Hr("ignoring socket cache for %s",r),o=Mr(r,e)):(Wr[i]||(Hr("new io instance for %s",r),Wr[i]=Mr(r,e)),o=Wr[i]),n.query&&!e.query&&(e.query=n.query),o.socket(n.path,e)}function L(t){return decodeURIComponent(t.replace(/\+/g," "))}function N(t,e){return{params:e.params,signature:e.signature,fields:e.fields}}function z(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function q(t){return t&&t.__esModule?t:{default:t}}function H(t,e){return t>=e&&t<e+100}function W(t){var e=[];return{on:function(o,n){return e.push([o,n]),t.on(o,n)},remove:function(){e.forEach(function(e){var o=e[0],n=e[1];t.off(o,n)})}}}function X(t,e){return-1!==t.indexOf(e)}var V={exports:{}};!function(){"use strict";function t(t,e){var o,n,r,i,s=P;for(i=arguments.length;i-- >2;)_.push(arguments[i]);for(e&&null!=e.children&&(_.length||_.push(e.children),delete e.children);_.length;)if((n=_.pop())&&void 0!==n.pop)for(i=n.length;i--;)_.push(n[i]);else"boolean"==typeof n&&(n=null),(r="function"!=typeof t)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(r=!1)),r&&o?s[s.length-1]+=n:s===P?s=[n]:s.push(n),o=r;var a=new function(){};return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==S.vnode&&S.vnode(a),a}function e(t,e){for(var o in e)t[o]=e[o];return t}function o(t){!t.__d&&(t.__d=!0)&&1==E.push(t)&&(S.debounceRendering||k)(n)}function n(){var t,e=E;for(E=[];t=e.pop();)t.__d&&v(t)}function r(t,e,o){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&i(t,e.nodeName):o||t._componentConstructor===e.nodeName}function i(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function s(t){var o=e({},t.attributes);o.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===o[r]&&(o[r]=n[r]);return o}function a(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,o,n,r){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)o&&o(null),n&&n(t);else if("class"!==e||r)if("style"===e){if(n&&"string"!=typeof n&&"string"!=typeof o||(t.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof o)for(var i in o)i in n||(t.style[i]="");for(var i in n)t.style[i]="number"==typeof n[i]&&!1===x.test(i)?n[i]+"px":n[i]}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),n?o||t.addEventListener(e,u,s):t.removeEventListener(e,u,s),(t.__l||(t.__l={}))[e]=n}else if("list"!==e&&"type"!==e&&!r&&e in t)!function(t,e,o){try{t[e]=o}catch(t){}}(t,e,null==n?"":n),null!=n&&!1!==n||t.removeAttribute(e);else{var a=r&&e!==(e=e.replace(/^xlink\:?/,""));null==n||!1===n?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof n&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):t.setAttribute(e,n))}else t.className=n||""}function u(t){return this.__l[t.type](S.event&&S.event(t)||t)}function p(){for(var t;t=T.pop();)S.afterMount&&S.afterMount(t),t.componentDidMount&&t.componentDidMount()}function c(t,e,o,n,r,i){O++||(A=null!=r&&void 0!==r.ownerSVGElement,C=null!=t&&!("__preactattr_"in t));var s=h(t,e,o,n,i);return r&&s.parentNode!==r&&r.appendChild(s),--O||(C=!1,i||p()),s}function h(t,e,o,n,u){var p=t,c=A;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||u)?t.nodeValue!=e&&(t.nodeValue=e):(p=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(p,t),d(t,!0))),p.__preactattr_=!0,p;var f=e.nodeName;if("function"==typeof f)return function(t,e,o,n){for(var r=t&&t._component,i=r,a=t,l=r&&t._componentConstructor===e.nodeName,u=l,p=s(e);r&&!u&&(r=r.__u);)u=r.constructor===e.nodeName;return r&&u&&(!n||r._component)?(m(r,p,3,o,n),t=r.base):(i&&!l&&(b(i),t=a=null),r=y(e.nodeName,p,o),t&&!r.__b&&(r.__b=t,a=null),m(r,p,1,o,n),t=r.base,a&&t!==a&&(a._component=null,d(a,!1))),t}(t,e,o,n);if(A="svg"===f||"foreignObject"!==f&&A,f=String(f),(!t||!i(t,f))&&(p=function(t,e){var o=A?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return o.__n=t,o}(f),t)){for(;t.firstChild;)p.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(p,t),d(t,!0)}var g=p.firstChild,v=p.__preactattr_,w=e.children;if(null==v){v=p.__preactattr_={};for(var S=p.attributes,_=S.length;_--;)v[S[_].name]=S[_].value}return!C&&w&&1===w.length&&"string"==typeof w[0]&&null!=g&&void 0!==g.splitText&&null==g.nextSibling?g.nodeValue!=w[0]&&(g.nodeValue=w[0]):(w&&w.length||null!=g)&&function(t,e,o,n,i){var s,l,u,p,c,f=t.childNodes,y=[],g={},m=0,v=0,b=f.length,w=0,S=e?e.length:0;if(0!==b)for(var _=0;_<b;_++){var P=f[_],k=P.__preactattr_;null!=(x=S&&k?P._component?P._component.__k:k.key:null)?(m++,g[x]=P):(k||(void 0!==P.splitText?!i||P.nodeValue.trim():i))&&(y[w++]=P)}if(0!==S)for(_=0;_<S;_++){c=null;var x;if(null!=(x=(p=e[_]).key))m&&void 0!==g[x]&&(c=g[x],g[x]=void 0,m--);else if(!c&&v<w)for(s=v;s<w;s++)if(void 0!==y[s]&&r(l=y[s],p,i)){c=l,y[s]=void 0,s===w-1&&w--,s===v&&v++;break}c=h(c,p,o,n),u=f[_],c&&c!==t&&c!==u&&(null==u?t.appendChild(c):c===u.nextSibling?a(u):t.insertBefore(c,u))}if(m)for(var _ in g)void 0!==g[_]&&d(g[_],!1);for(;v<=w;)void 0!==(c=y[w--])&&d(c,!1)}(p,w,o,n,C||null!=v.dangerouslySetInnerHTML),function(t,e,o){var n;for(n in o)e&&null!=e[n]||null==o[n]||l(t,n,o[n],o[n]=void 0,A);for(n in e)"children"===n||"innerHTML"===n||n in o&&e[n]===("value"===n||"checked"===n?t[n]:o[n])||l(t,n,o[n],o[n]=e[n],A)}(p,e.attributes,v),A=c,p}function d(t,e){var o=t._component;o?b(o):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||a(t),f(t))}function f(t){for(t=t.lastChild;t;){var e=t.previousSibling;d(t,!0),t=e}}function y(t,e,o){var n,r=D[t.name];if(t.prototype&&t.prototype.render?(n=new t(e,o),w.call(n,e,o)):((n=new w(e,o)).constructor=t,n.render=g),r)for(var i=r.length;i--;)if(r[i].constructor===t){n.__b=r[i].__b,r.splice(i,1);break}return n}function g(t,e,o){return this.constructor(t,o)}function m(t,e,n,r,i){t.__x||(t.__x=!0,(t.__r=e.ref)&&delete e.ref,(t.__k=e.key)&&delete e.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.__c||(t.__c=t.context),t.context=r),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===S.syncComponentUpdates&&t.base?o(t):v(t,1,i)),t.__r&&t.__r(t))}function v(t,o,n,r){if(!t.__x){var i,a,l,u=t.props,h=t.state,f=t.context,g=t.__p||u,w=t.__s||h,_=t.__c||f,P=t.base,k=t.__b,x=P||k,E=t._component,A=!1;if(P&&(t.props=g,t.state=w,t.context=_,2!==o&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(u,h,f)?A=!0:t.componentWillUpdate&&t.componentWillUpdate(u,h,f),t.props=u,t.state=h,t.context=f),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!A){i=t.render(u,h,f),t.getChildContext&&(f=e(e({},f),t.getChildContext()));var C,D,U=i&&i.nodeName;if("function"==typeof U){var I=s(i);(a=E)&&a.constructor===U&&I.key==a.__k?m(a,I,1,f,!1):(C=a,t._component=a=y(U,I,f),a.__b=a.__b||k,a.__u=t,m(a,I,0,f,!1),v(a,1,n,!0)),D=a.base}else l=x,(C=E)&&(l=t._component=null),(x||1===o)&&(l&&(l._component=null),D=c(l,i,f,n||!P,x&&x.parentNode,!0));if(x&&D!==x&&a!==E){var F=x.parentNode;F&&D!==F&&(F.replaceChild(D,x),C||(x._component=null,d(x,!1)))}if(C&&b(C),t.base=D,D&&!r){for(var j=t,R=t;R=R.__u;)(j=R).base=D;D._component=j,D._componentConstructor=j.constructor}}if(!P||n?T.unshift(t):A||(t.componentDidUpdate&&t.componentDidUpdate(g,w,_),S.afterUpdate&&S.afterUpdate(t)),null!=t.__h)for(;t.__h.length;)t.__h.pop().call(t);O||r||p()}}function b(t){S.beforeUnmount&&S.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var o=t._component;o?b(o):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.__b=e,a(e),function(t){var e=t.constructor.name;(D[e]||(D[e]=[])).push(t)}(t),f(e)),t.__r&&t.__r(null)}function w(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{}}var S={},_=[],P=[],k="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,x=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,E=[],T=[],O=0,A=!1,C=!1,D={};e(w.prototype,{setState:function(t,n){var r=this.state;this.__s||(this.__s=e({},r)),e(r,"function"==typeof t?t(r,this.props):t),n&&(this.__h=this.__h||[]).push(n),o(this)},forceUpdate:function(t){t&&(this.__h=this.__h||[]).push(t),v(this,2)},render:function(){}});var U={h:t,createElement:t,cloneElement:function(o,n){return t(o.nodeName,e(e({},o.attributes),n),arguments.length>2?[].slice.call(arguments,2):o.children)},Component:w,render:function(t,e,o){return c(o,t,{},!1,e,!1)},rerender:n,options:S};V.exports=U}(),V=V.exports;var G,Y,J={},K={},$=K={};!function(){try{G="function"==typeof setTimeout?setTimeout:t}catch(e){G=t}try{Y="function"==typeof clearTimeout?clearTimeout:e}catch(t){Y=e}}();var Q,Z=[],tt=!1,et=-1;$.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Z.push(new i(t,e)),1!==Z.length||tt||o(r)},i.prototype.run=function(){this.fun.apply(null,this.array)},$.title="browser",$.browser=!0,$.env={},$.argv=[],$.version="",$.versions={},$.on=s,$.addListener=s,$.once=s,$.off=s,$.removeListener=s,$.removeAllListeners=s,$.emit=s,$.prependListener=s,$.prependOnceListener=s,$.listeners=function(t){return[]},$.binding=function(t){throw new Error("process.binding is not supported")},$.cwd=function(){return"/"},$.chdir=function(t){throw new Error("process.chdir is not supported")},$.umask=function(){return 0};var ot={exports:{}};(function(t,e){!function(t,e){"object"==typeof ot.exports?ot.exports=e():t.ES6Promise=e()}(this,function(){"use strict";function o(t){return"function"==typeof t}function n(){var t=setTimeout;return function(){return t(r,1)}}function r(){for(var t=0;t<S;t+=2)(0,C[t])(C[t+1]),C[t]=void 0,C[t+1]=void 0;S=0}function i(t,e){var o=this,n=new this.constructor(a);void 0===n[U]&&v(n);var r=o._state;if(r){var i=arguments[r-1];k(function(){return m(r,n,i,o._result)})}else f(o,n,t,e);return n}function s(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(a);return p(e,t),e}function a(){}function l(t){try{return t.then}catch(t){return R.error=t,R}}function u(t,e,n){e.constructor===t.constructor&&n===i&&e.constructor.resolve===s?function(t,e){e._state===F?h(t,e._result):e._state===j?d(t,e._result):f(e,void 0,function(e){return p(t,e)},function(e){return d(t,e)})}(t,e):n===R?(d(t,R.error),R.error=null):void 0===n?h(t,e):o(n)?function(e,o,n){k(function(t){var e=!1,r=function(t,e,o,n){try{t.call(e,o,n)}catch(t){return t}}(n,o,function(n){e||(e=!0,o!==n?p(t,n):h(t,n))},function(o){e||(e=!0,d(t,o))},t._label);!e&&r&&(e=!0,d(t,r))},t)}(0,e,n):h(t,e)}function p(t,e){t===e?d(t,new TypeError("You cannot resolve a promise with itself")):function(t){var o=typeof e;return null!==e&&("object"===o||"function"===o)}()?u(t,e,l(e)):h(t,e)}function c(t){t._onerror&&t._onerror(t._result),y(t)}function h(t,e){t._state===I&&(t._result=e,t._state=F,0!==t._subscribers.length&&k(y,t))}function d(t,e){t._state===I&&(t._state=j,t._result=e,k(c,t))}function f(t,e,o,n){var r=t._subscribers,i=r.length;t._onerror=null,r[i]=e,r[i+F]=o,r[i+j]=n,0===i&&t._state&&k(y,t)}function y(t){var e=t._subscribers,o=t._state;if(0!==e.length){for(var n=void 0,r=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],r=e[s+o],n?m(o,n,r,i):r(i);t._subscribers.length=0}}function g(){this.error=null}function m(t,e,n,r){var i=o(n),s=void 0,a=void 0,l=void 0,u=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(t){return B.error=t,B}}(n,r))===B?(u=!0,a=s.error,s.error=null):l=!0,e===s)return void d(e,new TypeError("A promises callback cannot return that same promise."))}else s=r,l=!0;e._state!==I||(i&&l?p(e,s):u?d(e,a):t===F?h(e,s):t===j&&d(e,s))}function v(t){t[U]=M++,t._state=void 0,t._result=void 0,t._subscribers=[]}function b(){return new Error("Array Methods must be provided an Array")}function b(){return new Error("Array Methods must be provided an Array")}var w=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},S=0,_=void 0,P=void 0,k=function(t,e){C[S]=t,C[S+1]=e,2===(S+=2)&&(P?P(r):D())},x="undefined"!=typeof window?window:void 0,E=x||{},T=E.MutationObserver||E.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),A="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,C=new Array(1e3),D=void 0;D=O?function(){return t.nextTick(r)}:T?function(){var t=0,e=new T(r),o=document.createTextNode("");return e.observe(o,{characterData:!0}),function(){o.data=t=++t%2}}():A?function(){var t=new MessageChannel;return t.port1.onmessage=r,function(){return t.port2.postMessage(0)}}():void 0===x&&"function"==typeof require?function(){try{return void 0!==(_=J.runOnLoop||J.runOnContext)?function(){_(r)}:n()}catch(t){return n()}}():n();var U=Math.random().toString(36).substring(16),I=void 0,F=1,j=2,R=new g,B=new g,M=0,L=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[U]||v(this.promise),w(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&h(this.promise,this._result))):d(this.promise,b())}return t.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var o=this._instanceConstructor,n=o.resolve;if(n===s){var r=l(t);if(r===i&&t._state!==I)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(o===N){var p=new o(a);u(p,t,r),this._willSettleAt(p,e)}else this._willSettleAt(new o(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,o){var n=this.promise;n._state===I&&(this._remaining--,t===j?d(n,o):this._result[e]=o),0===this._remaining&&h(n,this._result)},t.prototype._willSettleAt=function(t,e){var o=this;f(t,void 0,function(t){return o._settledAt(F,e,t)},function(t){return o._settledAt(j,e,t)})},t}(),N=function(){function t(e){this[U]=M++,this._result=this._state=void 0,this._subscribers=[],a!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){p(t,e)},function(e){d(t,e)})}catch(e){d(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(o){return e.resolve(t()).then(function(){return o})},function(o){return e.resolve(t()).then(function(){throw o})})},t}();return N.prototype.then=i,N.all=function(t){return new L(this,t).promise},N.race=function(t){var e=this;return new e(w(t)?function(o,n){for(var r=t.length,i=0;i<r;i++)e.resolve(t[i]).then(o,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},N.resolve=s,N.reject=function(t){var e=new this(a);return d(e,t),e},N._setScheduler=function(t){P=t},N._setAsap=function(t){k=t},N._asap=k,N.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var o=t.Promise;if(o){var n=null;try{n=Object.prototype.toString.call(o.resolve())}catch(t){}if("[object Promise]"===n&&!o.cast)return}t.Promise=N},N.Promise=N,N})}).call(this,K,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),ot=ot.exports;var nt={};(function(t){function e(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||!!t&&"object"==typeof t&&f.call(t)==i}(t))return r;if(e(t)){var o="function"==typeof t.valueOf?t.valueOf():t;t=e(o)?o+"":o}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=l.test(t);return n||u.test(t)?p(t.slice(2),n?2:8):a.test(t)?r:+t}var n="Expected a function",r=NaN,i="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,d=c||h||Function("return this")(),f=Object.prototype.toString,y=Math.max,g=Math.min,m=function(){return d.Date.now()};nt=function(t,r,i){var s=!0,a=!0;if("function"!=typeof t)throw new TypeError(n);return e(i)&&(s="leading"in i?!!i.leading:s,a="trailing"in i?!!i.trailing:a),function(t,r,i){function s(e){var o=c,n=h;return c=h=void 0,w=e,f=t.apply(n,o)}function a(t){var e=t-b;return void 0===b||e>=r||e<0||_&&t-w>=d}function l(){var t=m();if(a(t))return u(t);v=setTimeout(l,function(e){var o=r-(t-b);return _?g(o,d-(t-w)):o}())}function u(t){return v=void 0,P&&c?s(t):(c=h=void 0,f)}function p(){var t=m(),e=a(t);if(c=arguments,h=this,b=t,e){if(void 0===v)return function(t){return w=t,v=setTimeout(l,r),S?s(t):f}(b);if(_)return v=setTimeout(l,r),s(b)}return void 0===v&&(v=setTimeout(l,r)),f}var c,h,d,f,v,b,w=0,S=!1,_=!1,P=!0;if("function"!=typeof t)throw new TypeError(n);return r=o(r)||0,e(i)&&(S=!!i.leading,d=(_="maxWait"in i)?y(o(i.maxWait)||0,r):d,P="trailing"in i?!!i.trailing:P),p.cancel=function(){void 0!==v&&clearTimeout(v),w=0,c=b=h=v=void 0},p.flush=function(){return void 0===v?f:u(m())},p}(t,r,{leading:s,maxWait:r,trailing:a})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var rt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st="undefined"==typeof Promise?ot.Promise:Promise,at={"video/ogg":"ogv","audio/ogg":"ogg","video/webm":"webm","audio/webm":"webm","video/mp4":"mp4","audio/mp3":"mp3"},lt={generateFileID:function(t){return["uppy",t.name?t.name.toLowerCase().replace(/[^A-Z0-9]/gi,""):"",t.type,t.data.size,t.data.lastModified].filter(function(t){return t}).join("-")},toArray:function(t){return Array.prototype.slice.call(t||[],0)},getTimeStamp:function(){var t=new Date;return a(t.getHours().toString())+":"+a(t.getMinutes().toString())+":"+a(t.getSeconds().toString())},isTouchDevice:function(){return"ontouchstart"in window||navigator.maxTouchPoints},getFileNameAndExtension:l,truncateString:function(t,e){return t.length>e?t.substr(0,e/2)+"..."+t.substr(t.length-e/4,t.length):t},getFileTypeExtension:function(t){return at[t]||null},getFileType:function(t){var e={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif"},o=t.name?l(t.name).extension:null;if(t.isRemote){var n=t.type?t.type:e[o];return st.resolve(n)}return function(t){return new st(function(e,o){var n=new FileReader;n.addEventListener("load",function(t){e(t.target.result)}),n.addEventListener("error",function(t){console.error("FileReader error"+t),o(t)}),n.readAsArrayBuffer(t)})}(t.data.slice(0,4100)).then(function(n){var r=function(t){var e=new Uint8Array(t);if(!(e&&e.length>1))return null;var o=function(t,o){o=rt({offset:0},o);for(var n=0;n<t.length;n++)if(t[n]!==e[n+o.offset])return!1;return!0};if(o([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(o([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(o([71,73,70]))return{ext:"gif",mime:"image/gif"};if(o([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(o([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((o([73,73,42,0])||o([77,77,0,42]))&&o([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(o([73,73,42,0])||o([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(o([66,77]))return{ext:"bmp",mime:"image/bmp"};if(o([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(o([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(o([80,75,3,4])&&o([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(o([80,75,3,4])&&o([77,69,84,65,45,73,78,70,47,109,111,122,105,108,108,97,46,114,115,97],{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(o([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(o([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(o([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(o([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(o([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(o([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(o([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(o([0,0,0])&&(24===e[3]||32===e[3])&&o([102,116,121,112],{offset:4})||o([51,103,112,53])||o([0,0,0,28,102,116,121,112,109,112,52,50])&&o([109,112,52,49,109,112,52,50,105,115,111,109],{offset:16})||o([0,0,0,28,102,116,121,112,105,115,111,109])||o([0,0,0,28,102,116,121,112,109,112,52,50,0,0,0,0]))return{ext:"mp4",mime:"video/mp4"};if(o([0,0,0,28,102,116,121,112,77,52,86]))return{ext:"m4v",mime:"video/x-m4v"};if(o([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(o([26,69,223,163])){var n=e.subarray(4,4100),r=n.findIndex(function(t,e,o){return 66===o[e]&&130===o[e+1]});if(r>=0){var i=r+3,s=function(t){return Array.from(t).every(function(t,e){return n[i+e]===t.charCodeAt(0)})};if(s("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(s("webm"))return{ext:"webm",mime:"video/webm"}}}return o([0,0,0,20,102,116,121,112,113,116,32,32])||o([102,114,101,101],{offset:4})||o([102,116,121,112,113,116,32,32],{offset:4})||o([109,100,97,116],{offset:4})||o([119,105,100,101],{offset:4})?{ext:"mov",mime:"video/quicktime"}:o([82,73,70,70])&&o([65,86,73],{offset:8})?{ext:"avi",mime:"video/x-msvideo"}:o([48,38,178,117,142,102,207,17,166,217])?{ext:"wmv",mime:"video/x-ms-wmv"}:o([0,0,1,186])?{ext:"mpg",mime:"video/mpeg"}:o([73,68,51])||o([255,251])?{ext:"mp3",mime:"audio/mpeg"}:o([102,116,121,112,77,52,65],{offset:4})||o([77,52,65,32])?{ext:"m4a",mime:"audio/m4a"}:o([79,112,117,115,72,101,97,100],{offset:28})?{ext:"opus",mime:"audio/opus"}:o([79,103,103,83])?{ext:"ogg",mime:"audio/ogg"}:o([102,76,97,67])?{ext:"flac",mime:"audio/x-flac"}:o([82,73,70,70])&&o([87,65,86,69],{offset:8})?{ext:"wav",mime:"audio/x-wav"}:o([35,33,65,77,82,10])?{ext:"amr",mime:"audio/amr"}:o([37,80,68,70])?{ext:"pdf",mime:"application/pdf"}:o([77,90])?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||!o([87,83],{offset:1})?o([123,92,114,116,102])?{ext:"rtf",mime:"application/rtf"}:o([0,97,115,109])?{ext:"wasm",mime:"application/wasm"}:o([119,79,70,70])&&(o([0,1,0,0],{offset:4})||o([79,84,84,79],{offset:4}))?{ext:"woff",mime:"font/woff"}:o([119,79,70,50])&&(o([0,1,0,0],{offset:4})||o([79,84,84,79],{offset:4}))?{ext:"woff2",mime:"font/woff2"}:o([76,80],{offset:34})&&(o([0,0,1],{offset:8})||o([1,0,2],{offset:8})||o([2,0,2],{offset:8}))?{ext:"eot",mime:"application/octet-stream"}:o([0,1,0,0,0])?{ext:"ttf",mime:"font/ttf"}:o([79,84,84,79,0])?{ext:"otf",mime:"font/otf"}:o([0,0,1,0])?{ext:"ico",mime:"image/x-icon"}:o([70,76,86,1])?{ext:"flv",mime:"video/x-flv"}:o([37,33])?{ext:"ps",mime:"application/postscript"}:o([253,55,122,88,90,0])?{ext:"xz",mime:"application/x-xz"}:o([83,81,76,105])?{ext:"sqlite",mime:"application/x-sqlite3"}:o([78,69,83,26])?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:o([67,114,50,52])?{ext:"crx",mime:"application/x-google-chrome-extension"}:o([77,83,67,70])||o([73,83,99,40])?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:o([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121])?{ext:"deb",mime:"application/x-deb"}:o([33,60,97,114,99,104,62])?{ext:"ar",mime:"application/x-unix-archive"}:o([237,171,238,219])?{ext:"rpm",mime:"application/x-rpm"}:o([31,160])||o([31,157])?{ext:"Z",mime:"application/x-compress"}:o([76,90,73,80])?{ext:"lz",mime:"application/x-lzip"}:o([208,207,17,224,161,177,26,225])?{ext:"msi",mime:"application/x-msi"}:o([6,14,43,52,2,5,1,1,13,1,2,1,1,2])?{ext:"mxf",mime:"application/mxf"}:o([71],{offset:4})&&(o([71],{offset:192})||o([71],{offset:196}))?{ext:"mts",mime:"video/mp2t"}:o([66,76,69,78,68,69,82])?{ext:"blend",mime:"application/x-blender"}:o([66,80,71,251])?{ext:"bpg",mime:"image/bpg"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}}(n);return r&&r.mime?r.mime:t.type?t.type:o&&e[o]?e[o]:null}).catch(function(){return null})},isPreviewSupported:function(t){if(!t)return!1;var e=t.split("/")[1];return!!/^(jpeg|gif|png|svg|svg\+xml|bmp)$/.test(e)},isObjectURL:function(t){return 0===t.indexOf("blob:")},dataURItoBlob:u,canvasToBlob:function(t,e,o){return t.toBlob?new st(function(n){t.toBlob(n,e,o)}):st.resolve().then(function(){return u(t.toDataURL(e,o),{})})},getSpeed:p,getBytesRemaining:c,getETA:function(t){if(!t.bytesUploaded)return 0;var e=p(t),o=c(t);return Math.round(o/e*10)/10},copyToClipboard:function(t,e){return e=e||"Copy the URL below",new st(function(o){var n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=t,document.body.appendChild(n),n.select();var r=function(){document.body.removeChild(n),window.prompt(e,t),o()};try{return document.execCommand("copy")?(document.body.removeChild(n),o()):r()}catch(t){return document.body.removeChild(n),r()}})},prettyETA:function(t){var e=function(t){return{hours:Math.floor(t/3600)%24,minutes:Math.floor(t/60)%60,seconds:Math.floor(t%60)}}(t),o=e.hours?e.hours+"h ":"",n=e.hours?("0"+e.minutes).substr(-2):e.minutes;return o+(n?n+"m ":"")+(n?("0"+e.seconds).substr(-2):e.seconds)+"s"},findDOMElement:function(t){return"string"==typeof t?document.querySelector(t):"object"===(void 0===t?"undefined":it(t))&&h(t)?t:void 0},findAllDOMElements:function(t){if("string"==typeof t){var e=[].slice.call(document.querySelectorAll(t));return e.length>0?e:null}if("object"===(void 0===t?"undefined":it(t))&&h(t))return[t]},getSocketHost:function(t){var e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/.exec(t)[1];return("https:"===location.protocol?"wss":"ws")+"://"+e},emitSocketProgress:nt(function(t,e,o){var n=e.progress,r=e.bytesUploaded,i=e.bytesTotal;n&&(t.uppy.log("Upload progress: "+n),t.uppy.emit("upload-progress",{uploader:t,id:o.id,bytesUploaded:r,bytesTotal:i}))},300,{leading:!0,trailing:!0}),settle:function(t){function e(t){n.push(t)}function o(t){r.push(t)}var n=[],r=[];return st.all(t.map(function(t){return t.then(e,o)})).then(function(){return{successful:n,failed:r}})},limitPromises:function(t){function e(){o--;var t=n.shift();t&&t()}var o=0,n=[];return function(r){return function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];var l=function(){o++;var t=r.apply(void 0,s);return t.then(e,e),t};return o>=t?new st(function(t,e){n.push(function(){l().then(t,e)})}):l()}}}},ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ct=lt.findDOMElement,ht=function(){function t(e,o){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.uppy=e,this.opts=o||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}return t.prototype.getPluginState=function(){return this.uppy.state.plugins[this.id]},t.prototype.setPluginState=function(t){var e=pt({},this.uppy.state.plugins);e[this.id]=pt({},e[this.id],t),this.uppy.setState({plugins:e})},t.prototype.update=function(t){void 0!==this.el&&this.updateUI&&this.updateUI(t)},t.prototype.mount=function(e,o){var n=this,r=o.id,i=ct(e);if(i)return this.updateUI=function(t){n.el=V.render(n.render(t),i,n.el)},this.uppy.log("Installing "+r+" to a DOM element"),this.opts.replaceTargetContent&&(i.innerHTML=""),this.el=V.render(this.render(this.uppy.state),i),this.el;var s=void 0;if("object"===(void 0===e?"undefined":ut(e))&&e instanceof t)s=e;else if("function"==typeof e){var a=e;this.uppy.iteratePlugins(function(t){if(t instanceof a)return s=t,!1})}if(s){var l=s.id;return this.uppy.log("Installing "+r+" to "+l),this.el=s.addTarget(o),this.el}throw this.uppy.log("Not installing "+r),new Error("Invalid target option given to "+r)},t.prototype.render=function(t){throw new Error("Extend the render method to add your plugin to a DOM element")},t.prototype.addTarget=function(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")},t.prototype.unmount=function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},t.prototype.install=function(){},t.prototype.uninstall=function(){this.unmount()},t}(),dt=function(t,e){var o="000000000"+t;return o.substr(o.length-e)},ft="object"==typeof window?window:self,yt=Object.keys(ft),gt=dt(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+yt.toString(36),4),mt=function(){return gt},vt={},bt=0,wt=4,St=36,_t=Math.pow(St,wt);y.slug=function(){var t=(new Date).getTime().toString(36),e=f().toString(36).slice(-4),o=mt().slice(0,1)+mt().slice(-1),n=d().slice(-2);return t.slice(-2)+e+o+n},y.fingerprint=mt,vt=y;var Pt={};g.prototype.match=function(t){var e,o,n=!0,r=this.parts,i=r.length;if("string"==typeof t||t instanceof String)if(this.hasWild||this.text==t){for(o=(t||"").split(this.separator),e=0;n&&e<i;e++)"*"!==r[e]&&(n=e<o.length&&r[e]===o[e]);n=n&&o}else n=!1;else if("function"==typeof t.splice)for(n=[],e=t.length;e--;)this.match(t[e])&&(n[n.length]=t[e]);else if("object"==typeof t){n={};for(var s in t)this.match(s)&&(n[s]=t[s])}return n},Pt=function(t,e,o){var n=new g(t,o||/[\/\.]/);return void 0!==e?n.match(e):n};var kt=/[\/\+\.]/,xt=function(){var t={},e=t._fns={};return t.emit=function(t,o,n,r,i,s,a){var l=function(t){for(var o=e[t]?e[t]:[],n=t.indexOf(":"),r=-1===n?[t]:[t.substring(0,n),t.substring(n+1)],i=Object.keys(e),s=0,a=i.length;s<a;s++){var l=i[s];if("*"===l&&(o=o.concat(e[l])),2===r.length&&r[0]===l){o=o.concat(e[l]);break}}return o}(t);l.length&&function(t,e,o){for(var n=0,r=e.length;n<r&&e[n];n++)e[n].event=t,e[n].apply(e[n],o)}(t,l,[o,n,r,i,s,a])},t.on=function(t,o){e[t]||(e[t]=[]),e[t].push(o)},t.once=function(e,o){function n(){o.apply(this,arguments),t.off(e,n)}this.on(e,n)},t.off=function(t,e){var o=[];if(t&&e)for(var n=this._fns[t],r=0,i=n.length;r<i;r++)n[r]!==e&&o.push(n[r]);o.length?this._fns[t]=o:delete this._fns[t]},t},Et=function(t){if("number"!=typeof t||isNaN(t))throw new TypeError("Expected a number, got "+typeof t);var e=t<0,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var n=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),o.length-1);t=Number(t/Math.pow(1e3,n));var r=o[n];return t>=10||t%1==0?(e?"-":"")+t.toFixed(0)+" "+r:(e?"-":"")+t.toFixed(1)+" "+r},Tt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ot=function(){function t(e){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o={locale:{strings:{},pluralize:function(t){return 1===t?0:1}}};this.opts=Tt({},o,e),this.locale=Tt({},o.locale,e.locale)}return t.prototype.interpolate=function(t,e){var o=String.prototype.replace,n=/\$/g;for(var r in e)if("_"!==r&&e.hasOwnProperty(r)){var i=e[r];"string"==typeof i&&(i=o.call(e[r],n,"$$$$")),t=o.call(t,new RegExp("%\\{"+r+"\\}","g"),i)}return t},t.prototype.translate=function(t,e){if(e&&e.smart_count){var o=this.locale.pluralize(e.smart_count);return this.interpolate(this.opts.locale.strings[t][o],e)}return this.interpolate(this.opts.locale.strings[t],e)},t}(),At=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ct=function(){function t(){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.state={},this.callbacks=[]}return t.prototype.getState=function(){return this.state},t.prototype.setState=function(t){var e=At({},this.state),o=At({},this.state,t);this.state=o,this._publish(e,o,t)},t.prototype.subscribe=function(t){var e=this;return this.callbacks.push(t),function(){e.callbacks.splice(e.callbacks.indexOf(t),1)}},t.prototype._publish=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];this.callbacks.forEach(function(t){t.apply(void 0,e)})},t}(),Dt=function(){return new Ct},Ut={};(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r="undefined"==typeof Promise?ot.Promise:Promise,i=function(){function i(e){var n=this;!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this);var s={strings:{youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"This file exceeds maximum allowed size of",youCanOnlyUploadFileTypes:"You can only upload:",uppyServerError:"Connection with Uppy Server failed"}},a={id:"uppy",autoProceed:!0,debug:!1,restrictions:{maxFileSize:!1,maxNumberOfFiles:!1,minNumberOfFiles:!1,allowedFileTypes:!1},meta:{},onBeforeFileAdded:function(t,e){return r.resolve()},onBeforeUpload:function(t,e){return r.resolve()},locale:s,store:new Dt};this.opts=o({},a,e),this.locale=o({},s,this.opts.locale),this.locale.strings=o({},s.strings,this.opts.locale.strings),this.translator=new Ot({locale:this.locale}),this.i18n=this.translator.translate.bind(this.translator),this.plugins={},this.translator=new Ot({locale:this.opts.locale}),this.i18n=this.translator.translate.bind(this.translator),this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.setFileMeta=this.setFileMeta.bind(this),this.setFileState=this.setFileState.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this._calculateProgress=this._calculateProgress.bind(this),this.updateOnlineStatus=this.updateOnlineStatus.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.upload=this.upload.bind(this),this.emitter=xt(),this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},capabilities:{resumableUploads:!1},totalProgress:0,meta:o({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}}),this._storeUnsubscribe=this.store.subscribe(function(t,e,o){n.emit("state-update",t,e,o),n.updateAll(e)}),this.opts.debug&&(t.uppyLog="",t[this.opts.id]=this)}return i.prototype.updateAll=function(t){this.iteratePlugins(function(e){e.update(t)})},i.prototype.setState=function(t){this.store.setState(t)},i.prototype.getState=function(){return this.store.getState()},i.prototype.setFileState=function(t,e){var n;this.setState({files:o({},this.getState().files,(n={},n[t]=o({},this.getState().files[t],e),n))})},i.prototype.resetProgress=function(){var t={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:!1},e=o({},this.getState().files),n={};Object.keys(e).forEach(function(r){var i=o({},e[r]);i.progress=o({},i.progress,t),n[r]=i}),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")},i.prototype.addPreProcessor=function(t){this.preProcessors.push(t)},i.prototype.removePreProcessor=function(t){var e=this.preProcessors.indexOf(t);-1!==e&&this.preProcessors.splice(e,1)},i.prototype.addPostProcessor=function(t){this.postProcessors.push(t)},i.prototype.removePostProcessor=function(t){var e=this.postProcessors.indexOf(t);-1!==e&&this.postProcessors.splice(e,1)},i.prototype.addUploader=function(t){this.uploaders.push(t)},i.prototype.removeUploader=function(t){var e=this.uploaders.indexOf(t);-1!==e&&this.uploaders.splice(e,1)},i.prototype.setMeta=function(t){var e=o({},this.getState().meta,t),n=o({},this.getState().files);Object.keys(n).forEach(function(e){n[e]=o({},n[e],{meta:o({},n[e].meta,t)})}),this.log("Adding metadata:"),this.log(t),this.setState({meta:e,files:n})},i.prototype.setFileMeta=function(t,e){var n=o({},this.getState().files);if(n[t]){var r=o({},n[t].meta,e);n[t]=o({},n[t],{meta:r}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that\u2019s not with us anymore: ",t)},i.prototype.getFile=function(t){return this.getState().files[t]},i.prototype._checkMinNumberOfFiles=function(){var t=this.opts.restrictions.minNumberOfFiles;return!(Object.keys(this.getState().files).length<t&&(this.info(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}),"error",5e3),1))},i.prototype._checkRestrictions=function(t){var e=this.opts.restrictions,o=e.maxFileSize,n=e.maxNumberOfFiles,r=e.allowedFileTypes;if(n&&Object.keys(this.getState().files).length+1>n)return this.info(""+this.i18n("youCanOnlyUploadX",{smart_count:n}),"error",5e3),!1;if(r&&!(r.filter(function(e){return!!t.type&&function(t,e){function o(e){var o=Pt(e,t,kt);return o&&o.length>=2}return e?o(e.split(";")[0]):o}(t.type,e)}).length>0)){var i=r.join(", ");return this.info(this.i18n("youCanOnlyUploadFileTypes")+" "+i,"error",5e3),!1}return!(o&&t.data.size>o&&(this.info(this.i18n("exceedsSize")+" "+Et(o),"error",5e3),1))},i.prototype.addFile=function(t){var n=this;return r.resolve().then(function(){return n.opts.onBeforeFileAdded(t,n.getState().files)}).catch(function(t){var o="object"===(void 0===t?"undefined":e(t))?t.message:t;return n.info(o,"error",5e3),r.reject(new Error("onBeforeFileAdded: "+o))}).then(function(){return lt.getFileType(t).then(function(e){var i=o({},n.getState().files),s=void 0;s=t.name?t.name:"image"===e.split("/")[0]?e.split("/")[0]+"."+e.split("/")[1]:"noname";var a=lt.getFileNameAndExtension(s).extension,l=t.isRemote||!1,u=lt.generateFileID(t),p={source:t.source||"",id:u,name:s,extension:a||"",meta:o({},n.getState().meta,{name:s,type:e}),type:e,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:t.data.size||0,uploadComplete:!1,uploadStarted:!1},size:t.data.size||0,isRemote:l,remote:t.remote||"",preview:t.preview};if(!n._checkRestrictions(p))return r.reject(new Error("File not allowed"));i[u]=p,n.setState({files:i}),n.emit("file-added",p),n.log("Added file: "+s+", "+u+", mime type: "+e),n.opts.autoProceed&&!n.scheduledAutoProceed&&(n.scheduledAutoProceed=setTimeout(function(){n.scheduledAutoProceed=null,n.upload().catch(function(t){console.error(t.stack||t.message||t)})},4))})})},i.prototype.removeFile=function(t){var e=this,n=this.state,r=n.files,i=n.currentUploads,s=o({},r),a=s[t];delete s[t];var l=o({},i),u=[];Object.keys(l).forEach(function(e){var n=i[e].fileIDs.filter(function(e){return e!==t});0!==n.length?l[e]=o({},i[e],{fileIDs:n}):u.push(e)}),this.setState({currentUploads:l,files:s}),u.forEach(function(t){e._removeUpload(t)}),this._calculateTotalProgress(),this.emit("file-removed",t),a.preview&&lt.isObjectURL(a.preview)&&URL.revokeObjectURL(a.preview),this.log("Removed file: "+t)},i.prototype.pauseResume=function(t){var e=o({},this.getState().files);if(!e[t].uploadComplete){var n=!e[t].isPaused,r=o({},e[t],{isPaused:n});return e[t]=r,this.setState({files:e}),this.emit("upload-pause",t,n),n}},i.prototype.pauseAll=function(){var t=o({},this.getState().files);Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted}).forEach(function(e){var n=o({},t[e],{isPaused:!0});t[e]=n}),this.setState({files:t}),this.emit("pause-all")},i.prototype.resumeAll=function(){var t=o({},this.getState().files);Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted}).forEach(function(e){var n=o({},t[e],{isPaused:!1,error:null});t[e]=n}),this.setState({files:t}),this.emit("resume-all")},i.prototype.retryAll=function(){var t=o({},this.getState().files),e=Object.keys(t).filter(function(e){return t[e].error});e.forEach(function(e){var n=o({},t[e],{isPaused:!1,error:null});t[e]=n}),this.setState({files:t,error:null}),this.emit("retry-all",e);var n=this._createUpload(e);return this._runUpload(n)},i.prototype.cancelAll=function(){this.emit("cancel-all"),this.setState({files:{},totalProgress:0})},i.prototype.retryUpload=function(t){var e=o({},this.getState().files),n=o({},e[t],{error:null,isPaused:!1});e[t]=n,this.setState({files:e}),this.emit("upload-retry",t);var r=this._createUpload([t]);return this._runUpload(r)},i.prototype.reset=function(){this.cancelAll()},i.prototype._calculateProgress=function(t){var e=t.id;this.getFile(e)?(this.setFileState(e,{progress:o({},this.getState().files[e].progress,{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:Math.floor((t.bytesUploaded/t.bytesTotal*100).toFixed(2))})}),this._calculateTotalProgress()):this.log("Trying to set progress for a file that\u2019s been removed: ",e)},i.prototype._calculateTotalProgress=function(){var t=o({},this.getState().files),e=Object.keys(t).filter(function(e){return t[e].progress.uploadStarted}),n=100*e.length,r=0;e.forEach(function(e){r+=t[e].progress.percentage});var i=0===n?0:Math.floor((100*r/n).toFixed(2));this.setState({totalProgress:i})},i.prototype.actions=function(){var t=this;this.on("error",function(e){t.setState({error:e.message})}),this.on("upload-error",function(o,n){t.setFileState(o,{error:n.message}),t.setState({error:n.message});var r="Failed to upload "+t.getState().files[o].name;"object"===(void 0===n?"undefined":e(n))&&n.message&&(r={message:r,details:n.message}),t.info(r,"error",5e3)}),this.on("upload",function(){t.setState({error:null})}),this.on("file-remove",function(e){t.removeFile(e)}),this.on("upload-started",function(e,n){var r=t.getFile(e);t.setFileState(e,{progress:o({},r.progress,{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:r.size})})});var n=nt(this._calculateProgress,100,{leading:!0,trailing:!1});this.on("upload-progress",n),this.on("upload-success",function(e,n,r){t.setFileState(e,{progress:o({},t.getState().files[e].progress,{uploadComplete:!0,percentage:100}),uploadURL:r,isPaused:!1}),t._calculateTotalProgress()}),this.on("preprocess-progress",function(e,n){t.setFileState(e,{progress:o({},t.getState().files[e].progress,{preprocess:n})})}),this.on("preprocess-complete",function(e){var n=o({},t.getState().files);n[e]=o({},n[e],{progress:o({},n[e].progress)}),delete n[e].progress.preprocess,t.setState({files:n})}),this.on("postprocess-progress",function(e,n){t.setFileState(e,{progress:o({},t.getState().files[e].progress,{postprocess:n})})}),this.on("postprocess-complete",function(e){var n=o({},t.getState().files);n[e]=o({},n[e],{progress:o({},n[e].progress)}),delete n[e].progress.postprocess,t.setState({files:n})}),this.on("restored",function(){t._calculateTotalProgress()}),"undefined"!=typeof window&&(window.addEventListener("online",function(){return t.updateOnlineStatus()}),window.addEventListener("offline",function(){return t.updateOnlineStatus()}),setTimeout(function(){return t.updateOnlineStatus()},3e3))},i.prototype.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info("Connected!","success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info("No internet connection","error",0),this.wasOffline=!0)},i.prototype.getID=function(){return this.opts.id},i.prototype.use=function(t,o){if("function"!=typeof t){var n="Expected a plugin class, but got "+(null===t?"null":void 0===t?"undefined":e(t))+". Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var r=new t(this,o),i=r.id;if(this.plugins[r.type]=this.plugins[r.type]||[],!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");var s=this.getPlugin(i);if(s){var a="Already found a plugin named '"+s.id+"'.\n        Tried to use: '"+i+"'.\n        Uppy is currently limited to running one of every plugin.\n        Share your use case with us over at\n        https://github.com/transloadit/uppy/issues/\n        if you want us to reconsider.";throw new Error(a)}return this.plugins[r.type].push(r),r.install(),this},i.prototype.getPlugin=function(t){var e=!1;return this.iteratePlugins(function(o){if(o.id===t)return e=o,!1}),e},i.prototype.iteratePlugins=function(t){var e=this;Object.keys(this.plugins).forEach(function(o){e.plugins[o].forEach(t)})},i.prototype.removePlugin=function(t){var e=this.plugins[t.type];t.uninstall&&t.uninstall();var o=e.indexOf(t);-1!==o&&e.splice(o,1)},i.prototype.close=function(){this.reset(),this._storeUnsubscribe(),this.iteratePlugins(function(t){t.uninstall()})},i.prototype.info=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r="object"===(void 0===t?"undefined":e(t));this.setState({info:{isHidden:!1,type:o,message:r?t.message:t,details:r?t.details:null}}),this.emit("info-visible"),window.clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==n?setTimeout(this.hideInfo,n):void 0},i.prototype.hideInfo=function(){var t=o({},this.getState().info,{isHidden:!0});this.setState({info:t}),this.emit("info-hidden")},i.prototype.log=function(e,o){if(this.opts.debug){var n="[Uppy] ["+lt.getTimeStamp()+"] "+e;t.uppyLog=t.uppyLog+"\nDEBUG LOG: "+e,"error"!==o?"warning"!==o?e===""+e?console.log(n):(n="[Uppy] ["+lt.getTimeStamp()+"]",console.log(n),console.dir(e)):console.warn(n):console.error(n)}},i.prototype.run=function(){return this.log("Core is run, initializing actions..."),this.actions(),this},i.prototype.restore=function(t){return this.log('Core: attempting to restore upload "'+t+'"'),this.getState().currentUploads[t]?this._runUpload(t):(this._removeUpload(t),r.reject(new Error("Nonexistent upload")))},i.prototype._createUpload=function(t){var e,n=vt();return this.emit("upload",{id:n,fileIDs:t}),this.setState({currentUploads:o({},this.getState().currentUploads,(e={},e[n]={fileIDs:t,step:0},e))}),n},i.prototype._removeUpload=function(t){var e=o({},this.getState().currentUploads);delete e[t],this.setState({currentUploads:e})},i.prototype._runUpload=function(t){var e=this,n=this.getState().currentUploads[t],i=n.fileIDs,s=n.step,a=[].concat(this.preProcessors,this.uploaders,this.postProcessors),l=r.resolve();return a.forEach(function(n,r){r<s||(l=l.then(function(){var s,a=e.getState().currentUploads,l=o({},a[t],{step:r});return e.setState({currentUploads:o({},a,(s={},s[t]=l,s))}),n(i,t)}))}),l.catch(function(o){e.emit("error",o),e._removeUpload(t)}),l.then(function(){var o=i.map(function(t){return e.getFile(t)}),n=o.filter(function(t){return t&&!t.error}),r=o.filter(function(t){return t&&t.error});return e.emit("complete",{successful:n,failed:r}),e.emit("success",i),e._removeUpload(t),{successful:n,failed:r}})},i.prototype.upload=function(){var t=this;return this.plugins.uploader||this.log("No uploader type plugins are used","warning"),this._checkMinNumberOfFiles()?r.resolve().then(function(){return t.opts.onBeforeUpload(t.getState().files)}).catch(function(o){var n="object"===(void 0===o?"undefined":e(o))?o.message:o;return t.info(n,"error",5e3),r.reject(new Error("onBeforeUpload: "+n))}).then(function(){var e=[];Object.keys(t.getState().files).forEach(function(o){var n=t.getFile(o);n.progress.uploadStarted||e.push(n.id)});var o=t._createUpload(e);return t._runUpload(o)}):r.reject(new Error("Minimum number of files has not been reached"))},n(i,[{key:"state",get:function(){return this.getState()}}]),i}();(Ut=function(t){return new i(t)}).Uppy=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var It=Ut,Ft=function(){function t(e){var o=this;!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.queued=[],this.isOpen=!1,this.socket=new WebSocket(e.target),this.emitter=xt(),this.socket.onopen=function(t){for(o.isOpen=!0;o.queued.length>0&&o.isOpen;){var e=o.queued[0];o.send(e.action,e.payload),o.queued=o.queued.slice(1)}},this.socket.onclose=function(t){o.isOpen=!1},this._handleMessage=this._handleMessage.bind(this),this.socket.onmessage=this._handleMessage,this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this)}return t.prototype.close=function(){return this.socket.close()},t.prototype.send=function(t,e){this.isOpen?this.socket.send(JSON.stringify({action:t,payload:e})):this.queued.push({action:t,payload:e})},t.prototype.on=function(t,e){console.log(t),this.emitter.on(t,e)},t.prototype.emit=function(t,e){console.log(t),this.emitter.emit(t,e)},t.prototype.once=function(t,e){this.emitter.once(t,e)},t.prototype._handleMessage=function(t){try{var e=JSON.parse(t.data);console.log(e),this.emit(e.action,e.payload)}catch(t){console.log(t)}},t}(),jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Rt="undefined"==typeof Promise?ot.Promise:Promise,Bt=lt.emitSocketProgress,Mt=lt.getSocketHost,Lt=lt.settle,Nt=lt.limitPromises,zt=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.type="uploader",r.id="XHRUpload",r.title="XHRUpload";var i={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}},s={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!0,headers:{},locale:i,timeout:3e4,limit:0,getResponseData:function(t){return JSON.parse(t.response)},getResponseError:function(t){return new Error("Upload error")}};return r.opts=jt({},s,n),r.locale=jt({},i,r.opts.locale),r.locale.strings=jt({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.handleUpload=r.handleUpload.bind(r),"number"==typeof r.opts.limit&&0!==r.opts.limit?r.limitUploads=Nt(r.opts.limit):r.limitUploads=function(t){return t},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getOptions=function(t){var e=jt({},this.opts,this.uppy.state.xhrUpload||{},t.xhrUpload||{});return e.headers={},jt(e.headers,this.opts.headers),this.uppy.state.xhrUpload&&jt(e.headers,this.uppy.state.xhrUpload.headers),t.xhrUpload&&jt(e.headers,t.xhrUpload.headers),e},e.prototype.createFormDataUpload=function(t,e){var o=new FormData;return(Array.isArray(e.metaFields)?e.metaFields:Object.keys(t.meta)).forEach(function(e){o.append(e,t.meta[e])}),o.append(e.fieldName,t.data),o},e.prototype.createBareUpload=function(t,e){return t.data},e.prototype.upload=function(t,e,o){var n=this,r=this.getOptions(t);return this.uppy.log("uploading "+e+" of "+o),new Rt(function(e,o){var i=r.formData?n.createFormDataUpload(t,r):n.createBareUpload(t,r),s=function(){u.abort(),n.uppy.log("[XHRUpload] "+p+" timed out");var e=new Error(n.i18n("timedOut",{seconds:Math.ceil(r.timeout/1e3)}));n.uppy.emit("upload-error",t.id,e),o(e)},a=void 0,l=function(){clearTimeout(a),a=setTimeout(s,r.timeout)},u=new XMLHttpRequest,p=vt();u.upload.addEventListener("loadstart",function(t){n.uppy.log("[XHRUpload] "+p+" started"),r.timeout>0&&l()}),u.upload.addEventListener("progress",function(e){n.uppy.log("[XHRUpload] "+p+" progress: "+e.loaded+" / "+e.total),r.timeout>0&&l(),e.lengthComputable&&n.uppy.emit("upload-progress",{uploader:n,id:t.id,bytesUploaded:e.loaded,bytesTotal:e.total})}),u.addEventListener("load",function(i){if(n.uppy.log("[XHRUpload] "+p+" finished"),clearTimeout(a),i.target.status>=200&&i.target.status<300){var s=r.getResponseData(u),l=s[r.responseUrlFieldName];return n.uppy.emit("upload-success",t.id,s,l),l&&n.uppy.log("Download "+t.name+" from "+t.uploadURL),e(t)}var c=r.getResponseError(u)||new Error("Upload error");return c.request=u,n.uppy.emit("upload-error",t.id,c),o(c)}),u.addEventListener("error",function(e){n.uppy.log("[XHRUpload] "+p+" errored"),clearTimeout(a);var i=r.getResponseError(u)||new Error("Upload error");return n.uppy.emit("upload-error",t.id,i),o(i)}),u.open(r.method.toUpperCase(),r.endpoint,!0),Object.keys(r.headers).forEach(function(t){u.setRequestHeader(t,r.headers[t])}),u.send(i),n.uppy.on("upload-cancel",function(e){e===t.id&&u.abort()}),n.uppy.on("cancel-all",function(){u.abort()})})},e.prototype.uploadRemote=function(t,e,o){var n=this,r=this.getOptions(t);return new Rt(function(e,o){var i={};(Array.isArray(r.metaFields)?r.metaFields:Object.keys(t.meta)).forEach(function(e){i[e]=t.meta[e]}),fetch(t.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(jt({},t.remote.body,{endpoint:r.endpoint,size:t.data.size,fieldname:r.fieldName,fields:i,headers:r.headers}))}).then(function(r){if(r.status<200&&r.status>300)return o(r.statusText);r.json().then(function(r){var i=r.token,s=Mt(t.remote.host),a=new Ft({target:s+"/api/"+i});a.on("progress",function(e){return Bt(n,e,t)}),a.on("success",function(o){return n.uppy.emit("upload-success",t.id,o,o.url),a.close(),e()}),a.on("error",function(e){n.uppy.emit("upload-error",t.id,new Error(e.error)),o(new Error(e.error))})})})})},e.prototype.uploadFiles=function(t){var e=this,o=t.map(function(o,n){var r=parseInt(n,10)+1,i=t.length;return o.error?function(){return Rt.reject(new Error(o.error))}:o.isRemote?(e.uppy.emit("upload-started",o.id),e.uploadRemote.bind(e,o,r,i)):(e.uppy.emit("upload-started",o.id),e.upload.bind(e,o,r,i))}).map(function(t){return e.limitUploads(t)()});return Lt(o)},e.prototype.handleUpload=function(t){if(0===t.length)return this.uppy.log("[XHRUpload] No files to upload!"),Rt.resolve();this.uppy.log("[XHRUpload] Uploading...");var e=t.map(function(t){return this.uppy.state.files[t]},this);return this.uploadFiles(e).then(function(){return null})},e.prototype.install=function(){this.uppy.addUploader(this.handleUpload)},e.prototype.uninstall=function(){this.uppy.removeUploader(this.handleUpload)},e}(ht),qt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ht="undefined"==typeof Promise?ot.Promise:Promise,Wt=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.type="uploader",r.id="AwsS3",r.title="AWS S3";var i={strings:{preparingUpload:"Preparing upload..."}},s={timeout:3e4,limit:0,getUploadParameters:r.getUploadParameters.bind(r),locale:i};return r.opts=qt({},s,n),r.locale=qt({},i,r.opts.locale),r.locale.strings=qt({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.prepareUpload=r.prepareUpload.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getUploadParameters=function(t){if(!this.opts.host)throw new Error("Expected a `host` option containing an uppy-server address.");var e=encodeURIComponent(t.name),o=encodeURIComponent(t.type);return fetch(this.opts.host+"/s3/params?filename="+e+"&type="+o,{method:"get",headers:{accept:"application/json"}}).then(function(t){return t.json()})},e.prototype.prepareUpload=function(t){var e=this;return t.forEach(function(t){e.uppy.emit("preprocess-progress",t,{mode:"determinate",message:e.i18n("preparingUpload"),value:0})}),Ht.all(t.map(function(t){var o=e.uppy.getFile(t);return Ht.resolve().then(function(){return e.opts.getUploadParameters(o)}).then(function(t){return e.uppy.emit("preprocess-progress",o.id,{mode:"determinate",message:e.i18n("preparingUpload"),value:1}),t}).catch(function(t){e.uppy.emit("upload-error",o.id,t)})})).then(function(o){var n={};t.forEach(function(t,r){var i=e.uppy.getFile(t);if(!i.error){var s=o[r],a=s.method,l=void 0===a?"post":a,u=s.url,p=s.fields,c=s.headers,h={method:l,formData:"post"===l.toLowerCase(),endpoint:u,metaFields:Object.keys(p)};c&&(h.headers=c);var d=qt({},i,{meta:qt({},i.meta,p),xhrUpload:h});n[t]=d}}),e.uppy.setState({files:qt({},e.uppy.getState().files,n)}),t.forEach(function(t){e.uppy.emit("preprocess-complete",t)})})},e.prototype.install=function(){this.uppy.addPreProcessor(this.prepareUpload),this.uppy.use(zt,{fieldName:"file",responseUrlFieldName:"location",timeout:this.opts.timeout,limit:this.opts.limit,getResponseData:function(t){function e(e){var o=t.responseXML.querySelector(e);return o?o.textContent:""}return m(t)?{location:e("Location"),bucket:e("Bucket"),key:e("Key"),etag:e("ETag")}:{location:t.responseURL}},getResponseError:function(t){if(m(t)){var e=t.responseXML.querySelector("Error > Message");return new Error(e.textContent)}}})},e.prototype.uninstall=function(){var t=this.uppy.getPlugin("XHRUpload");this.uppy.removePlugin(t),this.uppy.removePreProcessor(this.prepareUpload)},e}(ht),Xt=function(t,e){function o(t,n){return t.reduce(function(t,r){return Array.isArray(r)&&n<e?t.concat(o(r,n+1)):t.concat(r)},[])}return(e="number"==typeof e?e:1/0)?o(t,1):Array.isArray(t)?t.map(function(t){return t}):t},Vt={};(function(t){Vt=function(e,o){function n(e){function n(){o&&o(e,i),o=null}l?t.nextTick(n):n()}function r(t,e,o){i[t]=o,(0==--s||e)&&n(e)}var i,s,a,l=!0;Array.isArray(e)?(i=[],s=e.length):(a=Object.keys(e),i={},s=a.length),s?a?a.forEach(function(t){e[t](function(e,o){r(t,e,o)})}):e.forEach(function(t,e){t(function(t,o){r(e,t,o)})}):n(null),l=!1}}).call(this,K);var Gt=function(t,e){function o(t){return e.onDragEnter&&e.onDragEnter(t),t.stopPropagation(),t.preventDefault(),!1}function n(o){if(o.stopPropagation(),o.preventDefault(),o.dataTransfer.items){var n=b(o.dataTransfer.items),r=n.filter(function(t){return"file"===t.kind}),i=n.filter(function(t){return"string"===t.kind});if(0===r.length&&!e.onDropText)return;if(0===i.length&&!e.onDrop)return;if(0===r.length&&0===i.length)return}return t.classList.add("drag"),clearTimeout(l),e.onDragOver&&e.onDragOver(o),o.dataTransfer.dropEffect="copy",!1}function r(t){return t.stopPropagation(),t.preventDefault(),e.onDragLeave&&e.onDragLeave(t),clearTimeout(l),l=setTimeout(s,50),!1}function i(t){t.stopPropagation(),t.preventDefault(),e.onDragLeave&&e.onDragLeave(t),clearTimeout(l),s();var o={x:t.clientX,y:t.clientY},n=t.dataTransfer.getData("text");if(n&&e.onDropText&&e.onDropText(n,o),t.dataTransfer.items){var r=b(t.dataTransfer.items).filter(function(t){return"file"===t.kind});if(0===r.length)return;Vt(r.map(function(t){return function(e){v(t.webkitGetAsEntry(),e)}}),function(t,n){if(t)throw t;e.onDrop&&e.onDrop(Xt(n),o)})}else{var i=b(t.dataTransfer.files);if(0===i.length)return;i.forEach(function(t){t.fullPath="/"+t.name}),e.onDrop&&e.onDrop(i,o)}return!1}function s(){t.classList.remove("drag")}if("string"==typeof t){var a=t;if(!(t=window.document.querySelector(t)))throw new Error('"'+a+'" does not match any HTML elements')}if(!t)throw new Error('"'+t+'" is not a valid HTML element');"function"==typeof e&&(e={onDrop:e});var l;return t.addEventListener("dragenter",o,!1),t.addEventListener("dragover",n,!1),t.addEventListener("dragleave",r,!1),t.addEventListener("drop",i,!1),function(){s(),t.removeEventListener("dragenter",o,!1),t.removeEventListener("dragover",n,!1),t.removeEventListener("dragleave",r,!1),t.removeEventListener("drop",i,!1)}},Yt={exports:{}};!function(){"use strict";function t(){for(var o=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var i=typeof r;if("string"===i||"number"===i)o.push(r);else if(Array.isArray(r))o.push(t.apply(null,r));else if("object"===i)for(var s in r)e.call(r,s)&&r[s]&&o.push(s)}}return o.join(" ")}var e={}.hasOwnProperty;Yt.exports?Yt.exports=t:window.classNames=t}(),Yt=Yt.exports;var Jt=V.h,Kt=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"30",height:"30",viewBox:"0 0 30 30"},Jt("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))},$t=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"51",height:"51",viewBox:"0 0 51 51"},Jt("path",{d:"M17.21 45.765a5.394 5.394 0 0 1-7.62 0l-4.12-4.122a5.393 5.393 0 0 1 0-7.618l6.774-6.775-2.404-2.404-6.775 6.776c-3.424 3.427-3.424 9 0 12.426l4.12 4.123a8.766 8.766 0 0 0 6.216 2.57c2.25 0 4.5-.858 6.214-2.57l13.55-13.552a8.72 8.72 0 0 0 2.575-6.213 8.73 8.73 0 0 0-2.575-6.213l-4.123-4.12-2.404 2.404 4.123 4.12a5.352 5.352 0 0 1 1.58 3.81c0 1.438-.562 2.79-1.58 3.808l-13.55 13.55z"}),Jt("path",{d:"M44.256 2.858A8.728 8.728 0 0 0 38.043.283h-.002a8.73 8.73 0 0 0-6.212 2.574l-13.55 13.55a8.725 8.725 0 0 0-2.575 6.214 8.73 8.73 0 0 0 2.574 6.216l4.12 4.12 2.405-2.403-4.12-4.12a5.357 5.357 0 0 1-1.58-3.812c0-1.437.562-2.79 1.58-3.808l13.55-13.55a5.348 5.348 0 0 1 3.81-1.58c1.44 0 2.792.562 3.81 1.58l4.12 4.12c2.1 2.1 2.1 5.518 0 7.617L39.2 23.775l2.404 2.404 6.775-6.777c3.426-3.427 3.426-9 0-12.426l-4.12-4.12z"}))},Qt=function(){return Jt("svg",{class:"UppyIcon retry",width:"28",height:"31",viewBox:"0 0 16 19",xmlns:"http://www.w3.org/2000/svg"},Jt("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),Jt("path",{d:"M7.9 3H10v2H7.9z"}),Jt("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),Jt("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))},Zt=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"28",height:"28",viewBox:"0 0 28 28"},Jt("path",{d:"M25.436 2.566a7.98 7.98 0 0 0-2.078-1.51C22.638.703 21.906.5 21.198.5a3 3 0 0 0-1.023.17 2.436 2.436 0 0 0-.893.562L2.292 18.217.5 27.5l9.28-1.796 16.99-16.99c.255-.254.444-.56.562-.888a3 3 0 0 0 .17-1.023c0-.708-.205-1.44-.555-2.16a8 8 0 0 0-1.51-2.077zM9.01 24.252l-4.313.834c0-.03.008-.06.012-.09.007-.944-.74-1.715-1.67-1.723-.04 0-.078.007-.118.01l.83-4.29L17.72 5.024l5.264 5.264L9.01 24.252zm16.84-16.96a.818.818 0 0 1-.194.31l-1.57 1.57-5.26-5.26 1.57-1.57a.82.82 0 0 1 .31-.194 1.45 1.45 0 0 1 .492-.074c.397 0 .917.126 1.468.397.55.27 1.13.678 1.656 1.21.53.53.94 1.11 1.208 1.655.272.55.397 1.07.393 1.468.004.193-.027.358-.074.488z"}))},te=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"27",height:"25",viewBox:"0 0 27 25"},Jt("path",{d:"M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z"}),Jt("path",{d:"M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z"}))},ee=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"14px",height:"14px",viewBox:"0 0 19 19"},Jt("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))},oe=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"48",height:"69",viewBox:"0 0 48 69"},Jt("path",{d:"M.5 1.5h5zM10.5 1.5h5zM20.5 1.5h5zM30.504 1.5h5zM45.5 11.5v5zM45.5 21.5v5zM45.5 31.5v5zM45.5 41.502v5zM45.5 51.502v5zM45.5 61.5v5zM45.5 66.502h-4.998zM35.503 66.502h-5zM25.5 66.502h-5zM15.5 66.502h-5zM5.5 66.502h-5zM.5 66.502v-5zM.5 56.502v-5zM.5 46.503V41.5zM.5 36.5v-5zM.5 26.5v-5zM.5 16.5v-5zM.5 6.5V1.498zM44.807 11H36V2.195z"}))},ne=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",width:"62",height:"62",viewBox:"0 0 62 62",xmlns:"http://www.w3.org/2000/svg"},Jt("path",{d:"M4.309 4.309h24.912v53.382h-6.525v3.559h16.608v-3.559h-6.525V4.309h24.912v10.676h3.559V.75H.75v14.235h3.559z","fill-rule":"nonzero",fill:"#000"}))},re=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",viewBox:"0 0 55 55"},Jt("path",{d:"M52.66.25c-.216-.19-.5-.276-.79-.242l-31 4.01a1 1 0 0 0-.87.992V40.622C18.174 38.428 15.273 37 12 37c-5.514 0-10 4.037-10 9s4.486 9 10 9 10-4.037 10-9c0-.232-.02-.46-.04-.687.014-.065.04-.124.04-.192V16.12l29-3.753v18.257C49.174 28.428 46.273 27 43 27c-5.514 0-10 4.037-10 9s4.486 9 10 9c5.464 0 9.913-3.966 9.993-8.867 0-.013.007-.024.007-.037V1a.998.998 0 0 0-.34-.75zM12 53c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zm31-10c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zM22 14.1V5.89l29-3.753v8.21l-29 3.754z"}))},ie=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",viewBox:"0 0 58 58"},Jt("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),Jt("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))},se=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon",viewBox:"0 0 342 335"},Jt("path",{d:"M329.337 227.84c-2.1 1.3-8.1 2.1-11.9 2.1-12.4 0-27.6-5.7-49.1-14.9 8.3-.6 15.8-.9 22.6-.9 12.4 0 16 0 28.2 3.1 12.1 3 12.2 9.3 10.2 10.6zm-215.1 1.9c4.8-8.4 9.7-17.3 14.7-26.8 12.2-23.1 20-41.3 25.7-56.2 11.5 20.9 25.8 38.6 42.5 52.8 2.1 1.8 4.3 3.5 6.7 5.3-34.1 6.8-63.6 15-89.6 24.9zm39.8-218.9c6.8 0 10.7 17.06 11 33.16.3 16-3.4 27.2-8.1 35.6-3.9-12.4-5.7-31.8-5.7-44.5 0 0-.3-24.26 2.8-24.26zm-133.4 307.2c3.9-10.5 19.1-31.3 41.6-49.8 1.4-1.1 4.9-4.4 8.1-7.4-23.5 37.6-39.3 52.5-49.7 57.2zm315.2-112.3c-6.8-6.7-22-10.2-45-10.5-15.6-.2-34.3 1.2-54.1 3.9-8.8-5.1-17.9-10.6-25.1-17.3-19.2-18-35.2-42.9-45.2-70.3.6-2.6 1.2-4.8 1.7-7.1 0 0 10.8-61.5 7.9-82.3-.4-2.9-.6-3.7-1.4-5.9l-.9-2.5c-2.9-6.76-8.7-13.96-17.8-13.57l-5.3-.17h-.1c-10.1 0-18.4 5.17-20.5 12.84-6.6 24.3.2 60.5 12.5 107.4l-3.2 7.7c-8.8 21.4-19.8 43-29.5 62l-1.3 2.5c-10.2 20-19.5 37-27.9 51.4l-8.7 4.6c-.6.4-15.5 8.2-19 10.3-29.6 17.7-49.28 37.8-52.54 53.8-1.04 5-.26 11.5 5.01 14.6l8.4 4.2c3.63 1.8 7.53 2.7 11.43 2.7 21.1 0 45.6-26.2 79.3-85.1 39-12.7 83.4-23.3 122.3-29.1 29.6 16.7 66 28.3 89 28.3 4.1 0 7.6-.4 10.5-1.2 4.4-1.1 8.1-3.6 10.4-7.1 4.4-6.7 5.4-15.9 4.1-25.4-.3-2.8-2.6-6.3-5-8.7z"}))},ae=function(t){var e={color:"#cbcbcb",icon:""};if(!t)return e;var o=t.split("/")[0],n=t.split("/")[1];return"text"===o?{color:"#cbcbcb",icon:ne()}:"audio"===o?{color:"#1abc9c",icon:re()}:"video"===o?{color:"#2980b9",icon:ie()}:"application"===o&&"pdf"===n?{color:"#e74c3c",icon:se()}:"image"===o?{color:"#f2f2f2",icon:""}:e},le=function(){return Jt("svg",{"aria-hidden":"true",class:"UppyIcon UppyIcon-check",width:"13px",height:"9px",viewBox:"0 0 13 9"},Jt("polygon",{points:"5 7.293 1.354 3.647 0.646 4.354 5 8.707 12.354 1.354 11.646 0.647"}))},ue=V.h,pe=function(t){function e(o){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return n.meta={},n.tempStoreMetaOrSubmit=n.tempStoreMetaOrSubmit.bind(n),n.renderMetaFields=n.renderMetaFields.bind(n),n.handleClick=n.handleClick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.tempStoreMetaOrSubmit=function(t){var e=this.props.files[this.props.fileCardFor];if(13===t.keyCode)return t.stopPropagation(),t.preventDefault(),void this.props.fileCardDone(this.meta,e.id);var o=t.target.value,n=t.target.dataset.name;this.meta[n]=o},e.prototype.renderMetaFields=function(t){var e=this;return(this.props.metaFields||[]).map(function(o){return ue("fieldset",{class:"uppy-DashboardFileCard-fieldset"},ue("label",{class:"uppy-DashboardFileCard-label"},o.name),ue("input",{class:"uppy-DashboardFileCard-input",type:"text","data-name":o.id,value:t.meta[o.id],placeholder:o.placeholder,onkeyup:e.tempStoreMetaOrSubmit,onkeydown:e.tempStoreMetaOrSubmit,onkeypress:e.tempStoreMetaOrSubmit}))})},e.prototype.handleClick=function(t){var e=this.props.files[this.props.fileCardFor];this.props.fileCardDone(this.meta,e.id)},e.prototype.render=function(){var t=this.props.files[this.props.fileCardFor];return ue("div",{class:"uppy-DashboardFileCard","aria-hidden":!this.props.fileCardFor},this.props.fileCardFor&&ue("div",{style:"width: 100%; height: 100%;"},ue("div",{class:"uppy-DashboardContent-bar"},ue("h2",{class:"uppy-DashboardContent-title"},"Editing ",ue("span",{class:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)),ue("button",{class:"uppy-DashboardContent-back",type:"button",title:"Finish editing file",onclick:this.handleClick},"Done")),ue("div",{class:"uppy-DashboardFileCard-inner"},ue("div",{class:"uppy-DashboardFileCard-preview",style:{backgroundColor:ae(t.type).color}},t.preview?ue("img",{alt:t.name,src:t.preview}):ue("div",{class:"uppy-DashboardItem-previewIconWrap"},ue("span",{class:"uppy-DashboardItem-previewIcon",style:{color:ae(t.type).color}},ae(t.type).icon),ue("svg",{class:"uppy-DashboardItem-previewIconBg",width:"72",height:"93",viewBox:"0 0 72 93"},ue("g",null,ue("path",{d:"M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z",fill:"#FFF"}),ue("path",{d:"M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z",fill:"#E4E4E4"}))))),ue("div",{class:"uppy-DashboardFileCard-info"},ue("fieldset",{class:"uppy-DashboardFileCard-fieldset"},ue("label",{class:"uppy-DashboardFileCard-label"},"Name"),ue("input",{class:"uppy-DashboardFileCard-input",type:"text","data-name":"name",value:t.meta.name||"",placeholder:"name",onkeyup:this.tempStoreMetaOrSubmit,onkeydown:this.tempStoreMetaOrSubmit,onkeypress:this.tempStoreMetaOrSubmit})),this.renderMetaFields(t))),ue("div",{class:"uppy-Dashboard-actions"},ue("button",{class:"UppyButton--circular UppyButton--blue uppy-DashboardFileCard-done",type:"button",title:"Finish editing file",onclick:this.handleClick},le()))))},e}(V.Component),ce=V.h,he=function(t){function e(o){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return n.handleClick=n.handleClick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleClick=function(t){this.input.click()},e.prototype.render=function(){var t=this;return ce("span",null,0===this.props.acquirers.length?this.props.i18n("dropPaste"):this.props.i18n("dropPasteImport")," ",ce("button",{type:"button",class:"uppy-Dashboard-browse",onclick:this.handleClick},this.props.i18n("browse")),ce("input",{class:"uppy-Dashboard-input",hidden:"true","aria-hidden":"true",tabindex:"-1",type:"file",name:"files[]",multiple:"true",onchange:this.props.handleInputChange,ref:function(e){t.input=e}}))},e}(V.Component),de=V.h,fe=2*Math.PI*15,ye=function(t){return de("svg",{width:"70",height:"70",viewBox:"0 0 36 36",class:"UppyIcon UppyIcon-progressCircle"},de("g",{class:"progress-group"},de("circle",{r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none",class:"bg"}),de("circle",{r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)","stroke-width":"2",fill:"none",class:"progress","stroke-dasharray":fe,"stroke-dashoffset":fe-fe/100*t.progress})),de("polygon",{transform:"translate(3, 3)",points:"12 20 12 10 20 15",class:"play"}),de("g",{transform:"translate(14.5, 13)",class:"pause"},de("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),de("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})),de("polygon",{transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634",class:"check"}),de("polygon",{class:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))},ge=lt.getETA,me=lt.getSpeed,ve=lt.prettyETA,be=lt.getFileNameAndExtension,we=lt.truncateString,Se=lt.copyToClipboard,_e=Zt,Pe=$t,ke=Qt,xe=V.h,Ee=oe,Te=V.h,Oe=function(t){var e=0===t.totalFileCount,o=Yt("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":e});return Te("ul",{class:o},e&&Te("div",{class:"uppy-Dashboard-bgIcon"},Ee(),Te("h3",{class:"uppy-Dashboard-dropFilesTitle"},Te(he,{acquirers:t.acquirers,handleInputChange:t.handleInputChange,i18n:t.i18n})),t.note&&Te("p",{class:"uppy-Dashboard-note"},t.note)),Object.keys(t.files).map(function(e){return function(t){var e=t.file,o=t.acquirers,n=e.progress.preprocess||e.progress.postprocess,r=e.progress.uploadComplete&&!n&&!e.error,i=e.progress.uploadStarted||n,s=e.progress.uploadStarted&&!e.progress.uploadComplete||n,a=e.isPaused||!1,l=e.error||!1,u=be(e.meta.name).name,p=t.isWide?we(u,14):u,c=Yt("uppy-DashboardItem",{"is-inprogress":s},{"is-processing":n},{"is-complete":r},{"is-paused":a},{"is-error":l},{"is-resumable":t.resumableUploads});return xe("li",{class:c,id:"uppy_"+e.id,title:e.meta.name},xe("div",{class:"uppy-DashboardItem-preview"},xe("div",{class:"uppy-DashboardItem-previewInnerWrap",style:{backgroundColor:ae(e.type).color}},e.preview?xe("img",{alt:e.name,src:e.preview}):xe("div",{class:"uppy-DashboardItem-previewIconWrap"},xe("span",{class:"uppy-DashboardItem-previewIcon",style:{color:ae(e.type).color}},ae(e.type).icon),xe("svg",{class:"uppy-DashboardItem-previewIconBg",width:"72",height:"93",viewBox:"0 0 72 93"},xe("g",null,xe("path",{d:"M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z",fill:"#FFF"}),xe("path",{d:"M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z",fill:"#E4E4E4"}))))),xe("div",{class:"uppy-DashboardItem-progress"},r?xe("div",{class:"uppy-DashboardItem-progressIndicator"},ye({progress:e.progress.percentage,fileID:e.id})):xe("button",{class:"uppy-DashboardItem-progressIndicator",type:"button",title:r?"upload complete":t.resumableUploads?e.isPaused?"resume upload":"pause upload":"cancel upload",onclick:function(o){r||(l?t.retryUpload(e.id):t.resumableUploads?t.pauseUpload(e.id):t.cancelUpload(e.id))}},l?ke():ye({progress:e.progress.percentage,fileID:e.id})),t.showProgressDetails&&xe("div",{class:"uppy-DashboardItem-progressInfo",title:t.i18n("fileProgress"),"aria-label":t.i18n("fileProgress")},!e.isPaused&&!r&&xe("span",null,ve(ge(e.progress))," \u30fb \u2191 ",Et(me(e.progress)),"/s")))),xe("div",{class:"uppy-DashboardItem-info"},xe("h4",{class:"uppy-DashboardItem-name",title:u},e.uploadURL?xe("a",{href:e.uploadURL,target:"_blank"},e.extension?p+"."+e.extension:p):e.extension?p+"."+e.extension:p),xe("div",{class:"uppy-DashboardItem-status"},e.data.size&&xe("div",{class:"uppy-DashboardItem-statusSize"},Et(e.data.size)),e.source&&xe("div",{class:"uppy-DashboardItem-sourceIcon"},o.map(function(o){if(o.id===e.source)return xe("span",{title:t.i18n("fileSource")+": "+o.name},o.icon())}))),!i&&xe("button",{class:"uppy-DashboardItem-edit",type:"button","aria-label":"Edit file",title:"Edit file",onclick:function(o){return t.showFileCard(e.id)}},_e()),e.uploadURL&&xe("button",{class:"uppy-DashboardItem-copyLink",type:"button","aria-label":"Copy link",title:"Copy link",onclick:function(){Se(e.uploadURL,t.i18n("copyLinkToClipboardFallback")).then(function(){t.log("Link copied to clipboard."),t.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log)}},Pe())),xe("div",{class:"uppy-DashboardItem-action"},!r&&xe("button",{class:"uppy-DashboardItem-remove",type:"button","aria-label":"Remove file",title:"Remove file",onclick:function(){return t.removeFile(e.id)}},xe("svg",{"aria-hidden":"true",class:"UppyIcon",width:"60",height:"60",viewBox:"0 0 60 60",xmlns:"http://www.w3.org/2000/svg"},xe("path",{stroke:"#FFF","stroke-width":"1","fill-rule":"nonzero","vector-effect":"non-scaling-stroke",d:"M30 1C14 1 1 14 1 30s13 29 29 29 29-13 29-29S46 1 30 1z"}),xe("path",{fill:"#FFF","vector-effect":"non-scaling-stroke",d:"M42 39.667L39.667 42 30 32.333 20.333 42 18 39.667 27.667 30 18 20.333 20.333 18 30 27.667 39.667 18 42 20.333 32.333 30z"})))))}({acquirers:t.acquirers,file:t.files[e],showFileCard:t.showFileCard,showProgressDetails:t.showProgressDetails,info:t.info,log:t.log,i18n:t.i18n,removeFile:t.removeFile,pauseUpload:t.pauseUpload,cancelUpload:t.cancelUpload,retryUpload:t.retryUpload,resumableUploads:t.resumableUploads,isWide:t.isWide})}))},Ae=te,Ce=V.h,De=function(t){function e(o){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return n.handleClick=n.handleClick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleClick=function(t){this.input.click()},e.prototype.render=function(){var t=this,e=0===Object.keys(this.props.files).length;return 0!==this.props.acquirers.length?Ce("div",{class:"uppy-DashboardTabs"},Ce("ul",{class:"uppy-DashboardTabs-list",role:"tablist"},Ce("li",{class:"uppy-DashboardTab",role:"presentation"},Ce("button",{type:"button",class:"uppy-DashboardTab-btn",role:"tab",tabindex:"0",onclick:this.handleClick},Ae(),Ce("div",{class:"uppy-DashboardTab-name"},this.props.i18n("myDevice"))),Ce("input",{class:"uppy-Dashboard-input",hidden:"true","aria-hidden":"true",tabindex:"-1",type:"file",name:"files[]",multiple:"true",onchange:this.props.handleInputChange,ref:function(e){t.input=e}})),this.props.acquirers.map(function(e){return Ce("li",{class:"uppy-DashboardTab",role:"presentation"},Ce("button",{class:"uppy-DashboardTab-btn",type:"button",role:"tab",tabindex:"0","aria-controls":"uppy-DashboardContent-panel--"+e.id,"aria-selected":t.props.activePanel.id===e.id,onclick:function(){return t.props.showPanel(e.id)}},e.icon(),Ce("h5",{class:"uppy-DashboardTab-name"},e.name)))}))):Ce("div",{class:"uppy-DashboardTabs","aria-hidden":e},Ce("div",{class:"uppy-DashboardTabs-title"},Ce(he,{acquirers:this.props.acquirers,handleInputChange:this.props.handleInputChange,i18n:this.props.i18n})))},e}(V.Component),Ue=lt.isTouchDevice,Ie=ee,Fe=V.h,je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Re=V.h,Be=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="progressindicator",r.id=r.opts.id||"Informer",r.title="Informer",r.opts=je({},{typeColors:{info:{text:"#fff",bg:"#000"},warning:{text:"#fff",bg:"#F6A623"},error:{text:"#fff",bg:"#e74c3c"},success:{text:"#fff",bg:"#7ac824"}}},n),r.render=r.render.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t){var e=t.info,o=e.isHidden,n=e.type,r=e.message,i=e.details,s={backgroundColor:this.opts.typeColors[n].bg,color:this.opts.typeColors[n].text};return Re("div",{class:"uppy uppy-Informer",style:s,"aria-hidden":o},Re("p",{role:"alert"},r," ",i&&Re("span",{style:{color:this.opts.typeColors[n].bg},"aria-label":i,"data-microtip-position":"top","data-microtip-size":"large",role:"tooltip"},"?")))},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e}(ht),Me=V.h,Le=nt(function(t){return Me("span",null,t.totalProgress||0,"%\u30fb",t.complete," / ",t.inProgress,"\u30fb",t.totalUploadedSize," / ",t.totalSize,"\u30fb\u2191 ",t.totalSpeed,"/s\u30fb",t.totalETA)},500,{leading:!0,trailing:!0}),Ne="preprocessing",ze="uploading",qe=function(t){return Me("button",{type:"button",class:"uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--upload","aria-label":t.i18n("uploadXFiles",{smart_count:t.newFiles}),onclick:t.startUpload},t.inProgress?t.i18n("uploadXNewFiles",{smart_count:t.newFiles}):t.i18n("uploadXFiles",{smart_count:t.newFiles}))},He=function(t){return Me("button",{type:"button",class:"uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t.i18n("retryUpload"),onclick:t.retryAll},t.i18n("retry"))},We=function(t){var e=Math.round(100*t.value);return Me("div",{class:"uppy-StatusBar-content"},"determinate"===t.mode?e+"%\u30fb":"",t.message)},Xe=function(t){return Me("div",{class:"uppy-StatusBar-content"},t.isUploadStarted&&!t.isAllComplete?t.isAllPaused?Me("div",{title:"Paused"},Me(Ye,t)," Paused\u30fb",t.totalProgress,"%"):Me("div",{title:"Uploading"},Me(Ye,t)," Uploading... ",Me(Le,t)):null)},Ve=function(t){var e=t.totalProgress,o=t.i18n;return Me("div",{class:"uppy-StatusBar-content",role:"status"},Me("span",{title:"Complete"},Me("svg",{"aria-hidden":"true",class:"uppy-StatusBar-statusIndicator UppyIcon",width:"18",height:"17",viewBox:"0 0 23 17"},Me("path",{d:"M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z"})),o("uploadComplete"),"\u30fb",e,"%"))},Ge=function(t){var e=t.error,o=(t.retryAll,t.i18n);return Me("div",{class:"uppy-StatusBar-content",role:"alert"},Me("strong",null,o("uploadFailed"),".")," ",Me("span",null,o("pleasePressRetry")),Me("span",{class:"uppy-StatusBar-details","aria-label":e,"data-microtip-position":"top","data-microtip-size":"large",role:"tooltip"},"?"))},Ye=function(t){var e=t.resumableUploads,o=t.isAllPaused,n=(0,t.i18n)(e?o?"resumeUpload":"pauseUpload":"cancelUpload");return Me("button",{title:n,class:"uppy-StatusBar-statusIndicator",type:"button",onclick:function(){return function(t){if(!t.isAllComplete)return t.resumableUploads?t.isAllPaused?t.resumeAll():t.pauseAll():t.cancelAll()}(t)}},e?o?Me("svg",{"aria-hidden":"true",class:"UppyIcon",width:"15",height:"17",viewBox:"0 0 11 13"},Me("path",{d:"M1.26 12.534a.67.67 0 0 1-.674.012.67.67 0 0 1-.336-.583v-11C.25.724.38.5.586.382a.658.658 0 0 1 .673.012l9.165 5.5a.66.66 0 0 1 .325.57.66.66 0 0 1-.325.573l-9.166 5.5z"})):Me("svg",{"aria-hidden":"true",class:"UppyIcon",width:"16",height:"17",viewBox:"0 0 12 13"},Me("path",{d:"M4.888.81v11.38c0 .446-.324.81-.722.81H2.722C2.324 13 2 12.636 2 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81zM9.888.81v11.38c0 .446-.324.81-.722.81H7.722C7.324 13 7 12.636 7 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81z"})):Me("svg",{"aria-hidden":"true",class:"UppyIcon",width:"16px",height:"16px",viewBox:"0 0 19 19"},Me("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"})))},Je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ke=lt.getSpeed,$e=lt.getBytesRemaining,Qe=lt.prettyETA,Ze=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.id=r.opts.id||"StatusBar",r.title="StatusBar",r.type="progressindicator";var i={strings:{uploading:"Uploading",uploadComplete:"Upload complete",uploadFailed:"Upload failed",pleasePressRetry:"Please press Retry to upload again",paused:"Paused",error:"Error",retry:"Retry",pressToRetry:"Press to retry",retryUpload:"Retry upload",resumeUpload:"Resume upload",cancelUpload:"Cancel upload",pauseUpload:"Pause upload",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"}}},s={target:"body",hideUploadButton:!1,showProgressDetails:!1,locale:i,hideAfterFinish:!0};return r.opts=Je({},s,n),r.locale=Je({},i,r.opts.locale),r.locale.strings=Je({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.render=r.render.bind(r),r.install=r.install.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getTotalSpeed=function(t){var e=0;return t.forEach(function(t){e+=Ke(t.progress)}),e},e.prototype.getTotalETA=function(t){var e=this.getTotalSpeed(t);if(0===e)return 0;var o=t.reduce(function(t,e){return t+$e(e.progress)},0);return Math.round(o/e*10)/10},e.prototype.render=function(t){var e=t.files,o=Object.keys(e).filter(function(t){return e[t].progress.uploadStarted}),n=Object.keys(e).filter(function(t){return!e[t].progress.uploadStarted&&!e[t].progress.preprocess&&!e[t].progress.postprocess}),r=Object.keys(e).filter(function(t){return e[t].progress.uploadComplete}),i=Object.keys(e).filter(function(t){return e[t].error}),s=Object.keys(e).filter(function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted&&!e[t].isPaused}),a=Object.keys(e).filter(function(t){return e[t].progress.preprocess||e[t].progress.postprocess}),l=[];s.forEach(function(t){l.push(e[t])});var u=Et(this.getTotalSpeed(l)),p=Qe(this.getTotalETA(l)),c=0,h=0;l.forEach(function(t){c+=t.progress.bytesTotal||0,h+=t.progress.bytesUploaded||0}),c=Et(c),h=Et(h);var d=o.length>0,f=100===t.totalProgress&&r.length===Object.keys(e).length&&0===a.length,y=d&&i.length===o.length,g=0===s.length&&!f&&!y&&o.length>0,m=this.uppy.getState().capabilities.resumableUploads||!1;return function(t){var e=function(t,e){if(t.isAllErrored)return"error";if(t.isAllComplete)return"complete";for(var o="waiting",n=Object.keys(e),r=0;r<n.length;r++){var i=e[n[r]].progress;if(i.uploadStarted&&!i.uploadComplete)return ze;i.preprocess&&o!==ze&&(o=Ne),i.postprocess&&o!==ze&&o!==Ne&&(o="postprocessing")}return o}(t=t||{},t.files||{}),o=t.totalProgress,n=void 0,r=void 0;if(e===Ne||"postprocessing"===e){var i=function(t){var e=[];Object.keys(t).forEach(function(o){var n=t[o].progress;n.preprocess&&e.push(n.preprocess),n.postprocess&&e.push(n.postprocess)});var o=e[0];return{mode:o.mode,message:o.message,value:e.filter(function(t){return"determinate"===t.mode}).reduce(function(t,e,o,n){return t+e.value/n.length},0)}}(t.files);"determinate"===(n=i.mode)&&(o=100*i.value),r=We(i)}else"complete"===e?r=Ve(t):e===ze?r=Xe(t):"error"===e&&(o=void 0,r=Ge(t));var s="number"==typeof o?o:100,a="waiting"===e&&t.hideUploadButton||"waiting"===e&&!t.newFiles>0||"complete"===e&&t.hideAfterFinish;return Me("div",{class:"uppy uppy-StatusBar is-"+e,"aria-hidden":a},Me("div",{class:"uppy-StatusBar-progress\n                           "+(n?"is-"+n:""),style:{width:s+"%"},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":o}),r,Me("div",{class:"uppy-StatusBar-actions"},t.newFiles&&!t.hideUploadButton?Me(qe,t):null,t.error?Me(He,t):null))}({error:t.error,totalProgress:t.totalProgress,totalSize:c,totalUploadedSize:h,uploadStartedFiles:o,isAllComplete:f,isAllPaused:g,isAllErrored:y,isUploadStarted:d,i18n:this.i18n,pauseAll:this.uppy.pauseAll,resumeAll:this.uppy.resumeAll,retryAll:this.uppy.retryAll,cancelAll:this.uppy.cancelAll,startUpload:this.uppy.upload,complete:r.length,newFiles:n.length,inProgress:o.length,totalSpeed:u,totalETA:p,files:t.files,resumableUploads:m,hideUploadButton:this.opts.hideUploadButton,hideAfterFinish:this.opts.hideAfterFinish})},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.unmount()},e}(ht),to=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},eo="undefined"==typeof Promise?ot.Promise:Promise,oo=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="thumbnail",r.id="ThumbnailGenerator",r.title="Thumbnail Generator",r.queue=[],r.queueProcessing=!1,r.opts=to({},{thumbnailWidth:200},n),r.addToQueue=r.addToQueue.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.createThumbnail=function(t,e){var o=this,n=URL.createObjectURL(t.data);return new eo(function(t,e){var o=new Image;o.src=n,o.onload=function(){URL.revokeObjectURL(n),t(o)},o.onerror=function(){URL.revokeObjectURL(n),e(new Error("Could not create thumbnail"))}}).then(function(t){var n=o.getProportionalHeight(t,e),r=o.resizeImage(t,e,n);return o.canvasToBlob(r,"image/png")}).then(function(t){return URL.createObjectURL(t)})},e.prototype.resizeImage=function(t,e,o){var n=t.width,r=t.height;if(o<t.height/2){var i=Math.floor(Math.log(t.width/e)/Math.log(2)),s=this.downScaleInSteps(t,i);t=s.image,n=s.sourceWidth,r=s.sourceHeight}var a=document.createElement("canvas");return a.width=e,a.height=o,a.getContext("2d").drawImage(t,0,0,n,r,0,0,e,o),a},e.prototype.downScaleInSteps=function(t,e){for(var o=t,n=o.width,r=o.height,i=0;i<e;i+=1){var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n/2,s.height=r/2,a.drawImage(o,0,0,n,r,0,0,n/2,r/2),n/=2,r/=2,o=s}return{image:o,sourceWidth:n,sourceHeight:r}},e.prototype.canvasToBlob=function(t,e,o){return t.toBlob?new eo(function(n){t.toBlob(n,e,o)}):eo.resolve().then(function(){return lt.dataURItoBlob(t.toDataURL(e,o),{})})},e.prototype.getProportionalHeight=function(t,e){var o=t.width/t.height;return Math.round(e/o)},e.prototype.setPreviewURL=function(t,e){var o,n=this.uppy.state.files;this.uppy.setState({files:to({},n,(o={},o[t]=to({},n[t],{preview:e}),o))})},e.prototype.addToQueue=function(t){this.queue.push(t),!1===this.queueProcessing&&this.processQueue()},e.prototype.processQueue=function(){var t=this;if(this.queueProcessing=!0,this.queue.length>0){var e=this.queue.shift();return this.requestThumbnail(e).catch(function(t){}).then(function(){return t.processQueue()})}this.queueProcessing=!1},e.prototype.requestThumbnail=function(t){var e=this;return lt.isPreviewSupported(t.type)&&!t.isRemote?this.createThumbnail(t,this.opts.thumbnailWidth).then(function(o){e.setPreviewURL(t.id,o)}).catch(function(t){console.warn(t.stack||t.message)}):eo.resolve()},e.prototype.install=function(){this.uppy.on("file-added",this.addToQueue)},e.prototype.uninstall=function(){this.uppy.off("file-added",this.addToQueue)},e}(ht),no=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ro=lt.findAllDOMElements,io=lt.toArray,so=Kt,ao=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],lo=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.id=r.opts.id||"Dashboard",r.title="Dashboard",r.type="orchestrator";var i={strings:{selectToUpload:"Select files to upload",closeModal:"Close Modal",upload:"Upload",importFrom:"Import files from",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",fileSource:"File source",done:"Done",localDisk:"Local Disk",myDevice:"My Device",dropPasteImport:"Drop files here, paste, import from one of the locations above or",dropPaste:"Drop files here, paste or",browse:"browse",fileProgress:"File progress: upload speed and ETA",numberOfSelectedFiles:"Number of selected files",uploadAllNewFiles:"Upload all new files",emptyFolderAdded:"No files were added from empty folder",folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}},s={target:"body",metaFields:[],trigger:"#uppy-select-files",inline:!1,width:750,height:550,thumbnailWidth:280,semiTransparent:!1,defaultTabIcon:so,showProgressDetails:!1,hideUploadButton:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,onRequestCloseModal:function(){return r.closeModal()},locale:i};return r.opts=no({},s,n),r.locale=no({},i,r.opts.locale),r.locale.strings=no({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.openModal=r.openModal.bind(r),r.closeModal=r.closeModal.bind(r),r.requestCloseModal=r.requestCloseModal.bind(r),r.isModalOpen=r.isModalOpen.bind(r),r.addTarget=r.addTarget.bind(r),r.hideAllPanels=r.hideAllPanels.bind(r),r.showPanel=r.showPanel.bind(r),r.getFocusableNodes=r.getFocusableNodes.bind(r),r.setFocusToFirstNode=r.setFocusToFirstNode.bind(r),r.maintainFocus=r.maintainFocus.bind(r),r.initEvents=r.initEvents.bind(r),r.onKeydown=r.onKeydown.bind(r),r.handleClickOutside=r.handleClickOutside.bind(r),r.handleFileCard=r.handleFileCard.bind(r),r.handleDrop=r.handleDrop.bind(r),r.handlePaste=r.handlePaste.bind(r),r.handleInputChange=r.handleInputChange.bind(r),r.updateDashboardElWidth=r.updateDashboardElWidth.bind(r),r.render=r.render.bind(r),r.install=r.install.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addTarget=function(t){var e=t.id||t.constructor.name,o=t.title||e,n=t.type;if("acquirer"===n||"progressindicator"===n||"presenter"===n){var r={id:e,name:o,type:n},i=this.getPluginState().targets.slice();return i.push(r),this.setPluginState({targets:i}),this.el}this.uppy.log("Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter")},e.prototype.hideAllPanels=function(){this.setPluginState({activePanel:!1})},e.prototype.showPanel=function(t){var e=this.getPluginState().targets.filter(function(e){return"acquirer"===e.type&&e.id===t})[0];this.setPluginState({activePanel:e})},e.prototype.requestCloseModal=function(){if(this.opts.onRequestCloseModal)return this.opts.onRequestCloseModal();this.closeModal()},e.prototype.getFocusableNodes=function(){var t=this.el.querySelectorAll(ao);return Object.keys(t).map(function(e){return t[e]})},e.prototype.setFocusToFirstNode=function(){var t=this.getFocusableNodes();t.length&&t[0].focus()},e.prototype.maintainFocus=function(t){var e=this.getFocusableNodes(),o=e.indexOf(document.activeElement);t.shiftKey&&0===o&&(e[e.length-1].focus(),t.preventDefault()),t.shiftKey||o!==e.length-1||(e[0].focus(),t.preventDefault())},e.prototype.openModal=function(){this.setPluginState({isHidden:!1}),this.savedScrollPosition=window.scrollY,this.savedActiveElement=document.activeElement,document.body.classList.add("uppy-Dashboard-isOpen"),document.body.style.top="-"+this.savedScrollPosition+"px",this.updateDashboardElWidth(),this.setFocusToFirstNode()},e.prototype.closeModal=function(){this.setPluginState({isHidden:!0}),document.body.classList.remove("uppy-Dashboard-isOpen"),this.savedActiveElement.focus(),window.scrollTo(0,this.savedScrollPosition)},e.prototype.isModalOpen=function(){return!this.getPluginState().isHidden||!1},e.prototype.onKeydown=function(t){27===t.keyCode&&this.requestCloseModal(t),9===t.keyCode&&this.maintainFocus(t)},e.prototype.handleClickOutside=function(){this.opts.closeModalOnClickOutside&&this.requestCloseModal()},e.prototype.handlePaste=function(t){var e=this;io(t.clipboardData.items).forEach(function(t){if("file"===t.kind){var o=t.getAsFile();if(!o)return e.uppy.log("[Dashboard] File pasted, but the file blob is empty"),void e.uppy.info("Error pasting file","error");e.uppy.log("[Dashboard] File pasted"),e.uppy.addFile({source:e.id,name:t.name,type:t.type,data:o})}})},e.prototype.handleInputChange=function(t){var e=this;t.preventDefault(),io(t.target.files).forEach(function(t){e.uppy.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.initEvents=function(){var t=this,e=ro(this.opts.trigger);!this.opts.inline&&e&&e.forEach(function(e){return e.addEventListener("click",t.openModal)}),this.opts.inline||e||this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options unless you are planning to call openModal() method yourself"),this.opts.inline||document.addEventListener("keydown",this.onKeydown),this.removeDragDropListener=Gt(this.el,function(e){t.handleDrop(e)}),this.uppy.on("dashboard:file-card",this.handleFileCard),this.updateDashboardElWidth(),window.addEventListener("resize",this.updateDashboardElWidth)},e.prototype.removeEvents=function(){var t=this,e=ro(this.opts.trigger);!this.opts.inline&&e&&e.forEach(function(e){return e.removeEventListener("click",t.openModal)}),this.opts.inline||document.removeEventListener("keydown",this.onKeydown),this.removeDragDropListener(),this.uppy.off("dashboard:file-card",this.handleFileCard),window.removeEventListener("resize",this.updateDashboardElWidth)},e.prototype.updateDashboardElWidth=function(){var t=this.el.querySelector(".uppy-Dashboard-inner");this.uppy.log("Dashboard width: "+t.offsetWidth),this.setPluginState({containerWidth:t.offsetWidth})},e.prototype.handleFileCard=function(t){this.setPluginState({fileCardFor:t||!1})},e.prototype.handleDrop=function(t){var e=this;this.uppy.log("[Dashboard] Files were dropped"),t.forEach(function(t){e.uppy.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.render=function(t){var e=this,o=this.getPluginState(),n=t.files,r=Object.keys(n).filter(function(t){return!n[t].progress.uploadStarted}),i=[];Object.keys(n).filter(function(t){return!n[t].progress.uploadComplete&&n[t].progress.uploadStarted&&!n[t].isPaused}).forEach(function(t){i.push(n[t])});var s=0,a=0;i.forEach(function(t){s+=t.progress.bytesTotal||0,a+=t.progress.bytesUploaded||0}),s=Et(s),a=Et(a);var l=function(t){var o=e.uppy.getPlugin(t.id);return no({},t,{icon:o.icon||e.opts.defaultTabIcon,render:o.render})},u=o.targets.filter(function(t){return"acquirer"===t.type&&function(t){var o=e.uppy.getPlugin(t.id);return"function"!=typeof o.isSupported||o.isSupported()}(t)}).map(l),p=o.targets.filter(function(t){return"progressindicator"===t.type}).map(l);return function(t){var e=Yt("uppy","uppy-Dashboard",{"Uppy--isTouchDevice":Ue()},{"uppy-Dashboard--semiTransparent":t.semiTransparent},{"uppy-Dashboard--modal":!t.inline},{"uppy-Dashboard--wide":t.isWide});return Fe("div",{class:e,"aria-hidden":t.inline?"false":t.modal.isHidden,"aria-label":t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"),onpaste:t.handlePaste},Fe("div",{class:"uppy-Dashboard-overlay",tabindex:"-1",onclick:t.handleClickOutside}),Fe("div",{class:"uppy-Dashboard-inner","aria-modal":!t.inline&&"true",role:!t.inline&&"dialog",style:{maxWidth:t.inline&&t.maxWidth?t.maxWidth:"",maxHeight:t.inline&&t.maxHeight?t.maxHeight:""}},Fe("button",{class:"uppy-Dashboard-close",type:"button","aria-label":t.i18n("closeModal"),title:t.i18n("closeModal"),onclick:t.closeModal},Ie()),Fe("div",{class:"uppy-Dashboard-innerWrap"},Fe(De,t),Fe(pe,t),Fe("div",{class:"uppy-Dashboard-filesContainer"},Fe(Oe,t)),Fe("div",{class:"uppy-DashboardContent-panel",role:"tabpanel",id:t.activePanel&&"uppy-DashboardContent-panel--"+t.activePanel.id,"aria-hidden":t.activePanel?"false":"true"},t.activePanel&&function(t){return Fe("div",{style:{width:"100%",height:"100%"}},Fe("div",{class:"uppy-DashboardContent-bar"},Fe("div",{class:"uppy-DashboardContent-title"},t.i18n("importFrom")," ",t.activePanel?t.activePanel.name:null),Fe("button",{class:"uppy-DashboardContent-back",type:"button",onclick:t.hideAllPanels},t.i18n("done"))),t.getPlugin(t.activePanel.id).render(t.state))}(t)),Fe("div",{class:"uppy-Dashboard-progressindicators"},t.progressindicators.map(function(e){return t.getPlugin(e.id).render(t.state)})))))}({state:t,modal:o,newFiles:r,files:n,totalFileCount:Object.keys(n).length,totalProgress:t.totalProgress,acquirers:u,activePanel:o.activePanel,getPlugin:this.uppy.getPlugin,progressindicators:p,autoProceed:this.uppy.opts.autoProceed,hideUploadButton:this.opts.hideUploadButton,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,showProgressDetails:this.opts.showProgressDetails,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,log:this.uppy.log,i18n:this.i18n,addFile:this.uppy.addFile,removeFile:this.uppy.removeFile,info:this.uppy.info,note:this.opts.note,metaFields:this.getPluginState().metaFields,resumableUploads:this.uppy.state.capabilities.resumableUploads||!1,startUpload:function(t){e.uppy.upload().catch(function(t){e.uppy.log(t.stack||t.message||t)})},pauseUpload:this.uppy.pauseResume,retryUpload:this.uppy.retryUpload,cancelUpload:function(t){e.uppy.emit("upload-cancel",t),e.uppy.removeFile(t)},fileCardFor:o.fileCardFor,showFileCard:function(t){e.uppy.emit("dashboard:file-card",t)},fileCardDone:function(t,o){e.uppy.setFileMeta(o,t),e.uppy.emit("dashboard:file-card")},updateDashboardElWidth:this.updateDashboardElWidth,maxWidth:this.opts.maxWidth,maxHeight:this.opts.maxHeight,currentWidth:o.containerWidth,isWide:o.containerWidth>400})},e.prototype.discoverProviderPlugins=function(){var t=this;this.uppy.iteratePlugins(function(e){e&&!e.target&&e.opts&&e.opts.target===t.constructor&&t.addTarget(e)})},e.prototype.install=function(){var t=this;this.setPluginState({isHidden:!0,showFileCard:!1,activePanel:!1,metaFields:this.opts.metaFields,targets:[]});var e=this.opts.target;e&&this.mount(e,this),(this.opts.plugins||[]).forEach(function(e){var o=t.uppy.getPlugin(e);o&&o.mount(t,o)}),this.opts.disableStatusBar||this.uppy.use(Ze,{target:this,hideUploadButton:this.opts.hideUploadButton,hideAfterFinish:this.opts.hideProgressAfterFinish}),this.opts.disableInformer||this.uppy.use(Be,{target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(oo,{thumbnailWidth:this.opts.thumbnailWidth}),this.discoverProviderPlugins(),this.initEvents()},e.prototype.uninstall=function(){var t=this;if(!this.opts.disableInformer){var e=this.uppy.getPlugin("Informer");e&&this.uppy.removePlugin(e)}if(!this.opts.disableStatusBar){var o=this.uppy.getPlugin("StatusBar");o&&this.uppy.removePlugin(o)}if(!this.opts.disableThumbnailGenerator){var n=this.uppy.getPlugin("ThumbnailGenerator");n&&this.uppy.removePlugin(n)}(this.opts.plugins||[]).forEach(function(e){var o=t.uppy.getPlugin(e);o&&o.unmount()}),this.unmount(),this.removeEvents()},e}(ht),uo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},po=lt.toArray,co=V.h,ho=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.type="acquirer",r.id=r.opts.id||"DragDrop",r.title="Drag & Drop";var i={strings:{dropHereOr:"Drop files here or",browse:"browse"}},s={target:null,width:"100%",height:"100%",note:"",locale:i};return r.opts=uo({},s,n),r.isDragDropSupported=r.checkDragDropSupport(),r.locale=uo({},i,r.opts.locale),r.locale.strings=uo({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.handleDrop=r.handleDrop.bind(r),r.handleBrowseClick=r.handleBrowseClick.bind(r),r.handleInputChange=r.handleInputChange.bind(r),r.checkDragDropSupport=r.checkDragDropSupport.bind(r),r.render=r.render.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.checkDragDropSupport=function(){var t=document.createElement("div");return"draggable"in t&&"ondragstart"in t&&"ondrop"in t&&"FormData"in window&&"FileReader"in window},e.prototype.handleDrop=function(t){var e=this;this.uppy.log("[DragDrop] Files dropped"),t.forEach(function(t){e.uppy.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.handleInputChange=function(t){var e=this;this.uppy.log("[DragDrop] Files selected through input"),po(t.target.files).forEach(function(t){e.uppy.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.handleBrowseClick=function(t){t.stopPropagation(),this.input.click()},e.prototype.render=function(t){var e=this,o="uppy uppy-DragDrop-container "+(this.isDragDropSupported?"is-dragdrop-supported":""),n={width:this.opts.width,height:this.opts.height};return co("div",{class:o,style:n},co("div",{class:"uppy-DragDrop-inner"},co("svg",{"aria-hidden":"true",class:"UppyIcon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},co("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0","fill-rule":"evenodd"})),co("input",{class:"uppy-DragDrop-input",type:"file",name:"files[]",multiple:"true",ref:function(t){e.input=t},onchange:this.handleInputChange}),co("label",{class:"uppy-DragDrop-label",onclick:this.handleBrowseClick},this.i18n("dropHereOr")," ",co("span",{class:"uppy-DragDrop-dragText"},this.i18n("browse"))),co("span",{class:"uppy-DragDrop-note"},this.opts.note)))},e.prototype.install=function(){var t=this,e=this.opts.target;e&&this.mount(e,this),this.removeDragDropListener=Gt(this.el,function(e){t.handleDrop(e),t.uppy.log(e)})},e.prototype.uninstall=function(){this.unmount(),this.removeDragDropListener()},e}(ht),fo=V.h,yo={folder:function(){return fo("svg",{"aria-hidden":"true",class:"UppyIcon",style:"width:16px;margin-right:3px",viewBox:"0 0 276.157 276.157"},fo("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))},file:function(){return fo("svg",{"aria-hidden":"true",class:"UppyIcon",width:"11",height:"14.5",viewBox:"0 0 44 58"},fo("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}};!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}})}function a(t){var e=new FileReader,o=s(e);return e.readAsArrayBuffer(t),o}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(d.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(d.arrayBuffer&&d.blob&&y(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!g(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,o=s(e);return e.readAsText(t),o}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),n=0;n<e.length;n++)o[n]=String.fromCharCode(e[n]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(c)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var o=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=function(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function c(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var o=t.split("="),n=o.shift().replace(/\+/g," "),r=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function h(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var d={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(d.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(t){return t&&DataView.prototype.isPrototypeOf(t)},g=ArrayBuffer.isView||function(t){return t&&f.indexOf(Object.prototype.toString.call(t))>-1};r.prototype.append=function(t,n){t=e(t),n=o(n);var r=this.map[t];this.map[t]=r?r+","+n:n},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,n){this.map[e(t)]=o(n)},r.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,o){t.push(o)}),n(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,o){t.push([o,e])}),n(t)},d.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},u.call(p.prototype),u.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];h.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=p,t.Response=h,t.fetch=function(t,e){return new Promise(function(o,n){var i=new p(t,e),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new r;return t.split(/\r?\n/).forEach(function(t){var o=t.split(":"),n=o.shift().trim();if(n){var r=o.join(":").trim();e.append(n,r)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;o(new h(e,t))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&d.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);var go=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},mo=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),vo=function(t){return t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(" ")},bo=function(){function t(e,o){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.uppy=e,this.opts=o,this.provider=o.provider,this.id=this.provider,this.authProvider=o.authProvider||this.provider,this.name=this.opts.name||vo(this.id),this.onReceiveResponse=this.onReceiveResponse.bind(this)}return t.prototype.onReceiveResponse=function(t){var e=this.uppy.state.uppyServer||{},o=this.opts.host,n=t.headers;if(n.has("i-am")&&n.get("i-am")!==e[o]){var r;this.uppy.setState({uppyServer:go({},e,(r={},r[o]=n.get("i-am"),r))})}return t},t.prototype.checkAuth=function(){return fetch(this.hostname+"/"+this.id+"/authorized",{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this.onReceiveResponse).then(function(t){return t.json().then(function(t){return t.authenticated})})},t.prototype.authUrl=function(){return this.hostname+"/"+this.id+"/connect"},t.prototype.fileUrl=function(t){return this.hostname+"/"+this.id+"/get/"+t},t.prototype.list=function(t){return fetch(this.hostname+"/"+this.id+"/list/"+(t||""),{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this.onReceiveResponse).then(function(t){return t.json()})},t.prototype.logout=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;return fetch(this.hostname+"/"+this.id+"/logout?redirect="+t,{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})},mo(t,[{key:"hostname",get:function(){var t=this.uppy.state.uppyServer||{},e=this.opts.host;return t[e]||e}}]),t}(),wo=V.h,So=function(t){return wo("div",{class:"uppy-Provider-loading"},wo("span",null,"Loading..."))},_o=V.h,Po=function(t){function e(){return function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.props.checkAuth()},e.prototype.render=function(){return _o("div",{style:"height: 100%;"},this.props.checkAuthInProgress?So():_o("div",{class:"uppy-Provider-auth"},_o("h1",{class:"uppy-Provider-authTitle"},"Please authenticate with ",_o("span",{class:"uppy-Provider-authTitleName"},this.props.pluginName),_o("br",null)," to select files"),_o("button",{type:"button",class:"uppy-Provider-authBtn",onclick:this.props.handleAuth},"Connect to ",this.props.pluginName),this.props.demo&&_o("button",{class:"uppy-Provider-authBtnDemo",onclick:this.props.handleDemoAuth},"Proceed with Demo Account")))},e}(V.Component),ko=V.h,xo=V.h,Eo=function(t){return xo("ul",{class:"uppy-Provider-breadcrumbs"},t.directories.map(function(e,o){return function(t){return ko("li",null,ko("button",{type:"button",onclick:t.getFolder},t.title))}({getFolder:function(){return t.getFolder(e.id)},title:0===o?t.title:e.title})}))},To=V.h,Oo=function(t){function e(o){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return n.handleKeyPress=n.handleKeyPress.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.input.focus()},e.prototype.handleKeyPress=function(t){if(13===t.keyCode)return t.stopPropagation(),void t.preventDefault();this.props.filterQuery(t)},e.prototype.render=function(){var t=this;return To("div",{style:{display:"flex",width:"100%"}},To("input",{class:"uppy-ProviderBrowser-searchInput",type:"text",placeholder:"Search",onkeyup:this.handleKeyPress,onkeydown:this.handleKeyPress,onkeypress:this.handleKeyPress,value:this.props.filterInput,ref:function(e){t.input=e}}),To("button",{class:"uppy-ProviderBrowser-searchClose",type:"button",onclick:this.props.toggleSearch},To("svg",{class:"UppyIcon",viewBox:"0 0 19 19"},To("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))},e}(V.Component),Ao=V.h,Co=function(t){var e=vt(),o=function(t){13===t.keyCode&&(t.stopPropagation(),t.preventDefault())};return Ao("tr",{class:"uppy-ProviderBrowserTable-row"},Ao("td",{class:"uppy-ProviderBrowserTable-column"},Ao("div",{class:"uppy-ProviderBrowserTable-checkbox"},Ao("input",{type:"checkbox",role:"option",tabindex:"0","aria-label":"Select "+t.title,id:e,checked:t.isChecked,disabled:t.isDisabled,onchange:t.handleCheckboxClick,onkeyup:o,onkeydown:o,onkeypress:o}),Ao("label",{for:e})),Ao("button",{type:"button",class:"uppy-ProviderBrowserTable-item","aria-label":"Select "+t.title,tabindex:"0",onclick:function(e){if(e.preventDefault(),"folder"===t.type)return t.handleClick(e);t.handleCheckboxClick(e)}},t.getItemIcon()," ",t.title)))},Do=V.h,Uo=V.h,Io=function(t){var e=t.folders,o=t.files;return""!==t.filterInput&&(e=t.filterItems(t.folders),o=t.filterItems(t.files)),Uo("div",{class:"uppy uppy-ProviderBrowser uppy-ProviderBrowser-viewType--"+t.viewType},Uo("header",{class:"uppy-ProviderBrowser-header"},Uo("div",{class:"uppy-ProviderBrowser-search","aria-hidden":!t.isSearchVisible},t.isSearchVisible&&Uo(Oo,t)),Uo("div",{class:"uppy-ProviderBrowser-headerBar"},Uo("button",{type:"button",class:"uppy-ProviderBrowser-searchToggle",onclick:t.toggleSearch},Uo("svg",{class:"UppyIcon",viewBox:"0 0 100 100"},Uo("path",{d:"M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z"}))),Eo({getFolder:t.getFolder,directories:t.directories,title:t.title}),Uo("button",{type:"button",onclick:t.logout,class:"uppy-ProviderBrowser-userLogout"},"Log out"))),Uo("div",{class:"uppy-ProviderBrowser-body"},function(t){return Do("table",{class:"uppy-ProviderBrowserTable",onscroll:t.handleScroll},Do("tbody",{role:"listbox","aria-label":"List of files from "+t.title},t.folders.map(function(e){var o=!1,n=t.isChecked(e);return n&&(o=n.loading),Co({title:t.getItemName(e),type:"folder",getItemIcon:function(){return t.getItemIcon(e)},handleClick:function(){return t.handleFolderClick(e)},isDisabled:o,isChecked:n,handleCheckboxClick:function(o){return t.toggleCheckbox(o,e)},columns:t.columns})}),t.files.map(function(e){return Co({title:t.getItemName(e),type:"file",getItemIcon:function(){return t.getItemIcon(e)},handleClick:function(){return t.handleFileClick(e)},isDisabled:!1,isChecked:t.isChecked(e),handleCheckboxClick:function(o){return t.toggleCheckbox(o,e)},columns:t.columns})})))}({columns:[{name:"Name",key:"title"}],folders:e,files:o,activeRow:t.isActiveRow,sortByTitle:t.sortByTitle,sortByDate:t.sortByDate,handleFileClick:t.addFile,handleFolderClick:t.getNextFolder,isChecked:t.isChecked,toggleCheckbox:t.toggleCheckbox,getItemName:t.getItemName,getItemIcon:t.getItemIcon,handleScroll:t.handleScroll,title:t.title})),Uo("button",{class:"UppyButton--circular UppyButton--blue uppy-ProviderBrowser-doneBtn",type:"button","aria-label":"Done picking files",title:"Done picking files",onclick:t.done},Uo("svg",{"aria-hidden":"true",class:"UppyIcon",width:"13px",height:"9px",viewBox:"0 0 13 9"},Uo("polygon",{points:"5 7.293 1.354 3.647 0.646 4.354 5 8.707 12.354 1.354 11.646 0.647"}))))},Fo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},jo=V.h,Ro=function(){function t(e,o){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.plugin=e,this.Provider=e[e.id],this.opts=Fo({},{viewType:"list"},o),this.updateFolderState=this.updateFolderState.bind(this),this.addFile=this.addFile.bind(this),this.filterItems=this.filterItems.bind(this),this.filterQuery=this.filterQuery.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.checkAuth=this.checkAuth.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleDemoAuth=this.handleDemoAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.isActiveRow=this.isActiveRow.bind(this),this.isChecked=this.isChecked.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.plugin.uppy.on("file-removed",this.updateFolderState),this.render=this.render.bind(this)}return t.prototype.tearDown=function(){this.plugin.uppy.off("file-removed",this.updateFolderState)},t.prototype._updateFilesAndFolders=function(t,e,o){var n=this;this.plugin.getItemSubList(t).forEach(function(t){n.plugin.isFolder(t)?o.push(t):e.push(t)}),this.plugin.setPluginState({folders:o,files:e})},t.prototype.checkAuth=function(){var t=this;this.plugin.setPluginState({checkAuthInProgress:!0}),this.Provider.checkAuth().then(function(e){t.plugin.setPluginState({checkAuthInProgress:!1}),t.plugin.onAuth(e)}).catch(function(e){t.plugin.setPluginState({checkAuthInProgress:!1}),t.handleError(e)})},t.prototype.getFolder=function(t,e){var o=this;return this._loaderWrapper(this.Provider.list(t),function(n){var r=void 0,i=o.plugin.getPluginState(),s=i.directories.findIndex(function(e){return t===e.id});r=-1!==s?i.directories.slice(0,s+1):i.directories.concat([{id:t,title:e||o.plugin.getItemName(n)}]),o._updateFilesAndFolders(n,[],[]),o.plugin.setPluginState({directories:r})},this.handleError)},t.prototype.getNextFolder=function(t){var e=this.plugin.getItemRequestPath(t);this.getFolder(e,this.plugin.getItemName(t)),this.lastCheckbox=void 0},t.prototype.addFile=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={source:this.plugin.id,data:this.plugin.getItemData(t),name:this.plugin.getItemName(t)||this.plugin.getItemId(t),type:this.plugin.getMimeType(t),isRemote:!0,body:{fileId:this.plugin.getItemId(t)},remote:{host:this.plugin.opts.host,url:""+this.Provider.fileUrl(this.plugin.getItemRequestPath(t)),body:{fileId:this.plugin.getItemId(t)}}};lt.getFileType(n).then(function(r){r&&lt.isPreviewSupported(r)&&(n.preview=e.plugin.getItemThumbnailUrl(t)),e.plugin.uppy.log("Adding remote file"),e.plugin.uppy.addFile(n),o||e.donePicking()})},t.prototype.logout=function(){var t=this;this.Provider.logout(location.href).then(function(t){return t.json()}).then(function(e){if(e.ok){var o={authenticated:!1,files:[],folders:[],directories:[]};t.plugin.setPluginState(o)}}).catch(this.handleError)},t.prototype.filterQuery=function(t){var e=this.plugin.getPluginState();this.plugin.setPluginState(Fo({},e,{filterInput:t.target.value}))},t.prototype.toggleSearch=function(t){var e=this.plugin.getPluginState();this.plugin.setPluginState({isSearchVisible:!e.isSearchVisible,filterInput:""})},t.prototype.filterItems=function(t){var e=this,o=this.plugin.getPluginState();return t.filter(function(t){return-1!==e.plugin.getItemName(t).toLowerCase().indexOf(o.filterInput.toLowerCase())})},t.prototype.sortByTitle=function(){var t=this,e=Fo({},this.plugin.getPluginState()),o=e.files,n=e.folders,r=e.sorting,i=o.sort(function(e,o){return"titleDescending"===r?t.plugin.getItemName(o).localeCompare(t.plugin.getItemName(e)):t.plugin.getItemName(e).localeCompare(t.plugin.getItemName(o))}),s=n.sort(function(e,o){return"titleDescending"===r?t.plugin.getItemName(o).localeCompare(t.plugin.getItemName(e)):t.plugin.getItemName(e).localeCompare(t.plugin.getItemName(o))});this.plugin.setPluginState(Fo({},e,{files:i,folders:s,sorting:"titleDescending"===r?"titleAscending":"titleDescending"}))},t.prototype.sortByDate=function(){var t=this,e=Fo({},this.plugin.getPluginState()),o=e.files,n=e.folders,r=e.sorting,i=o.sort(function(e,o){var n=new Date(t.plugin.getItemModifiedDate(e)),i=new Date(t.plugin.getItemModifiedDate(o));return"dateDescending"===r?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0}),s=n.sort(function(e,o){var n=new Date(t.plugin.getItemModifiedDate(e)),i=new Date(t.plugin.getItemModifiedDate(o));return"dateDescending"===r?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0});this.plugin.setPluginState(Fo({},e,{files:i,folders:s,sorting:"dateDescending"===r?"dateAscending":"dateDescending"}))},t.prototype.sortBySize=function(){var t=this,e=Fo({},this.plugin.getPluginState()),o=e.files,n=e.sorting;if(o.length&&this.plugin.getItemData(o[0]).size){var r=o.sort(function(e,o){var r=t.plugin.getItemData(e).size,i=t.plugin.getItemData(o).size;return"sizeDescending"===n?r>i?-1:r<i?1:0:r>i?1:r<i?-1:0});this.plugin.setPluginState(Fo({},e,{files:r,sorting:"sizeDescending"===n?"sizeAscending":"sizeDescending"}))}},t.prototype.isActiveRow=function(t){return this.plugin.getPluginState().activeRow===this.plugin.getItemId(t)},t.prototype.isChecked=function(t){var e=this.providerFileToId(t);if(this.plugin.isFolder(t)){var o=this.plugin.getPluginState().selectedFolders||{};return e in o&&o[e]}return e in this.plugin.uppy.getState().files},t.prototype.addFolder=function(t){var e=this,o=this.providerFileToId(t),n=this.plugin.getPluginState(),r=n.selectedFolders||{};o in r&&r[o].loading||(r[o]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:r}),this.Provider.list(this.plugin.getItemRequestPath(t)).then(function(i){var s=[];e.plugin.getItemSubList(i).forEach(function(t){e.plugin.isFolder(t)||(e.addFile(t,!0),s.push(e.providerFileToId(t)))}),(n=e.plugin.getPluginState()).selectedFolders[o]={loading:!1,files:s},e.plugin.setPluginState({selectedFolders:r});var a=e.plugin.uppy.getPlugin("Dashboard"),l=void 0;l=s.length?a.i18n("folderAdded",{smart_count:s.length,folder:e.plugin.getItemName(t)}):a.i18n("emptyFolderAdded"),e.plugin.uppy.info(l)}).catch(function(t){delete(n=e.plugin.getPluginState()).selectedFolders[o],e.plugin.setPluginState({selectedFolders:n.selectedFolders}),e.handleError(t)}))},t.prototype.removeFolder=function(t){var e=this.plugin.getPluginState().selectedFolders||{};if(t in e){var o=e[t];if(!o.loading){var n=o.files.concat([]),r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var a=s;a in this.plugin.uppy.getState().files&&this.plugin.uppy.removeFile(a)}delete e[t],this.plugin.setPluginState({selectedFolders:e})}}},t.prototype.updateFolderState=function(t){var e=this.plugin.getPluginState().selectedFolders||{};for(var o in e){var n=e[o];if(!n.loading){var r=n.files.indexOf(t);r>-1&&n.files.splice(r,1),n.files.length||delete e[o]}}this.plugin.setPluginState({selectedFolders:e})},t.prototype.toggleCheckbox=function(t,e){t.stopPropagation(),t.preventDefault();var o=this.plugin.getPluginState(),n=o.folders,r=o.files,i=o.filterInput,s=n.concat(r);""!==i&&(s=this.filterItems(s));var a=[e];if(this.lastCheckbox&&t.shiftKey){var l=s.indexOf(this.lastCheckbox),u=s.indexOf(e);a=l<u?s.slice(l,u+1):s.slice(u,l+1)}if(this.lastCheckbox=e,this.isChecked(e)){var p=a,c=Array.isArray(p),h=0;for(p=c?p:p[Symbol.iterator]();;){var d;if(c){if(h>=p.length)break;d=p[h++]}else{if((h=p.next()).done)break;d=h.value}var f=d,y=this.providerFileToId(f);this.plugin.isFolder(f)?this.removeFolder(y):y in this.plugin.uppy.getState().files&&this.plugin.uppy.removeFile(y)}}else{var g=a,m=Array.isArray(g),v=0;for(g=m?g:g[Symbol.iterator]();;){var b;if(m){if(v>=g.length)break;b=g[v++]}else{if((v=g.next()).done)break;b=v.value}var w=b;this.plugin.isFolder(w)?this.addFolder(w):this.addFile(w,!0)}}},t.prototype.providerFileToId=function(t){return lt.generateFileID({data:this.plugin.getItemData(t),name:this.plugin.getItemName(t)||this.plugin.getItemId(t),type:this.plugin.getMimeType(t)})},t.prototype.handleDemoAuth=function(){var t=this.plugin.getPluginState();this.plugin.setPluginState({},t,{authenticated:!0})},t.prototype.handleAuth=function(){var t=this,e=Math.floor(999999*Math.random())+1,o=location.href+(location.search?"&":"?")+"id="+e,n=btoa(JSON.stringify({redirect:o})),r=this.Provider.authUrl()+"?state="+n,i=window.open(r,"_blank");!function e(){var n=void 0;try{n=i.location.href}catch(t){if(t instanceof DOMException||t instanceof TypeError)return setTimeout(e,100);throw t}n&&n.split("#")[0]===o?(i.close(),t._loaderWrapper(t.Provider.checkAuth(),t.plugin.onAuth,t.handleError)):setTimeout(e,100)}()},t.prototype.handleError=function(t){var e=this.plugin.uppy,o=e.i18n("uppyServerError");e.log(t.toString()),e.info({message:o,details:t.toString()},"error",5e3)},t.prototype.handleScroll=function(t){var e=this,o=t.target.scrollHeight-(t.target.scrollTop+t.target.offsetHeight),n=this.plugin.getNextPagePath?this.plugin.getNextPagePath():null;o<50&&n&&!this._isHandlingScroll&&(this.Provider.list(n).then(function(t){var o=e.plugin.getPluginState(),n=o.files,r=o.folders;e._updateFilesAndFolders(t,n,r)}).catch(this.handleError).then(function(){e._isHandlingScroll=!1}),this._isHandlingScroll=!0)},t.prototype.donePicking=function(){var t=this.plugin.uppy.getPlugin("Dashboard");t&&t.hideAllPanels()},t.prototype._loaderWrapper=function(t,e,o){var n=this;t.then(e).catch(o).then(function(){return n.plugin.setPluginState({loading:!1})}),this.plugin.setPluginState({loading:!0})},t.prototype.render=function(t){var e=this.plugin.getPluginState(),o=e.authenticated,n=e.checkAuthInProgress;if(e.loading)return So();if(!o)return jo(Po,{pluginName:this.plugin.title,demo:this.plugin.opts.demo,checkAuth:this.checkAuth,handleAuth:this.handleAuth,handleDemoAuth:this.handleDemoAuth,checkAuthInProgress:n});var r=Fo({},this.plugin.getPluginState(),{getNextFolder:this.getNextFolder,getFolder:this.getFolder,addFile:this.addFile,filterItems:this.filterItems,filterQuery:this.filterQuery,toggleSearch:this.toggleSearch,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,demo:this.plugin.opts.demo,isActiveRow:this.isActiveRow,isChecked:this.isChecked,toggleCheckbox:this.toggleCheckbox,getItemName:this.plugin.getItemName,getItemIcon:this.plugin.getItemIcon,handleScroll:this.handleScroll,done:this.donePicking,title:this.plugin.title,viewType:this.opts.viewType});return Io(r)},t}(),Bo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Mo=V.h,Lo=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="acquirer",r.id=r.opts.id||"Dropbox",r.title="Dropbox",r.icon=function(){return Mo("svg",{class:"UppyIcon",width:"128",height:"118",viewBox:"0 0 128 118"},Mo("path",{d:"M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z"}),Mo("path",{d:"M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z"}),Mo("path",{d:"M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z"}))},r[r.id]=new bo(o,{host:r.opts.host,provider:"dropbox"}),r.files=[],r.onAuth=r.onAuth.bind(r),r.render=r.render.bind(r),r.opts=Bo({},{},n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.install=function(){this.view=new Ro(this),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.view.getFolder()},e.prototype.isFolder=function(t){return"folder"===t[".tag"]},e.prototype.getItemData=function(t){return t},e.prototype.getItemIcon=function(t){return yo[t[".tag"]]()},e.prototype.getItemSubList=function(t){return t.entries},e.prototype.getItemName=function(t){return t.name||""},e.prototype.getMimeType=function(t){return null},e.prototype.getItemId=function(t){return t.id},e.prototype.getItemRequestPath=function(t){return encodeURIComponent(t.path_lower)},e.prototype.getItemModifiedDate=function(t){return t.server_modified},e.prototype.getItemThumbnailUrl=function(t){return this.opts.host+"/"+this.Dropbox.id+"/thumbnail/"+this.getItemRequestPath(t)},e.prototype.render=function(t){return this.view.render(t)},e}(ht),No=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},zo=V.h,qo=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="acquirer",r.id=r.opts.id||"Dummy",r.title="Mr. Plugin",r.opts=No({},{},n),r.strange=zo("h1",null,"this is strange 1"),r.render=r.render.bind(r),r.install=r.install.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addFakeFileJustToTest=function(){var t={source:"acceptance-test",name:"test-file",type:"image/svg+xml",data:new Blob(["data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+CiAgPGNpcmNsZSBjeD0iNjAiIGN5PSI2MCIgcj0iNTAiLz4KPC9zdmc+Cg=="],{type:"image/svg+xml"})};this.props.log("Adding fake file blob"),this.props.addFile(t)},e.prototype.render=function(t){var e=zo("h2",null,"this is strange 2");return zo("div",{class:"wow-this-works"},zo("input",{class:"UppyDummy-firstInput",type:"text",value:"hello"}),this.strange,e,t.dummy.text)},e.prototype.install=function(){var t=this;this.uppy.setState({dummy:{text:"123"}});var e=this.opts.target;e&&this.mount(e,this),setTimeout(function(){t.uppy.setState({dummy:{text:"!!!"}})},2e3)},e}(ht),Ho=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Wo=lt.toArray,Xo=V.h,Vo=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.id=r.opts.id||"FileInput",r.title="File Input",r.type="acquirer";var i={strings:{chooseFiles:"Choose files"}},s={target:null,allowMultipleFiles:!0,pretty:!0,inputName:"files[]",locale:i};return r.opts=Ho({},s,n),r.locale=Ho({},i,r.opts.locale),r.locale.strings=Ho({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.render=r.render.bind(r),r.handleInputChange=r.handleInputChange.bind(r),r.handleClick=r.handleClick.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleInputChange=function(t){var e=this;this.uppy.log("[FileInput] Something selected through input..."),Wo(t.target.files).forEach(function(t){e.uppy.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.handleClick=function(t){this.input.click()},e.prototype.render=function(t){var e=this;return Xo("div",{class:"uppy uppy-FileInput-container"},Xo("input",{class:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onchange:this.handleInputChange,multiple:this.opts.allowMultipleFiles,ref:function(t){e.input=t}}),this.opts.pretty&&Xo("button",{class:"uppy-FileInput-btn",type:"button",onclick:this.handleClick},this.i18n("chooseFiles")))},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.unmount()},e}(ht),Go={},Yo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};Go=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=Yo({provider:"ftp"},n);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,r))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.list=function(t){var e=new Headers({Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+this.opts.bearerToken}),o=new Request(this.opts.host+this.opts.getFilesUrl,{method:"get",headers:e});return fetch(o).then(this.onReceiveResponse).then(function(t){return t.json()})},e.prototype.checkAuth=function(){return this.list("").then(function(t){return"Error"!==t.Status})},e}(bo);var Jo=V.h,Ko=function(){return Jo("svg",{class:"UppyIcon",width:"16.000000pt",height:"16.000000pt",viewBox:"0 0 48.000000 48.000000",preserveAspectRatio:"xMidYMid meet"},Jo("g",{transform:"translate(0.000000,48.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},Jo("path",{d:"M20 240 c1 -202 3 -240 16 -240 12 0 14 38 14 240 0 208 -2 240 -15 240 -13 0 -15 -31 -15 -240z"}),Jo("path",{d:"M75 471 c-4 -8 32 -11 119 -11 l126 0 0 -50 0 -50 50 0 c28 0 50 5 50 10 0 6 -18 10 -40 10 l-40 0 0 42 0 42 43 -39 42 -40 -43 45 -42 45 -129 3 c-85 2 -131 0 -136 -7z"}),Jo("path",{d:"M398 437 l42 -43 0 -197 c0 -168 2 -197 15 -197 13 0 15 29 15 198 l0 198 -36 42 c-21 25 -44 42 -57 42 -18 0 -16 -6 21 -43z"}),Jo("path",{d:"M92 353 l2 -88 3 78 4 77 89 0 89 0 8 -42 c8 -43 9 -43 55 -46 44 -3 47 -5 51 -35 4 -31 4 -31 5 6 l2 37 -50 0 -50 0 0 50 0 50 -105 0 -105 0 2 -87z"}),Jo("path",{d:"M75 10 c8 -13 332 -13 340 0 4 7 -55 10 -170 10 -115 0 -174 -3 -170 -10z"})))},$o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Qo=Go,Zo=V.h,tn=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="acquirer",r.id="Ftp",r.title="Ftp",r.stateId="ftp",r.icon=function(){return Zo("svg",{class:"UppyIcon",width:"128",height:"118",viewBox:"0 0 128 118"},Zo("path",{d:"M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z"}),Zo("path",{d:"M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z"}),Zo("path",{d:"M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z"}))},r.initiated=!1,r[r.id]=new Qo(o,n),r.files=[],r.onAuth=r.onAuth.bind(r),r.render=r.render.bind(r),r.opts=$o({},{},n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.install=function(){this.view=new View(this),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1}),this.view.handleAuth=this.handleAuth.bind(this),this.view.getFolder=this.getFolder.bind(this),this.view.logout=this.logout.bind(this),this.view.addFile=this.addFile.bind(this);var t=this.opts.target;t&&this.mount(t,this)},e.prototype.handleAuth=function(){this.setPluginState({loading:!0}),this.getFolder()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.getFolder()},e.prototype.uninstall=function(){this.unmount()},e.prototype.isFolder=function(t){return t.is_dir},e.prototype.getItemData=function(t){return $o({},t,{size:t.file_size})},e.prototype.getItemIcon=function(t){return Ko},e.prototype.getItemSubList=function(t){return t.contents},e.prototype.getItemName=function(t){return t.file_name},e.prototype.getMimeType=function(t){return t.mime_type},e.prototype.getItemId=function(t){return t.rev},e.prototype.getItemRequestPath=function(t){return encodeURIComponent(this.getItemName(t))},e.prototype.getItemModifiedDate=function(t){return t.modified},e.prototype.getItemThumbnailUrl=function(t){return this.opts.fileThumb},e.prototype.getFolder=function(){var t=this;this.view._loaderWrapper(this.Ftp.list(""),function(e){if("Error"===e.Status)throw new Error(e.Message);var o=e.Data.Files,n=Array.isArray(o),r=0;for(o=n?o:o[Symbol.iterator]();;){var i;if(n){if(r>=o.length)break;i=o[r++]}else{if((r=o.next()).done)break;i=r.value}i.acquirer=t.id}t.setPluginState({files:e.Data.Files,authenticated:!0,loading:!1})},this.view.handleError)},e.prototype.addFile=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={source:this.id,data:this.getItemData(t),name:this.getItemName(t),preview:this.getItemThumbnailUrl(t),isRemote:!0,body:{fileId:this.getItemId(t)},remote:{host:this.opts.host,url:"",body:{fileId:this.getItemId(t)}}};this.uppy.log("Adding remote file"),this.uppy.addFile(n),o||this.view.donePicking(),setTimeout(function(t){var o=lt.generateFileID(t),n=e.setFileRemoteStatusToFalse(o);e.uppy.emitter.emit("upload-success",o,n,"")},1500,n)},e.prototype.setFileRemoteStatusToFalse=function(t){var e=$o({},this.uppy.getState().files),o=$o({},e[t],{isRemote:!1});return e[t]=o,this.uppy.setState({files:e}),o},e.prototype.logout=function(){this.setPluginState({authenticated:!1})},e.prototype.render=function(t){return this.initiated||(this.initiated=!0,this.handleAuth()),this.view.render(t)},e}(ht),en={},on=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},nn="undefined"==typeof Promise?ot.Promise:Promise,rn="undefined"!=typeof window&&(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB),sn=!!rn,an="uppy-blobs",ln="files",un=864e5,pn=3,cn=!1,hn=function(){function t(e){var o=this;!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.opts=on({dbName:an,storeName:"default",expires:un,maxFileSize:10485760,maxTotalSize:314572800},e),this.name=this.opts.storeName;var n=function(){return w(o.opts.dbName)};cn?this.ready=n():(cn=!0,this.ready=t.cleanup().then(n,n))}return t.prototype.key=function(t){return this.name+"!"+t},t.prototype.list=function(){var t=this;return this.ready.then(function(e){return S(e.transaction([ln],"readonly").objectStore(ln).index("store").getAll(IDBKeyRange.only(t.name)))}).then(function(t){var e={};return t.forEach(function(t){e[t.fileID]=t.data}),e})},t.prototype.get=function(t){var e=this;return this.ready.then(function(o){return S(o.transaction([ln],"readonly").objectStore(ln).get(e.key(t)))}).then(function(t){return{id:t.data.fileID,data:t.data.data}})},t.prototype.getSize=function(){var t=this;return this.ready.then(function(e){var o=e.transaction([ln],"readonly").objectStore(ln).index("store").openCursor(IDBKeyRange.only(t.name));return new nn(function(t,e){var n=0;o.onsuccess=function(e){var o=e.target.result;o?(n+=o.value.data.size,o.continue()):t(n)},o.onerror=function(){e(new Error("Could not retrieve stored blobs size"))}})})},t.prototype.put=function(t){var e=this;return t.data.size>this.opts.maxFileSize?nn.reject(new Error("File is too big to store.")):this.getSize().then(function(t){return t>e.opts.maxTotalSize?nn.reject(new Error("No space left")):e.ready}).then(function(o){return S(o.transaction([ln],"readwrite").objectStore(ln).add({id:e.key(t.id),fileID:t.id,store:e.name,expires:Date.now()+e.opts.expires,data:t.data}))})},t.prototype.delete=function(t){var e=this;return this.ready.then(function(o){return S(o.transaction([ln],"readwrite").objectStore(ln).delete(e.key(t)))})},t.cleanup=function(){return w(an).then(function(t){var e=t.transaction([ln],"readwrite").objectStore(ln).index("expires").openCursor(IDBKeyRange.upperBound(Date.now()));return new nn(function(o,n){e.onsuccess=function(e){var n=e.target.result;if(n){var r=n.value;console.log("[IndexedDBStore] Deleting record",r.fileID,"of size",Et(r.data.size),"- expired on",new Date(r.expires)),n.delete(),n.continue()}else o(t)},e.onerror=n})}).then(function(t){t.close()})},t}();hn.isSupported=sn,en=hn;var dn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},fn=!1,yn=function(){function t(e){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.opts=dn({expires:864e5},e),this.name="uppyState:"+e.storeName,fn||(fn=!0,t.cleanup())}return t.prototype.load=function(){var t=localStorage.getItem(this.name);if(!t)return null;var e=_(t);return e?e.metadata?e.metadata:(this.save(e),e):null},t.prototype.save=function(t){var e=Date.now()+this.opts.expires,o=JSON.stringify({metadata:t,expires:e});localStorage.setItem(this.name,o)},t.cleanup=function(){var t=function(){for(var t=[],e=0;e<localStorage.length;e++){var o=localStorage.key(e);/^uppyState:/.test(o)&&t.push(o.slice("uppyState:".length))}return t}(),e=Date.now();t.forEach(function(t){var o=localStorage.getItem("uppyState:"+t);if(!o)return null;var n=_(o);if(!n)return null;n.expires&&n.expires<e&&localStorage.removeItem("uppyState:"+t)})},t}(),gn={},mn="undefined"==typeof Promise?ot.Promise:Promise,vn="undefined"!=typeof navigator&&"serviceWorker"in navigator,bn=function(){function t(e){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.ready=new mn(function(t,e){vn?navigator.serviceWorker.controller?t():navigator.serviceWorker.addEventListener("controllerchange",function(){t()}):e(new Error("Unsupported"))}),this.name=e.storeName}return t.prototype.list=function(){var t=this,e={},o=new mn(function(t,o){e.resolve=t,e.reject=o});console.log("Loading stored blobs from Service Worker");var n=function o(n){if(n.data.store===t.name)switch(n.data.type){case"uppy/ALL_FILES":e.resolve(n.data.files),navigator.serviceWorker.removeEventListener("message",o)}};return this.ready.then(function(){navigator.serviceWorker.addEventListener("message",n),navigator.serviceWorker.controller.postMessage({type:"uppy/GET_FILES",store:t.name})}),o},t.prototype.put=function(t){var e=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/ADD_FILE",store:e.name,file:t})})},t.prototype.delete=function(t){var e=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/REMOVE_FILE",store:e.name,fileID:t})})},t}();bn.isSupported=vn,gn=bn;var wn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Sn="undefined"==typeof Promise?ot.Promise:Promise,_n=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="debugger",r.id="GoldenRetriever",r.title="Golden Retriever",r.opts=wn({},{expires:864e5,serviceWorker:!1},n),r.MetaDataStore=new yn({expires:r.opts.expires,storeName:o.getID()}),r.ServiceWorkerStore=null,r.opts.serviceWorker&&(r.ServiceWorkerStore=new gn({storeName:o.getID()})),r.IndexedDBStore=new en(wn({expires:r.opts.expires},n.indexedDB||{},{storeName:o.getID()})),r.saveFilesStateToLocalStorage=r.saveFilesStateToLocalStorage.bind(r),r.loadFilesStateFromLocalStorage=r.loadFilesStateFromLocalStorage.bind(r),r.loadFileBlobsFromServiceWorker=r.loadFileBlobsFromServiceWorker.bind(r),r.loadFileBlobsFromIndexedDB=r.loadFileBlobsFromIndexedDB.bind(r),r.onBlobsLoaded=r.onBlobsLoaded.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.loadFilesStateFromLocalStorage=function(){var t=this.MetaDataStore.load();t&&(this.uppy.log("[GoldenRetriever] Recovered some state from Local Storage"),this.uppy.setState({currentUploads:t.currentUploads||{},files:t.files||{}}),this.savedPluginData=t.pluginData)},e.prototype.getWaitingFiles=function(){var t=this,e={},o=this.uppy.state.files;return Object.keys(o).forEach(function(o){var n=t.uppy.getFile(o);n.progress&&n.progress.uploadStarted||(e[o]=n)}),e},e.prototype.getUploadingFiles=function(){var t=this,e={},o=this.uppy.state.currentUploads;return o&&Object.keys(o).forEach(function(n){o[n].fileIDs.forEach(function(o){e[o]=t.uppy.getFile(o)})}),e},e.prototype.saveFilesStateToLocalStorage=function(){var t=wn(this.getWaitingFiles(),this.getUploadingFiles()),e={};this.uppy.emit("restore:get-data",function(t){wn(e,t)}),this.MetaDataStore.save({currentUploads:this.uppy.state.currentUploads,files:t,pluginData:e})},e.prototype.loadFileBlobsFromServiceWorker=function(){var t=this;this.ServiceWorkerStore.list().then(function(e){var o=Object.keys(e).length;o===Object.keys(t.uppy.state.files).length?(t.uppy.log("[GoldenRetriever] Successfully recovered "+o+" blobs from Service Worker!"),t.uppy.info("Successfully recovered "+o+" files","success",3e3),t.onBlobsLoaded(e)):(t.uppy.log("[GoldenRetriever] Failed to recover blobs from Service Worker, trying IndexedDB now..."),t.loadFileBlobsFromIndexedDB())})},e.prototype.loadFileBlobsFromIndexedDB=function(){var t=this;this.IndexedDBStore.list().then(function(e){var o=Object.keys(e).length;if(o>0)return t.uppy.log("[GoldenRetriever] Successfully recovered "+o+" blobs from Indexed DB!"),t.uppy.info("Successfully recovered "+o+" files","success",3e3),t.onBlobsLoaded(e);t.uppy.log("[GoldenRetriever] Couldn\u2019t recover anything from IndexedDB :(")})},e.prototype.onBlobsLoaded=function(t){var e=this,o=[],n=wn({},this.uppy.state.files);Object.keys(t).forEach(function(r){var i=e.uppy.getFile(r);if(i){var s=t[r],a=wn({},i,{data:s,isRestored:!0});n[r]=a,e.uppy.generatePreview(a)}else o.push(r)}),this.uppy.setState({files:n}),this.uppy.emit("restored",this.savedPluginData),o.length&&this.deleteBlobs(o).then(function(){e.uppy.log("[GoldenRetriever] Cleaned up "+o.length+" old files")})},e.prototype.deleteBlobs=function(t){var e=this,o=[];return t.forEach(function(t){e.ServiceWorkerStore&&o.push(e.ServiceWorkerStore.delete(t)),e.IndexedDBStore&&o.push(e.IndexedDBStore.delete(t))}),Sn.all(o)},e.prototype.install=function(){var t=this;this.loadFilesStateFromLocalStorage(),Object.keys(this.uppy.state.files).length>0?this.ServiceWorkerStore?(this.uppy.log("[GoldenRetriever] Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.uppy.log("[GoldenRetriever] Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB()):(this.uppy.log("[GoldenRetriever] No files need to be loaded, only restoring processing state..."),this.onBlobsLoaded([])),this.uppy.on("file-added",function(e){e.isRemote||(t.ServiceWorkerStore&&t.ServiceWorkerStore.put(e).catch(function(e){t.uppy.log("[GoldenRetriever] Could not store file","error"),t.uppy.log(e)}),t.IndexedDBStore.put(e).catch(function(e){t.uppy.log("[GoldenRetriever] Could not store file","error"),t.uppy.log(e)}))}),this.uppy.on("file-removed",function(e){t.ServiceWorkerStore&&t.ServiceWorkerStore.delete(e),t.IndexedDBStore.delete(e)}),this.uppy.on("complete",function(e){var o=e.successful,n=o.map(function(t){return t.id});t.deleteBlobs(n).then(function(){t.uppy.log("[GoldenRetriever] Removed "+o.length+" files that finished uploading")})}),this.uppy.on("state-update",this.saveFilesStateToLocalStorage),this.uppy.on("restored",function(){var e=t.uppy.getState().currentUploads;e&&Object.keys(e).forEach(function(o){t.uppy.restore(o,e[o])})})},e}(ht),Pn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},kn=V.h,xn=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="acquirer",r.id=r.opts.id||"GoogleDrive",r.title="Google Drive",r.icon=function(){return kn("svg",{"aria-hidden":"true",class:"UppyIcon UppyModalTab-icon",width:"28",height:"28",viewBox:"0 0 16 16"},kn("path",{d:"M2.955 14.93l2.667-4.62H16l-2.667 4.62H2.955zm2.378-4.62l-2.666 4.62L0 10.31l5.19-8.99 2.666 4.62-2.523 4.37zm10.523-.25h-5.333l-5.19-8.99h5.334l5.19 8.99z"}))},r[r.id]=new bo(o,{host:r.opts.host,provider:"drive",authProvider:"google"}),r.files=[],r.onAuth=r.onAuth.bind(r),r.render=r.render.bind(r),r.opts=Pn({},{},n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.install=function(){this.view=new Ro(this),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.view.getFolder("root")},e.prototype.isFolder=function(t){return"application/vnd.google-apps.folder"===t.mimeType},e.prototype.getItemData=function(t){return Pn({},t,{size:parseFloat(t.fileSize)})},e.prototype.getItemIcon=function(t){return kn("img",{src:t.iconLink})},e.prototype.getItemSubList=function(t){var e=this;return t.items.filter(function(t){return e.isFolder(t)||!t.mimeType.startsWith("application/vnd.google")})},e.prototype.getItemName=function(t){return t.title?t.title:"/"},e.prototype.getMimeType=function(t){return t.mimeType},e.prototype.getItemId=function(t){return t.id},e.prototype.getItemRequestPath=function(t){return this.getItemId(t)},e.prototype.getItemModifiedDate=function(t){return t.modifiedByMeDate},e.prototype.getItemThumbnailUrl=function(t){return this.opts.host+"/"+this.GoogleDrive.id+"/thumbnail/"+this.getItemRequestPath(t)},e.prototype.render=function(t){return this.view.render(t)},e}(ht),En=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Tn=V.h,On=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="acquirer",r.id=r.opts.id||"Instagram",r.title="Instagram",r.icon=function(){return Tn("svg",{"aria-hidden":"true",class:"UppyIcon UppyModalTab-icon",width:"28",height:"28",viewBox:"0 0 512 512"},Tn("path",{d:"M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z"}),Tn("path",{d:"M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z"}),Tn("circle",{cx:"390.476",cy:"121.524",r:"30.23"}))},r[r.id]=new bo(o,{host:r.opts.host,provider:"instagram",authProvider:"instagram"}),r.files=[],r.onAuth=r.onAuth.bind(r),r.render=r.render.bind(r),r.opts=En({},{},n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.install=function(){this.view=new Ro(this,{viewType:"grid"}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.view.getFolder("recent")},e.prototype.isFolder=function(t){return!1},e.prototype.getItemData=function(t){return t},e.prototype.getItemIcon=function(t){return Tn("img",{width:"100",src:t.images.thumbnail.url})},e.prototype.getItemSubList=function(t){var e=[];return t.data.forEach(function(t){t.carousel_media?t.carousel_media.forEach(function(o,n){var r=t.id,i=t.created_time,s=En({},o,{id:r,created_time:i});s.carousel_id=n,e.push(s)}):e.push(t)}),e},e.prototype.getItemName=function(t){return""},e.prototype.getMimeType=function(t){return"video"===t.type?"video/mp4":"image/jpeg"},e.prototype.getItemId=function(t){return""+t.id+(t.carousel_id||"")},e.prototype.getItemRequestPath=function(t){var e=isNaN(t.carousel_id)?"":"?carousel_id="+t.carousel_id;return""+t.id+e},e.prototype.getItemModifiedDate=function(t){return t.created_time},e.prototype.getItemThumbnailUrl=function(t){return t.images.thumbnail.url},e.prototype.getNextPagePath=function(){var t=this.getPluginState().files;return"recent?max_id="+this.getItemId(t[t.length-1])},e.prototype.render=function(t){return this.view.render(t)},e}(ht),An=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Cn=V.h,Dn=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.id=r.opts.id||"ProgressBar",r.title="Progress Bar",r.type="progressindicator",r.opts=An({},{target:"body",replaceTargetContent:!1,fixed:!1,hideAfterFinish:!0},n),r.render=r.render.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t){var e=t.totalProgress||0,o=100===e&&this.opts.hideAfterFinish;return Cn("div",{class:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":o},Cn("div",{class:"uppy-ProgressBar-inner",style:{width:e+"%"}}),Cn("div",{class:"uppy-ProgressBar-percentage"},e))},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.unmount()},e}(ht),Un=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));if(r.type="state-sync",r.id="Redux",r.title="Redux Emitter",void 0===n.action)throw new Error("action option is not defined");if(void 0===n.dispatch)throw new Error("dispatch option is not defined");return r.opts=n,r.handleStateUpdate=r.handleStateUpdate.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleStateUpdate=function(t,e,o){this.opts.dispatch(this.opts.action(t,e,o))},e.prototype.install=function(){this.uppy.on("state-update",this.handleStateUpdate),this.handleStateUpdate({},this.uppy.state,this.uppy.state)},e.prototype.uninstall=function(){this.uppy.off("state-update",this.handleStateUpdate)},e}(ht),In=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Fn=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="debugger",r.id="ReduxDevTools",r.title="Redux DevTools",r.opts=In({},{},n),r.handleStateChange=r.handleStateChange.bind(r),r.initDevTools=r.initDevTools.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleStateChange=function(t,e,o){this.devTools.send("UPPY_STATE_UPDATE",e)},e.prototype.initDevTools=function(){var t=this;this.devTools=window.devToolsExtension.connect(),this.devToolsUnsubscribe=this.devTools.subscribe(function(e){if("DISPATCH"===e.type)switch(console.log(e.payload.type),e.payload.type){case"RESET":return void t.uppy.reset();case"IMPORT_STATE":var o=e.payload.nextLiftedState.computedStates;return t.uppy.state=In({},t.uppy.state,o[o.length-1].state),void t.uppy.updateAll(t.uppy.state);case"JUMP_TO_STATE":case"JUMP_TO_ACTION":t.uppy.store.state=In({},t.uppy.state,JSON.parse(e.state)),t.uppy.updateAll(t.uppy.state)}})},e.prototype.install=function(){this.withDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,this.withDevTools&&(this.initDevTools(),this.uppy.on("state-update",this.handleStateChange))},e.prototype.uninstall=function(){this.withDevTools&&(this.devToolsUnsubscribe(),this.uppy.off("state-update",this.handleStateUpdate))},e}(ht),jn="undefined"==typeof Promise?ot.Promise:Promise,Rn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.apiUrl="https://api2.transloadit.com",this.opts=e}return t.prototype.createAssembly=function(t){t.templateId;var e=t.params,o=t.fields,n=t.signature,r=t.expectedFiles,i=new FormData;return i.append("params","string"==typeof e?e:JSON.stringify(e)),n&&i.append("signature",n),Object.keys(o).forEach(function(t){i.append(t,o[t])}),i.append("num_expected_upload_files",r),fetch(this.apiUrl+"/assemblies",{method:"post",body:i}).then(function(t){return t.json()}).then(function(t){if(t.error){var e=new Error(t.message);throw e.code=t.error,e.status=t,e}return t})},t.prototype.reserveFile=function(t,e){var o=encodeURIComponent(e.size);return fetch(t.assembly_ssl_url+"/reserve_file?size="+o,{method:"post"}).then(function(t){return t.json()})},t.prototype.addFile=function(t,e){if(!e.uploadURL)return jn.reject(new Error("File does not have an `uploadURL`."));var o=encodeURIComponent(e.size),n=encodeURIComponent(e.uploadURL),r="size="+o+"&filename="+encodeURIComponent(e.name)+"&fieldname=file&s3Url="+n;return fetch(t.assembly_ssl_url+"/add_file?"+r,{method:"post"}).then(function(t){return t.json()})},t.prototype.getAssemblyStatus=function(t){return fetch(t).then(function(t){return t.json()})},t}(),Bn={};(Bn=Bn=k.debug=k.default=k).coerce=function(t){return t instanceof Error?t.stack||t.message:t},Bn.disable=function(){Bn.enable("")},Bn.enable=function(t){Bn.save(t),Bn.names=[],Bn.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),o=e.length,n=0;n<o;n++)e[n]&&("-"===(t=e[n].replace(/\*/g,".*?"))[0]?Bn.skips.push(new RegExp("^"+t.substr(1)+"$")):Bn.names.push(new RegExp("^"+t+"$")))},Bn.enabled=function(t){var e,o;for(e=0,o=Bn.skips.length;e<o;e++)if(Bn.skips[e].test(t))return!1;for(e=0,o=Bn.names.length;e<o;e++)if(Bn.names[e].test(t))return!0;return!1},Bn.humanize=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return 864e5*o;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*o;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===o&&!1===isNaN(t))return e.long?function(t){return P(t,864e5,"day")||P(t,36e5,"hour")||P(t,6e4,"minute")||P(t,1e3,"second")||t+" ms"}(t):function(t){return t>=864e5?Math.round(t/864e5)+"d":t>=36e5?Math.round(t/36e5)+"h":t>=6e4?Math.round(t/6e4)+"m":t>=1e3?Math.round(t/1e3)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))},Bn.names=[],Bn.skips=[],Bn.formatters={};var Mn,Ln={};(function(t){function e(){var e;try{e=Ln.storage.debug}catch(t){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(Ln=Ln=Bn).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},Ln.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+Ln.humanize(this.diff),e){var o="color: "+this.color;t.splice(1,0,o,"color: inherit");var n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(n++,"%c"===t&&(r=n))}),t.splice(r,0,o)}},Ln.save=function(t){try{null==t?Ln.storage.removeItem("debug"):Ln.storage.debug=t}catch(t){}},Ln.load=e,Ln.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},Ln.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),Ln.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],Ln.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},Ln.enable(e())}).call(this,K);var Nn={};Nn=x,x.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),o=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-o:t+o}return 0|Math.min(t,this.max)},x.prototype.reset=function(){this.attempts=0},x.prototype.setMin=function(t){this.ms=t},x.prototype.setMax=function(t){this.max=t},x.prototype.setJitter=function(t){this.jitter=t};var zn=[].slice,qn=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var o=zn.call(arguments,2);return function(){return e.apply(t,o.concat(zn.call(arguments)))}},Hn={exports:{}};Hn.exports=E,E.prototype.on=E.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},E.prototype.once=function(t,e){function o(){this.off(t,o),e.apply(this,arguments)}return o.fn=e,this.on(t,o),this},E.prototype.off=E.prototype.removeListener=E.prototype.removeAllListeners=E.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,r=0;r<o.length;r++)if((n=o[r])===e||n.fn===e){o.splice(r,1);break}return this},E.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),o=this._callbacks["$"+t];if(o)for(var n=0,r=(o=o.slice(0)).length;n<r;++n)o[n].apply(this,e);return this},E.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},E.prototype.hasListeners=function(t){return!!this.listeners(t).length},Hn=Hn.exports;var Wn=function(t,e,o){function n(t,i){if(n.count<=0)throw new Error("after called too many times");--n.count,t?(r=!0,e(t),e=o):0!==n.count||r||e(null,i)}var r=!1;return o=o||function(){},n.count=t,0===t?e():n},Xn=function(t,e,o){var n=t.byteLength;if(e=e||0,o=o||n,t.slice)return t.slice(e,o);if(e<0&&(e+=n),o<0&&(o+=n),o>n&&(o=n),e>=n||e>=o||0===n)return new ArrayBuffer(0);for(var r=new Uint8Array(t),i=new Uint8Array(o-e),s=e,a=0;s<o;s++,a++)i[a]=r[s];return i.buffer},Vn={};!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),o=0;o<t.length;o++)e[t.charCodeAt(o)]=o;Vn.encode=function(e){var o,n=new Uint8Array(e),r=n.length,i="";for(o=0;o<r;o+=3)i+=t[n[o]>>2],i+=t[(3&n[o])<<4|n[o+1]>>4],i+=t[(15&n[o+1])<<2|n[o+2]>>6],i+=t[63&n[o+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},Vn.decode=function(t){var o,n,r,i,s,a=.75*t.length,l=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var p=new ArrayBuffer(a),c=new Uint8Array(p);for(o=0;o<l;o+=4)n=e[t.charCodeAt(o)],r=e[t.charCodeAt(o+1)],i=e[t.charCodeAt(o+2)],s=e[t.charCodeAt(o+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&s;return p}}();var Gn={};(function(t){function e(t){for(var e=0;e<t.length;e++){var o=t[e];if(o.buffer instanceof ArrayBuffer){var n=o.buffer;if(o.byteLength!==n.byteLength){var r=new Uint8Array(o.byteLength);r.set(new Uint8Array(n,o.byteOffset,o.byteLength)),n=r.buffer}t[e]=n}}}var o=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),r=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),i=o&&o.prototype.append&&o.prototype.getBlob;Gn=n?r?t.Blob:function(t,o){return e(t),new Blob(t,o||{})}:i?function(t,n){n=n||{};var r=new o;e(t);for(var i=0;i<t.length;i++)r.append(t[i]);return n.type?r.getBlob(n.type):r.getBlob()}:void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Yn=Object.keys||function(t){var e=[],o=Object.prototype.hasOwnProperty;for(var n in t)o.call(t,n)&&e.push(n);return e},Jn={exports:{}};(function(t){!function(e){function o(t){for(var e,o,n=[],r=0,i=t.length;r<i;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<i?56320==(64512&(o=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&o)+65536):(n.push(e),r--):n.push(e);return n}function n(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function r(t,e){return f(t>>e&63|128)}function i(t,e){if(0==(4294967168&t))return f(t);var o="";return 0==(4294965248&t)?o=f(t>>6&31|192):0==(4294901760&t)?(n(t,e)||(t=65533),o=f(t>>12&15|224),o+=r(t,6)):0==(4292870144&t)&&(o=f(t>>18&7|240),o+=r(t,12),o+=r(t,6)),o+=f(63&t|128)}function s(){if(d>=h)throw Error("Invalid byte index");var t=255&c[d];if(d++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function a(t){var e,o,r,i,a;if(d>h)throw Error("Invalid byte index");if(d==h)return!1;if(e=255&c[d],d++,0==(128&e))return e;if(192==(224&e)){if(o=s(),(a=(31&e)<<6|o)>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if(o=s(),r=s(),(a=(15&e)<<12|o<<6|r)>=2048)return n(a,t)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=s(),r=s(),i=s(),(a=(7&e)<<18|o<<12|r<<6|i)>=65536&&a<=1114111))return a;throw Error("Invalid UTF-8 detected")}var l="object"==typeof Jn.exports&&Jn.exports,u=Jn&&Jn.exports==l&&Jn,p="object"==typeof t&&t;p.global!==p&&p.window!==p||(e=p);var c,h,d,f=String.fromCharCode,y={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=o(t),s=r.length,a=-1,l="";++a<s;)l+=i(r[a],n);return l},decode:function(t,e){var n=!1!==(e=e||{}).strict;c=o(t),h=c.length,d=0;for(var r,i=[];!1!==(r=a(n));)i.push(r);return function(t){for(var e,o=t.length,n=-1,r="";++n<o;)(e=t[n])>65535&&(r+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=f(e);return r}(i)}};if(l&&!l.nodeType)if(u)u.exports=y;else{var g={}.hasOwnProperty;for(var m in y)g.call(y,m)&&(l[m]=y[m])}else e.utf8=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),Jn=Jn.exports;var Kn={}.toString,$n=Array.isArray||function(t){return"[object Array]"==Kn.call(t)},Qn={};(function(t){function e(o){if(!o||"object"!=typeof o)return!1;if($n(o)){for(var i=0,s=o.length;i<s;i++)if(e(o[i]))return!0;return!1}if("function"==typeof t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(o)||"function"==typeof t.ArrayBuffer&&o instanceof ArrayBuffer||n&&o instanceof Blob||r&&o instanceof File)return!0;if(o.toJSON&&"function"==typeof o.toJSON&&1===arguments.length)return e(o.toJSON(),!0);for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)&&e(o[a]))return!0;return!1}var o=Object.prototype.toString,n="function"==typeof t.Blob||"[object BlobConstructor]"===o.call(t.Blob),r="function"==typeof t.File||"[object FileConstructor]"===o.call(t.File);Qn=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Zn={};(function(t){function e(t,e,o){for(var n=new Array(t.length),r=Wn(t.length,o),i=function(t,o,r){e(o,function(e,o){n[t]=o,r(e,n)})},s=0;s<t.length;s++)i(s,t[s],r)}var o;t&&t.ArrayBuffer&&(o=Vn);var n="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),r="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),i=n||r;Zn.protocol=3;var s=Zn.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},a=Yn(s),l={type:"error",data:"parser error"};Zn.encodePacket=function(e,o,n,r){"function"==typeof o&&(r=o,o=!1),"function"==typeof n&&(r=n,n=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,e,n){if(!o)return Zn.encodeBase64Packet(t,n);var r=t.data,i=new Uint8Array(r),a=new Uint8Array(1+r.byteLength);a[0]=s[t.type];for(var l=0;l<i.length;l++)a[l+1]=i[l];return n(a.buffer)}(e,0,r);if(Gn&&a instanceof t.Blob)return function(t,e,o){if(!e)return Zn.encodeBase64Packet(t,o);if(i)return function(t,e,o){if(!e)return Zn.encodeBase64Packet(t,o);var n=new FileReader;return n.onload=function(){t.data=n.result,Zn.encodePacket(t,e,!0,o)},n.readAsArrayBuffer(t.data)}(t,e,o);var n=new Uint8Array(1);return n[0]=s[t.type],o(new Gn([n.buffer,t.data]))}(e,o,r);if(a&&a.base64)return function(t,e){return r("b"+Zn.packets[t.type]+t.data.data)}(e);var l=s[e.type];return void 0!==e.data&&(l+=n?Jn.encode(String(e.data),{strict:!1}):String(e.data)),r(""+l)},Zn.encodeBase64Packet=function(e,o){var n="b"+Zn.packets[e.type];if(Gn&&e.data instanceof t.Blob){var r=new FileReader;return r.onload=function(){var t=r.result.split(",")[1];o(n+t)},r.readAsDataURL(e.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),l=0;l<s.length;l++)a[l]=s[l];i=String.fromCharCode.apply(null,a)}return n+=t.btoa(i),o(n)},Zn.decodePacket=function(t,e,o){if(void 0===t)return l;if("string"==typeof t){if("b"===t.charAt(0))return Zn.decodeBase64Packet(t.substr(1),e);if(o&&!1===(t=function(t){try{t=Jn.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return l;var n=t.charAt(0);return Number(n)==n&&a[n]?t.length>1?{type:a[n],data:t.substring(1)}:{type:a[n]}:l}n=new Uint8Array(t)[0];var r=Xn(t,1);return Gn&&"blob"===e&&(r=new Gn([r])),{type:a[n],data:r}},Zn.decodeBase64Packet=function(t,e){var n=a[t.charAt(0)];if(!o)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=o.decode(t.substr(1));return"blob"===e&&Gn&&(r=new Gn([r])),{type:n,data:r}},Zn.encodePayload=function(t,o,n){"function"==typeof o&&(n=o,o=null);var r=Qn(t);return o&&r?Gn&&!i?Zn.encodePayloadAsBlob(t,n):Zn.encodePayloadAsArrayBuffer(t,n):t.length?void e(t,function(t,e){Zn.encodePacket(t,!!r&&o,!1,function(t){e(null,function(t){return t.length+":"+t}(t))})},function(t,e){return n(e.join(""))}):n("0:")},Zn.decodePayload=function(t,e,o){if("string"!=typeof t)return Zn.decodePayloadAsBinary(t,e,o);"function"==typeof e&&(o=e,e=null);var n;if(""===t)return o(l,0,1);for(var r,i,s="",a=0,u=t.length;a<u;a++){var p=t.charAt(a);if(":"===p){if(""===s||s!=(r=Number(s)))return o(l,0,1);if(i=t.substr(a+1,r),s!=i.length)return o(l,0,1);if(i.length){if(n=Zn.decodePacket(i,e,!1),l.type===n.type&&l.data===n.data)return o(l,0,1);if(!1===o(n,a+r,u))return}a+=r,s=""}else s+=p}return""!==s?o(l,0,1):void 0},Zn.encodePayloadAsArrayBuffer=function(t,o){if(!t.length)return o(new ArrayBuffer(0));e(t,function(t,e){Zn.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,e){var n=e.reduce(function(t,e){var o;return o="string"==typeof e?e.length:e.byteLength,t+o.toString().length+o+2},0),r=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,o=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);o=n.buffer}r[i++]=e?0:1;var a=o.byteLength.toString();for(s=0;s<a.length;s++)r[i++]=parseInt(a[s]);for(r[i++]=255,n=new Uint8Array(o),s=0;s<n.length;s++)r[i++]=n[s]}),o(r.buffer)})},Zn.encodePayloadAsBlob=function(t,o){e(t,function(t,e){Zn.encodePacket(t,!0,!0,function(t){var o=new Uint8Array(1);if(o[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);t=n.buffer,o[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(i.length+1);for(r=0;r<i.length;r++)s[r]=parseInt(i[r]);if(s[i.length]=255,Gn){var a=new Gn([o.buffer,s.buffer,t]);e(null,a)}})},function(t,e){return o(new Gn(e))})},Zn.decodePayloadAsBinary=function(t,e,o){"function"==typeof e&&(o=e,e=null);for(var n=t,r=[];n.byteLength>0;){for(var i=new Uint8Array(n),s=0===i[0],a="",u=1;255!==i[u];u++){if(a.length>310)return o(l,0,1);a+=i[u]}n=Xn(n,2+a.length),a=parseInt(a);var p=Xn(n,0,a);if(s)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(t){var c=new Uint8Array(p);for(p="",u=0;u<c.length;u++)p+=String.fromCharCode(c[u])}r.push(p),n=Xn(n,a)}var h=r.length;r.forEach(function(t,n){o(Zn.decodePacket(t,e,!0),n,h)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var tr={};tr=T,Hn(T.prototype),T.prototype.onError=function(t,e){var o=new Error(t);return o.type="TransportError",o.description=e,this.emit("error",o),this},T.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},T.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},T.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},T.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},T.prototype.onData=function(t){var e=Zn.decodePacket(t,this.socket.binaryType);this.onPacket(e)},T.prototype.onPacket=function(t){this.emit("packet",t)},T.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var er=function(t,e){var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t},or={};try{or="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){or=!1}var nr={};(function(t){nr=function(e){var o=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!o||or))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(t){}if(!o)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var rr={};rr.encode=function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length&&(e+="&"),e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e},rr.decode=function(t){for(var e={},o=t.split("&"),n=0,r=o.length;n<r;n++){var i=o[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e};for(var ir,sr={},ar="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),lr=64,ur={},pr=0,cr=0;cr<lr;cr++)ur[ar[cr]]=cr;A.encode=O,A.decode=function(t){var e=0;for(cr=0;cr<t.length;cr++)e=e*lr+ur[t.charAt(cr)];return e},sr=A;var hr=Ln("engine.io-client:polling"),dr=C,fr=null!=new nr({xdomain:!1}).responseType;er(C,tr),C.prototype.name="polling",C.prototype.doOpen=function(){this.poll()},C.prototype.pause=function(t){function e(){hr("paused"),o.readyState="paused",t()}var o=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(hr("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){hr("pre-pause polling complete"),--n||e()})),this.writable||(hr("we are currently writing - waiting to pause"),n++,this.once("drain",function(){hr("pre-pause writing complete"),--n||e()}))}else e()},C.prototype.poll=function(){hr("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},C.prototype.onData=function(t){var e=this;hr("polling got data %s",t),Zn.decodePayload(t,this.socket.binaryType,function(t,o,n){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():hr('ignoring poll - transport state "%s"',this.readyState))},C.prototype.doClose=function(){function t(){hr("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(hr("transport open - closing"),t()):(hr("transport not open - deferring close"),this.once("open",t))},C.prototype.write=function(t){var e=this;this.writable=!1;var o=function(){e.writable=!0,e.emit("drain")};Zn.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,o)})},C.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",o="";return!1!==this.timestampRequests&&(t[this.timestampParam]=sr()),this.supportsBinary||t.sid||(t.b64=1),t=rr.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(o=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t};var yr={};(function(t){function e(){}function o(o){dr.call(this,o),this.query=this.query||{},n||(t.___eio||(t.___eio=[]),n=t.___eio),this.index=n.length;var r=this;n.push(function(t){r.onData(t)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=e)},!1)}yr=o;var n,r=/\n/g,i=/\\n/g;er(o,dr),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),dr.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(e,o):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function o(){n(),e()}function n(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(t){s.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+s.iframeId+'">';a=document.createElement(t)}catch(t){(a=document.createElement("iframe")).name=s.iframeId,a.src="javascript:0"}a.id=s.iframeId,s.form.appendChild(a),s.iframe=a}var s=this;if(!this.form){var a,l=document.createElement("form"),u=document.createElement("textarea"),p=this.iframeId="eio_iframe_"+this.index;l.className="socketio",l.style.position="absolute",l.style.top="-1000px",l.style.left="-1000px",l.target=p,l.method="POST",l.setAttribute("accept-charset","utf-8"),u.name="d",l.appendChild(u),document.body.appendChild(l),this.form=l,this.area=u}this.form.action=this.uri(),n(),t=t.replace(i,"\\\n"),this.area.value=t.replace(r,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&o()}:this.iframe.onload=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var gr={};(function(t){function e(){}function o(e){if(dr.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,t.location){var o="https:"===location.protocol,n=location.port;n||(n=o?443:80),this.xd=e.hostname!==t.location.hostname||n!==e.port,this.xs=e.secure!==o}}function n(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function r(){for(var t in n.requests)n.requests.hasOwnProperty(t)&&n.requests[t].abort()}var i=Ln("engine.io-client:polling-xhr");(gr=o).Request=n,er(o,dr),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new n(t)},o.prototype.doWrite=function(t,e){var o="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:o}),r=this;n.on("success",e),n.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){i("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},Hn(n.prototype),n.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var o=this.xhr=new nr(e),r=this;try{i("xhr open %s: %s",this.method,this.uri),o.open(this.method,this.uri,this.async);try{if(this.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(var s in this.extraHeaders)this.extraHeaders.hasOwnProperty(s)&&o.setRequestHeader(s,this.extraHeaders[s])}}catch(t){}if("POST"===this.method)try{this.isBinary?o.setRequestHeader("Content-type","application/octet-stream"):o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{o.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in o&&(o.withCredentials=!0),this.requestTimeout&&(o.timeout=this.requestTimeout),this.hasXDR()?(o.onload=function(){r.onLoad()},o.onerror=function(){r.onError(o.responseText)}):o.onreadystatechange=function(){if(2===o.readyState){var t;try{t=o.getResponseHeader("Content-Type")}catch(t){}"application/octet-stream"===t&&(o.responseType="arraybuffer")}4===o.readyState&&(200===o.status||1223===o.status?r.onLoad():setTimeout(function(){r.onError(o.status)},0))},i("xhr data %s",this.data),o.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}t.document&&(this.index=n.requestsCount++,n.requests[this.index]=this)},n.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},n.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},n.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},n.prototype.cleanup=function(o){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,o)try{this.xhr.abort()}catch(t){}t.document&&delete n.requests[this.index],this.xhr=null}},n.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},n.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},n.prototype.abort=function(){this.cleanup()},n.requestsCount=0,n.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",r):t.addEventListener&&t.addEventListener("beforeunload",r,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var mr={};(function(t){function e(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=r&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(i=o),tr.call(this,t)}var o,n=Ln("engine.io-client:websocket"),r=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{o=J}catch(t){}var i=r;i||"undefined"!=typeof window||(i=o),mr=e,er(e,tr),e.prototype.name="websocket",e.prototype.supportsBinary=!0,e.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,o={agent:this.agent,perMessageDeflate:this.perMessageDeflate};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new i(t,e):new i(t):new i(t,e,o)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},e.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},e.prototype.write=function(e){var o=this;this.writable=!1;for(var r=e.length,i=0,s=r;i<s;i++)!function(e){Zn.encodePacket(e,o.supportsBinary,function(i){if(!o.usingBrowserWebSocket){var s={};e.options&&(s.compress=e.options.compress),o.perMessageDeflate&&("string"==typeof i?t.Buffer.byteLength(i):i.length)<o.perMessageDeflate.threshold&&(s.compress=!1)}try{o.usingBrowserWebSocket?o.ws.send(i):o.ws.send(i,s)}catch(t){n("websocket closed before onclose event")}--r||(o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0))})}(e[i])},e.prototype.onClose=function(){tr.prototype.onClose.call(this)},e.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},e.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",o="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(o=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=sr()),this.supportsBinary||(t.b64=1),(t=rr.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t},e.prototype.check=function(){return!(!i||"__initialize"in i&&this.name===e.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var vr={};(function(t){vr.polling=function(e){var o=!1,n=!1,r=!1!==e.jsonp;if(t.location){var i="https:"===location.protocol,s=location.port;s||(s=i?443:80),o=e.hostname!==location.hostname||s!==e.port,n=e.secure!==i}if(e.xdomain=o,e.xscheme=n,"open"in new nr(e)&&!e.forceJSONP)return new gr(e);if(!r)throw new Error("JSONP disabled");return new yr(e)},vr.websocket=mr}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var br=[].indexOf,wr=function(t,e){if(br)return t.indexOf(e);for(var o=0;o<t.length;++o)if(t[o]===e)return o;return-1},Sr=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Pr=function(t){var e=t,o=t.indexOf("["),n=t.indexOf("]");-1!=o&&-1!=n&&(t=t.substring(0,o)+t.substring(o,n).replace(/:/g,";")+t.substring(n,t.length));for(var r=Sr.exec(t||""),i={},s=14;s--;)i[_r[s]]=r[s]||"";return-1!=o&&-1!=n&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},kr={};(function(t){function e(o,n){if(!(this instanceof e))return new e(o,n);n=n||{},o&&"object"==typeof o&&(n=o,o=null),o?(o=Pr(o),n.hostname=o.host,n.secure="https"===o.protocol||"wss"===o.protocol,n.port=o.port,o.query&&(n.query=o.query)):n.host&&(n.hostname=Pr(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=rr.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var r="object"==typeof t&&t;r.global===r&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var o=Ln("engine.io-client:socket");kr=e,e.priorWebsocketSuccess=!1,Hn(e.prototype),e.protocol=Zn.protocol,e.Socket=e,e.Transport=tr,e.transports=vr,e.parser=Zn,e.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.query);e.EIO=Zn.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new vr[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},e.prototype.open=function(){var t;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var o=this;return void setTimeout(function(){o.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},e.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},e.prototype.probe=function(t){function n(){if(h.onlyBinaryUpgrades){var n=!this.supportsBinary&&h.transport.supportsBinary;c=c||n}c||(o('probe transport "%s" opened',t),p.send([{type:"ping",data:"probe"}]),p.once("packet",function(n){if(!c)if("pong"===n.type&&"probe"===n.data){if(o('probe transport "%s" pong',t),h.upgrading=!0,h.emit("upgrading",p),!p)return;e.priorWebsocketSuccess="websocket"===p.name,o('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){c||"closed"!==h.readyState&&(o("changing transport and sending upgrade packet"),u(),h.setTransport(p),p.send([{type:"upgrade"}]),h.emit("upgrade",p),p=null,h.upgrading=!1,h.flush())})}else{o('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=p.name,h.emit("upgradeError",r)}}))}function r(){c||(c=!0,u(),p.close(),p=null)}function i(e){var n=new Error("probe error: "+e);n.transport=p.name,r(),o('probe transport "%s" failed because of error: %s',t,e),h.emit("upgradeError",n)}function s(){i("transport closed")}function a(){i("socket closed")}function l(t){p&&t.name!==p.name&&(o('"%s" works - aborting "%s"',t.name,p.name),r())}function u(){p.removeListener("open",n),p.removeListener("error",i),p.removeListener("close",s),h.removeListener("close",a),h.removeListener("upgrading",l)}o('probing transport "%s"',t);var p=this.createTransport(t,{probe:1}),c=!1,h=this;e.priorWebsocketSuccess=!1,p.once("open",n),p.once("error",i),p.once("close",s),this.once("close",a),this.once("upgrading",l),p.open()},e.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,n=this.upgrades.length;t<n;t++)this.probe(this.upgrades[t])}},e.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},e.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},e.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},e.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},e.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(t,e,o){return this.sendPacket("message",t,e,o),this},e.prototype.sendPacket=function(t,e,o,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof o&&(n=o,o=null),"closing"!==this.readyState&&"closed"!==this.readyState){(o=o||{}).compress=!1!==o.compress;var r={type:t,data:e,options:o};this.emit("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}},e.prototype.close=function(){function t(){r.onClose("forced close"),o("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},e.prototype.onError=function(t){o("socket error %j",t),e.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},e.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},e.prototype.filterUpgrades=function(t){for(var e=[],o=0,n=t.length;o<n;o++)~wr(this.transports,t[o])&&e.push(t[o]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var xr={};(xr=kr).parser=Zn;var Er=function(t,e,o){return t.on(e,o),{destroy:function(){t.removeListener(e,o)}}},Tr={};(function(t){Tr=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Or={}.toString,Ar=Array.isArray||function(t){return"[object Array]"==Or.call(t)},Cr={};(function(t){function e(t,o){if(!t)return t;if(Tr(t)){var n={_placeholder:!0,num:o.length};return o.push(t),n}if(Ar(t)){for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=e(t[i],o);return r}if("object"==typeof t&&!(t instanceof Date)){r={};for(var s in t)r[s]=e(t[s],o);return r}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Ar(t))for(var n=0;n<t.length;n++)t[n]=o(t[n],e);else if("object"==typeof t)for(var r in t)t[r]=o(t[r],e);return t}var n=Object.prototype.toString,r="function"==typeof t.Blob||"[object BlobConstructor]"===n.call(t.Blob),i="function"==typeof t.File||"[object FileConstructor]"===n.call(t.File);Cr.deconstructPacket=function(t){var o=[],n=t.data,r=t;return r.data=e(n,o),r.attachments=o.length,{packet:r,buffers:o}},Cr.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},Cr.removeBlobs=function(t,e){function o(t,a,l){if(!t)return t;if(r&&t instanceof Blob||i&&t instanceof File){n++;var u=new FileReader;u.onload=function(){l?l[a]=this.result:s=this.result,--n||e(s)},u.readAsArrayBuffer(t)}else if(Ar(t))for(var p=0;p<t.length;p++)o(t[p],p,t);else if("object"==typeof t&&!Tr(t))for(var c in t)o(t[c],c,t)}var n=0,s=t;o(s),n||e(s)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Dr={},Ur=Ln("socket.io-parser");Dr.protocol=4,Dr.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],Dr.CONNECT=0,Dr.DISCONNECT=1,Dr.EVENT=2,Dr.ACK=3,Dr.ERROR=4,Dr.BINARY_EVENT=5,Dr.BINARY_ACK=6,Dr.Encoder=D,Dr.Decoder=I,D.prototype.encode=function(t,e){t.type!==Dr.EVENT&&t.type!==Dr.ACK||!Qn(t.data)||(t.type=t.type===Dr.EVENT?Dr.BINARY_EVENT:Dr.BINARY_ACK),Ur("encoding packet %j",t),Dr.BINARY_EVENT===t.type||Dr.BINARY_ACK===t.type?function(t,e){Cr.removeBlobs(t,function(t){var o=Cr.deconstructPacket(t),n=U(o.packet),r=o.buffers;r.unshift(n),e(r)})}(t,e):e([U(t)])},Hn(I.prototype),I.prototype.add=function(t){var e;if("string"==typeof t)e=function(t){var e=0,o={type:Number(t.charAt(0))};if(null==Dr.types[o.type])return j();if(Dr.BINARY_EVENT===o.type||Dr.BINARY_ACK===o.type){for(var n="";"-"!==t.charAt(++e)&&(n+=t.charAt(e),e!=t.length););if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");o.attachments=Number(n)}if("/"===t.charAt(e+1))for(o.nsp="";++e&&","!==(i=t.charAt(e))&&(o.nsp+=i,e!==t.length););else o.nsp="/";var r=t.charAt(e+1);if(""!==r&&Number(r)==r){for(o.id="";++e;){var i;if(null==(i=t.charAt(e))||Number(i)!=i){--e;break}if(o.id+=t.charAt(e),e===t.length)break}o.id=Number(o.id)}return t.charAt(++e)&&(o=function(t,e){try{t.data=JSON.parse(e)}catch(t){return j()}return t}(o,t.substr(e))),Ur("decoded %s as %j",t,o),o}(t),Dr.BINARY_EVENT===e.type||Dr.BINARY_ACK===e.type?(this.reconstructor=new F(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!Tr(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},I.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},F.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=Cr.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},F.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};var Ir=function(t,e){for(var o=[],n=(e=e||0)||0;n<t.length;n++)o[n-e]=t[n];return o},Fr={},jr=Ln("socket.io-client:socket");Fr=Fr=R;var Rr={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},Br=Hn.prototype.emit;Hn(R.prototype),R.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[Er(t,"open",qn(this,"onopen")),Er(t,"packet",qn(this,"onpacket")),Er(t,"close",qn(this,"onclose"))]}},R.prototype.open=R.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},R.prototype.send=function(){var t=Ir(arguments);return t.unshift("message"),this.emit.apply(this,t),this},R.prototype.emit=function(t){if(Rr.hasOwnProperty(t))return Br.apply(this,arguments),this;var e=Ir(arguments),o={type:Dr.EVENT,data:e};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(jr("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},R.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},R.prototype.onopen=function(){if(jr("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?rr.encode(this.query):this.query;jr("sending connect packet with query %s",t),this.packet({type:Dr.CONNECT,query:t})}else this.packet({type:Dr.CONNECT})},R.prototype.onclose=function(t){jr("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},R.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case Dr.CONNECT:this.onconnect();break;case Dr.EVENT:case Dr.BINARY_EVENT:this.onevent(t);break;case Dr.ACK:case Dr.BINARY_ACK:this.onack(t);break;case Dr.DISCONNECT:this.ondisconnect();break;case Dr.ERROR:this.emit("error",t.data)}},R.prototype.onevent=function(t){var e=t.data||[];jr("emitting event %j",e),null!=t.id&&(jr("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?Br.apply(this,e):this.receiveBuffer.push(e)},R.prototype.ack=function(t){var e=this,o=!1;return function(){if(!o){o=!0;var n=Ir(arguments);jr("sending ack %j",n),e.packet({type:Dr.ACK,id:t,data:n})}}},R.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(jr("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):jr("bad ack %s",t.id)},R.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},R.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)Br.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},R.prototype.ondisconnect=function(){jr("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},R.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},R.prototype.close=R.prototype.disconnect=function(){return this.connected&&(jr("performing disconnect (%s)",this.nsp),this.packet({type:Dr.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},R.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this};var Mr={},Lr=Ln("socket.io-client:manager"),Nr=Object.prototype.hasOwnProperty;Mr=B,B.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)Nr.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},B.prototype.updateSocketIds=function(){for(var t in this.nsps)Nr.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},B.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},Hn(B.prototype),B.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},B.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},B.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},B.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},B.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},B.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},B.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},B.prototype.open=B.prototype.connect=function(t,e){if(Lr("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Lr("opening %s",this.uri),this.engine=xr(this.uri,this.opts);var o=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=Er(o,"open",function(){n.onopen(),t&&t()}),i=Er(o,"error",function(e){if(Lr("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var o=new Error("Connection error");o.data=e,t(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;Lr("connect attempt will timeout after %d",s);var a=setTimeout(function(){Lr("connect attempt timed out after %d",s),r.destroy(),o.close(),o.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(i),this},B.prototype.onopen=function(){Lr("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(Er(t,"data",qn(this,"ondata"))),this.subs.push(Er(t,"ping",qn(this,"onping"))),this.subs.push(Er(t,"pong",qn(this,"onpong"))),this.subs.push(Er(t,"error",qn(this,"onerror"))),this.subs.push(Er(t,"close",qn(this,"onclose"))),this.subs.push(Er(this.decoder,"decoded",qn(this,"ondecoded")))},B.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},B.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},B.prototype.ondata=function(t){this.decoder.add(t)},B.prototype.ondecoded=function(t){this.emit("packet",t)},B.prototype.onerror=function(t){Lr("error",t),this.emitAll("error",t)},B.prototype.socket=function(t,e){function o(){~wr(r.connecting,n)||r.connecting.push(n)}var n=this.nsps[t];if(!n){n=new Fr(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(t)}),this.autoConnect&&o()}return n},B.prototype.destroy=function(t){var e=wr(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},B.prototype.packet=function(t){Lr("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(o){for(var n=0;n<o.length;n++)e.engine.write(o[n],t.options);e.encoding=!1,e.processPacketQueue()}))},B.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},B.prototype.cleanup=function(){Lr("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},B.prototype.close=B.prototype.disconnect=function(){Lr("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},B.prototype.onclose=function(t){Lr("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},B.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Lr("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();Lr("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var o=setTimeout(function(){t.skipReconnect||(Lr("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(Lr("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(Lr("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(o)}})}},B.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};var zr={};(function(t){var e=Ln("socket.io-client:url");zr=function(o,n){var r=o;n=n||t.location,null==o&&(o=n.protocol+"//"+n.host),"string"==typeof o&&("/"===o.charAt(0)&&(o="/"===o.charAt(1)?n.protocol+o:n.host+o),/^(https?|wss?):\/\//.test(o)||(e("protocol-less url %s",o),o=void 0!==n?n.protocol+"//"+o:"https://"+o),e("parse %s",o),r=Pr(o)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var qr={},Hr=Ln("socket.io-client"),Wr=(qr=qr=M).managers={};qr.protocol=Dr.protocol,qr.connect=M,qr.Manager=Mr,qr.Socket=Fr;var Xr={},Vr=Object.prototype.hasOwnProperty;Xr.stringify=function(t,e){var o=[];"string"!=typeof(e=e||"")&&(e="?");for(var n in t)Vr.call(t,n)&&o.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return o.length?e+o.join("&"):""},Xr.parse=function(t){for(var e,o=/([^=?&]+)=?([^&]*)/g,n={};e=o.exec(t);n[L(e[1])]=L(e[2]));return n};var Gr=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},Yr={};(function(t){"use strict";function e(e){var o,r={},s=typeof(e=e||t.location||{});if("blob:"===e.protocol)r=new n(unescape(e.pathname),{});else if("string"===s){r=new n(e,{});for(o in a)delete r[o]}else if("object"===s){for(o in e)o in a||(r[o]=e[o]);void 0===r.slashes&&(r.slashes=i.test(e.href))}return r}function o(t){var e=r.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function n(t,r,i){if(!(this instanceof n))return new n(t,r,i);var a,l,u,p,c,h,d=s.slice(),f=typeof r,y=0;for("object"!==f&&"string"!==f&&(i=r,r=null),i&&"function"!=typeof i&&(i=Xr.parse),r=e(r),a=!(l=o(t||"")).protocol&&!l.slashes,this.slashes=l.slashes||a&&r.slashes,this.protocol=l.protocol||r.protocol||"",t=l.rest,l.slashes||(d[2]=[/(.*)/,"pathname"]);y<d.length;y++)u=(p=d[y])[0],h=p[1],u!=u?this[h]=t:"string"==typeof u?~(c=t.indexOf(u))&&("number"==typeof p[2]?(this[h]=t.slice(0,c),t=t.slice(c+p[2])):(this[h]=t.slice(c),t=t.slice(0,c))):(c=u.exec(t))&&(this[h]=c[1],t=t.slice(0,c.index)),this[h]=this[h]||(a&&p[3]?r[h]||"":""),p[4]&&(this[h]=this[h].toLowerCase());i&&(this.query=i(this.query)),a&&r.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==r.pathname)&&(this.pathname=function(t,e){for(var o=(r.pathname||"/").split("/").slice(0,-1).concat(t.split("/")),n=o.length,i=o[n-1],s=!1,a=0;n--;)"."===o[n]?o.splice(n,1):".."===o[n]?(o.splice(n,1),a++):a&&(0===n&&(s=!0),o.splice(n,1),a--);return s&&o.unshift(""),"."!==i&&".."!==i||o.push(""),o.join("/")}(this.pathname)),Gr(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(p=this.auth.split(":"),this.username=p[0]||"",this.password=p[1]||""),this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],a={hash:1,query:1};n.prototype={set:function(t,e,o){switch(t){case"query":"string"==typeof e&&e.length&&(e=(o||Xr.parse)(e)),this[t]=e;break;case"port":this[t]=e,Gr(e,this.protocol)?e&&(this.host=this.hostname+":"+e):(this.host=this.hostname,this[t]="");break;case"hostname":this[t]=e,this.port&&(e+=":"+this.port),this.host=e;break;case"host":this[t]=e,/:\d+$/.test(e)?(e=e.split(":"),this.port=e.pop(),this.hostname=e.join(":")):(this.hostname=e,this.port="");break;case"protocol":this.protocol=e.toLowerCase(),this.slashes=!o;break;case"pathname":case"hash":if(e){var n="pathname"===t?"/":"#";this[t]=e.charAt(0)!==n?n+e:e}else this[t]=e;break;default:this[t]=e}for(var r=0;r<s.length;r++){var i=s[r];i[4]&&(this[i[1]]=this[i[1]].toLowerCase())}return this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},toString:function(t){t&&"function"==typeof t||(t=Xr.stringify);var e,o=this.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var n=o+(this.slashes?"//":"");return this.username&&(n+=this.username,this.password&&(n+=":"+this.password),n+="@"),n+=this.host+this.pathname,(e="object"==typeof this.query?t(this.query):this.query)&&(n+="?"!==e.charAt(0)?"?"+e:e),this.hash&&(n+=this.hash),n}},n.extractProtocol=o,n.location=e,n.qs=Xr,Yr=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Jr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Kr=function(){function t(e,o){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=xt();this.on=n.on.bind(n),this.off=n.off.bind(n),this.emit=n.emit.bind(n);var r=Yr(e);this.assembly=o,this.socket=qr.connect(r.origin,{path:r.pathname}),this.attachDefaultHandlers()}return t.prototype.attachDefaultHandlers=function(){var t=this;this.socket.on("connect",function(){t.socket.emit("assembly_connect",{id:t.assembly.assembly_id}),t.emit("connect")}),this.socket.on("assembly_finished",function(){t.emit("finished"),t.close()}),this.socket.on("assembly_upload_finished",function(e){t.emit("upload",e)}),this.socket.on("assembly_upload_meta_data_extracted",function(){t.emit("metadata")}),this.socket.on("assembly_result_finished",function(e,o){t.emit("result",e,o)}),this.socket.on("assembly_error",function(e){t.emit("error",Jr(new Error(e.message),e))})},t.prototype.close=function(){this.socket.disconnect()},t}(),$r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Qr="undefined"==typeof Promise?ot.Promise:Promise,Zr=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.type="uploader",r.id="Transloadit",r.title="Transloadit";var i={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create assembly",encoding:"Encoding..."}},s={waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:N,locale:i};return r.opts=$r({},s,n),r.locale=$r({},i,r.opts.locale),r.locale.strings=$r({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.prepareUpload=r.prepareUpload.bind(r),r.afterUpload=r.afterUpload.bind(r),r.onFileUploadURLAvailable=r.onFileUploadURLAvailable.bind(r),r.onRestored=r.onRestored.bind(r),r.getPersistentData=r.getPersistentData.bind(r),r.opts.params&&r.validateParams(r.opts.params),r.client=new Rn,r.sockets={},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.validateParams=function(t){if(!t)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof t)try{t=JSON.parse(t)}catch(t){throw t.message="Transloadit: The `params` option is a malformed JSON string: "+t.message,t}if(!t.auth||!t.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/accounts/credentials.")},e.prototype.getAssemblyOptions=function(t){var e=this,o=this.opts;return Qr.all(t.map(function(t){var n=e.uppy.getFile(t);return Qr.resolve().then(function(){return o.getAssemblyOptions(n,o)}).then(function(o){return e.validateParams(o.params),{fileIDs:[t],options:o}})}))},e.prototype.dedupeAssemblyOptions=function(t){var e=Object.create(null);return t.forEach(function(t){var o=t.fileIDs,n=t.options,r=JSON.stringify(n);if(e[r]){var i;(i=e[r].fileIDs).push.apply(i,o)}else e[r]={options:n,fileIDs:[].concat(o)}}),Object.keys(e).map(function(t){return e[t]})},e.prototype.createAssembly=function(t,e,o){var n=this,r=this.opts;return this.uppy.log("[Transloadit] create assembly"),this.client.createAssembly({params:o.params,fields:o.fields,expectedFiles:t.length,signature:o.signature}).then(function(o){var i,s,a=n.getPluginState(),l=a.uploadsAssemblies[e],u=$r({},a.uploadsAssemblies,(i={},i[e]=l.concat([o.assembly_id]),i));n.setPluginState({assemblies:$r(a.assemblies,(s={},s[o.assembly_id]=o,s)),uploadsAssemblies:u});var p=$r({},n.uppy.state.files);return t.forEach(function(t){p[t]=function(t,e){var o={assembly_url:e.assembly_url,filename:t.name,fieldname:"file"},n=$r({},t.meta,o),i=$r({},t.tus,{endpoint:e.tus_url,metaFields:Object.keys(o),uploadUrl:null,resume:!1}),s={assembly:e.assembly_id},a=$r({},t,{transloadit:s});return r.importFromUploadURLs||$r(a,{meta:n,tus:i}),a}(p[t],o)}),n.uppy.setState({files:p}),n.uppy.emit("transloadit:assembly-created",o,t),n.connectSocket(o).then(function(){return o})}).then(function(t){return n.uppy.log("[Transloadit] Created assembly"),t}).catch(function(t){throw n.uppy.info(n.i18n("creatingAssemblyFailed"),"error",0),t})},e.prototype.shouldWait=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},e.prototype.reserveFiles=function(t,e){var o=this;return Qr.all(e.map(function(e){var n=o.uppy.getFile(e);return o.client.reserveFile(t,n)}))},e.prototype.onFileUploadURLAvailable=function(t){var e=this,o=this.uppy.getFile(t);if(o&&o.transloadit&&o.transloadit.assembly){var n=this.getPluginState().assemblies[o.transloadit.assembly];this.client.addFile(n,o).catch(function(t){e.uppy.log(t),e.uppy.emit("transloadit:import-error",n,o.id,t)})}},e.prototype.findFile=function(t){var e=this.uppy.state.files;for(var o in e)if(e.hasOwnProperty(o)){if(e[o].uploadURL===t.tus_upload_url)return e[o];if(e[o].tus&&e[o].tus.uploadUrl===t.tus_upload_url)return e[o];if(!t.is_tus_file&&e[o].name===t.name&&e[o].size===t.size)return e[o]}},e.prototype.onFileUploadComplete=function(t,e){var o,n=this.getPluginState(),r=this.findFile(e);this.setPluginState({files:$r({},n.files,(o={},o[e.id]={assembly:t,id:r.id,uploadedFile:e},o))}),this.uppy.emit("transloadit:upload",e,this.getAssembly(t))},e.prototype.onResult=function(t,e,o){var n=this.getPluginState(),r=n.files[o.original_id];o.localId=r?r.id:null;var i={result:o,stepName:e,id:o.id,assembly:t};this.setPluginState({results:[].concat(n.results,[i])}),this.uppy.emit("transloadit:result",e,o,this.getAssembly(t))},e.prototype.onAssemblyFinished=function(t){var e=this;this.client.getAssemblyStatus(t).then(function(t){var o,n=e.getPluginState();e.setPluginState({assemblies:$r({},n.assemblies,(o={},o[t.assembly_id]=t,o))}),e.uppy.emit("transloadit:complete",t)})},e.prototype.getPersistentData=function(t){var e,o=this.getPluginState(),n=o.assemblies,r=o.uploadsAssemblies,i=Object.keys(o.files),s=o.results.map(function(t){return t.id});t((e={},e[this.id]={assemblies:n,uploadsAssemblies:r,uploads:i,results:s},e))},e.prototype.emitEventsDiff=function(t){var e=this,o=this.opts,n=this.getPluginState();!function(){var r=Object.keys(n.files).filter(function(e){return!t.files.hasOwnProperty(e)}).map(function(t){return n.files[t]}),i=n.results.filter(function(e){return!t.results.some(function(t){return t.id===e.id})});e.uppy.log("[Transloadit] New fully uploaded files since restore:"),e.uppy.log(r),r.forEach(function(t){var o=t.assembly,n=t.uploadedFile;e.uppy.log("[Transloadit]  emitting transloadit:upload "+n.id),e.uppy.emit("transloadit:upload",n,e.getAssembly(o))}),e.uppy.log("[Transloadit] New results since restore:"),e.uppy.log(i),i.forEach(function(t){var o=t.assembly,n=t.stepName,r=t.result,i=t.id;e.uppy.log("[Transloadit]  emitting transloadit:result "+n+", "+i),e.uppy.emit("transloadit:result",n,r,e.getAssembly(o))});var s=n.assemblies,a=t.assemblies;e.uppy.log("[Transloadit] Current assembly status after restore"),e.uppy.log(s),e.uppy.log("[Transloadit] Assembly status before restore"),e.uppy.log(a),Object.keys(s).forEach(function(t){!function(t,n){e.uppy.log("[Transloadit] Diff assemblies"),e.uppy.log(t),e.uppy.log(n),o.waitForEncoding&&"ASSEMBLY_COMPLETED"===n.ok&&"ASSEMBLY_COMPLETED"!==t.ok?(e.uppy.log("[Transloadit]  Emitting transloadit:complete for "+n.assembly_id),e.uppy.log(n),e.uppy.emit("transloadit:complete",n)):o.waitForMetadata&&n.upload_meta_data_extracted&&!t.upload_meta_data_extracted&&(e.uppy.log("[Transloadit]  Emitting transloadit:complete after metadata extraction for "+n.assembly_id),e.uppy.log(n),e.uppy.emit("transloadit:complete",n)),n.error&&!t.error&&(e.uppy.log("[Transloadit]  !!! Emitting transloadit:assembly-error for "+n.assembly_id),e.uppy.log(n),e.uppy.emit("transloadit:assembly-error",n,new Error(n.message)))}(a[t],s[t])})}()},e.prototype.onRestored=function(t){var e=this,o=t&&t[this.id]?t[this.id]:{},n=o.files||[],r=o.results||[],i=o.assemblies||{},s=o.uploadsAssemblies||{};0!==Object.keys(s).length&&(this.restored=Qr.resolve().then(function(){var t=[];return Object.keys(s).forEach(function(e){t.push.apply(t,s[e])}),Qr.all(t.map(function(t){var o="https://api2.transloadit.com/assemblies/"+t;return e.client.getAssemblyStatus(o)}))}).then(function(t){return function(o){var n={},r={},i=[];t.forEach(function(t){n[t.assembly_id]=t,t.uploads.forEach(function(o){var n=e.findFile(o);r[o.id]={id:n.id,assembly:t.assembly_id,uploadedFile:o}});var o=e.getPluginState();Object.keys(t.results).forEach(function(e){t.results[e].forEach(function(n){var r=o.files[n.original_id];n.localId=r?r.id:null,i.push({id:n.id,result:n,stepName:e,assembly:t.assembly_id})})})}),e.setPluginState({assemblies:n,files:r,results:i,uploadsAssemblies:s})}(),function(t){return Qr.all(t.map(function(t){return"ASSEMBLY_COMPLETE"===t.ok?null:e.connectSocket(t)}))}(t)}).then(function(){var t=e.getPluginState(),o={};return n.forEach(function(e){o[e]=t.files[e]}),function(){return e.emitEventsDiff({assemblies:i,files:o,results:t.results.filter(function(t){var e=t.id;return-1!==r.indexOf(e)}),uploadsAssemblies:s})}}),this.restored.then(function(){e.restored=null}))},e.prototype.connectSocket=function(t){var e=this,o=new Kr(t.websocket_url,t);return this.sockets[t.assembly_id]=o,o.on("upload",this.onFileUploadComplete.bind(this,t.assembly_id)),o.on("error",function(o){e.uppy.emit("transloadit:assembly-error",t,o)}),this.opts.waitForEncoding&&o.on("result",this.onResult.bind(this,t.assembly_id)),this.opts.waitForEncoding?o.on("finished",function(){e.onAssemblyFinished(t.assembly_ssl_url)}):this.opts.waitForMetadata&&o.on("metadata",function(){e.onAssemblyFinished(t.assembly_ssl_url)}),new Qr(function(t,e){o.on("connect",t),o.on("error",e)}).then(function(){e.uppy.log("[Transloadit] Socket is ready")})},e.prototype.prepareUpload=function(t,e){var o,n=this;(t=t.filter(function(t){return!t.error})).forEach(function(t){n.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:n.i18n("creatingAssembly")})});var r=function(t){var o=t.fileIDs,r=t.options;return n.createAssembly(o,e,r).then(function(t){if(n.opts.importFromUploadURLs)return n.reserveFiles(t,o)}).then(function(){o.forEach(function(t){n.uppy.emit("preprocess-complete",t)})})},i=this.getPluginState(),s=$r({},i.uploadsAssemblies,(o={},o[e]=[],o));this.setPluginState({uploadsAssemblies:s});var a=void 0;if(t.length>0)a=this.getAssemblyOptions(t).then(function(t){return n.dedupeAssemblyOptions(t)});else{if(!this.opts.alwaysRunAssembly)return Qr.resolve();a=Qr.resolve(this.opts.getAssemblyOptions(null,this.opts)).then(function(e){return n.validateParams(e.params),[{fileIDs:t,options:e}]})}return a.then(function(t){return Qr.all(t.map(r))})},e.prototype.afterUpload=function(t,e){var o=this;t=t.filter(function(t){return!t.error});var n=this.getPluginState();if(this.restored)return this.restored.then(function(n){var r=o.afterUpload(t,e);return n(),r});var r=n.uploadsAssemblies[e];if(!this.shouldWait())return r.forEach(function(t){o.sockets[t].close()}),Qr.resolve();if(0===r.length)return Qr.resolve();var i=0;return new Qr(function(e,n){t.forEach(function(t){o.uppy.emit("postprocess-progress",t,{mode:"indeterminate",message:o.i18n("encoding")})});var s=function(t){-1!==r.indexOf(t.assembly_id)?(o.uppy.log("[Transloadit] afterUpload(): Got assembly finish "+t.assembly_id),o.getAssemblyFiles(t.assembly_id).forEach(function(t){o.uppy.emit("postprocess-complete",t.id)}),u()):o.uppy.log("[Transloadit] afterUpload(): Ignoring finished assembly "+t.assembly_id)},a=function(t,e){-1!==r.indexOf(t.assembly_id)?(o.uppy.log("[Transloadit] afterUpload(): Got assembly error "+t.assembly_id),o.uppy.log(e),o.getAssemblyFiles(t.assembly_id).forEach(function(t){o.uppy.emit("upload-error",t.id,e),o.uppy.emit("postprocess-complete",t.id)}),u()):o.uppy.log("[Transloadit] afterUpload(): Ignoring errored assembly "+t.assembly_id)},l=function(t,e,o){-1!==r.indexOf(t.assembly_id)&&a(t,o)},u=function(){(i+=1)===r.length&&(p(),e())},p=function(){o.uppy.off("transloadit:complete",s),o.uppy.off("transloadit:assembly-error",a),o.uppy.off("transloadit:import-error",l)};o.uppy.on("transloadit:complete",s),o.uppy.on("transloadit:assembly-error",a),o.uppy.on("transloadit:import-error",l)}).then(function(){var t=o.getPluginState(),n=$r({},t.uploadsAssemblies);delete n[e],o.setPluginState({uploadsAssemblies:n})})},e.prototype.install=function(){this.uppy.addPreProcessor(this.prepareUpload),this.uppy.addPostProcessor(this.afterUpload),this.opts.importFromUploadURLs&&this.uppy.on("upload-success",this.onFileUploadURLAvailable),this.uppy.on("restore:get-data",this.getPersistentData),this.uppy.on("restored",this.onRestored),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]})},e.prototype.uninstall=function(){this.uppy.removePreProcessor(this.prepareUpload),this.uppy.removePostProcessor(this.afterUpload),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",this.onFileUploadURLAvailable)},e.prototype.getAssembly=function(t){return this.getPluginState().assemblies[t]},e.prototype.getAssemblyFiles=function(t){var e=this;return Object.keys(this.uppy.state.files).map(function(t){return e.uppy.getFile(t)}).filter(function(e){return e&&e.transloadit&&e.transloadit.assembly===t})},e}(ht),ti={};Object.defineProperty(ti,"__esModule",{value:!0}),ti.setItem=function(t,e){if(ei)return localStorage.setItem(t,e)},ti.getItem=function(t){if(ei)return localStorage.getItem(t)},ti.removeItem=function(t){if(ei)return localStorage.removeItem(t)};var ei=!1;try{ei="localStorage"in window;localStorage.setItem("tusSupport",localStorage.getItem("tusSupport"))}catch(t){if(t.code!==t.SECURITY_ERR&&t.code!==t.QUOTA_EXCEEDED_ERR)throw t;ei=!1}ti.canStoreURLs=ei;var oi=Object.prototype.hasOwnProperty,ni=Object.prototype.toString,ri=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===ni.call(t)},ii=function(t){if(!t||"[object Object]"!==ni.call(t))return!1;var e=oi.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&oi.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!o)return!1;var n;for(n in t);return void 0===n||oi.call(t,n)},si={};Object.defineProperty(si,"__esModule",{value:!0}),si.encode=function(t){return ai(unescape(encodeURIComponent(t)))};var ai=window.btoa;si.isSupported="btoa"in window;var li={};!function(t,e){"object"==typeof li?li=e():t.resolveUrl=e()}(this,function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(e,o.firstChild);for(var n,r=document.createElement("a"),i=1;i<t;i++)r.href=arguments[i],n=r.href,e.href=n;return o.removeChild(e),n}});var ui={};Object.defineProperty(ui,"__esModule",{value:!0}),ui.newRequest=function(){return new window.XMLHttpRequest},ui.resolveUrl=function(t,e){return(0,pi.default)(t,e)};var pi=function(t){return t&&t.__esModule?t:{default:t}}(li),ci={},hi=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();Object.defineProperty(ci,"__esModule",{value:!0}),ci.getSource=function(t){if("function"==typeof t.slice&&void 0!==t.size)return new di(t);throw new Error("source object may only be an instance of File or Blob in this environment")};var di=function(){function t(e){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this._file=e,this.size=e.size}return hi(t,[{key:"slice",value:function(t,e){return this._file.slice(t,e)}},{key:"close",value:function(){}}]),t}(),fi={};Object.defineProperty(fi,"__esModule",{value:!0});var yi=function(t){function e(t){var o=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Object.getPrototypeOf(e).call(this,t.message));r.originalRequest=n,r.causingError=o;var i=t.message;return null!=o&&(i+=", caused by "+o.toString()),null!=n&&(i+=", originated from request (response code: "+n.status+", response text: "+n.responseText+")"),r.message=i,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();fi.default=yi;var gi={};Object.defineProperty(gi,"__esModule",{value:!0}),gi.default=function(t){return["tus",t.name,t.type,t.size,t.lastModified].join("-")};var mi={},vi=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();Object.defineProperty(mi,"__esModule",{value:!0});var bi=q(gi),wi=q(fi),Si=q(function t(){var e,o,n,r,i,s,a=arguments[0],l=1,u=arguments.length,p=!1;for("boolean"==typeof a&&(p=a,a=arguments[1]||{},l=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});l<u;++l)if(null!=(e=arguments[l]))for(o in e)n=a[o],a!==(r=e[o])&&(p&&r&&(ii(r)||(i=ri(r)))?(i?(i=!1,s=n&&ri(n)?n:[]):s=n&&ii(n)?n:{},a[o]=t(p,s,r)):void 0!==r&&(a[o]=r));return a}),_i=z(si),Pi=z(ti),ki={endpoint:"",fingerprint:bi.default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},xi=function(){function t(e,o){!function(e,o){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.options=(0,Si.default)(!0,{},ki,o),this.file=e,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return vi(t,[{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint){var o=this._source=(0,ci.getSource)(e,this.options.chunkSize);if(null!=this.options.uploadSize){var n=+this.options.uploadSize;if(isNaN(n))throw new Error("tus: cannot convert `uploadSize` option into a number");this._size=n}else{if(null==(n=o.size))throw new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option");this._size=n}var r=this.options.retryDelays;if(null!=r){if("[object Array]"!==Object.prototype.toString.call(r))throw new Error("tus: the `retryDelays` option must either be an array or null");!function(){var e=t.options.onError;t.options.onError=function(o){t.options.onError=e,null!=t._offset&&t._offset>t._offsetBeforeRetry&&(t._retryAttempt=0);var n=!0;if("undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),t._retryAttempt<r.length&&null!=o.originalRequest&&!H(o.originalRequest.status,400)&&n){var i=r[t._retryAttempt++];t._offsetBeforeRetry=t._offset,t.options.uploadUrl=t.url,t._retryTimeout=setTimeout(function(){t.start()},i)}else t._emitError(o)}}()}if(this._aborted=!1,null==this.url){if(null!=this.options.uploadUrl)return this.url=this.options.uploadUrl,void this._resumeUpload();if(this.options.resume){this._fingerprint=this.options.fingerprint(e);var i=Pi.getItem(this._fingerprint);if(null!=i)return this.url=i,void this._resumeUpload()}this._createUpload()}else this._resumeUpload()}else this._emitError(new Error("tus: no endpoint provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"abort",value:function(){null!==this._xhr&&(this._xhr.abort(),this._source.close(),this._aborted=!0),null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null)}},{key:"_emitXhrError",value:function(t,e,o){this._emitError(new wi.default(e,o,t))}},{key:"_emitError",value:function(t){if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,o){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,o)}},{key:"_setupXHR",value:function(t){this._xhr=t,t.setRequestHeader("Tus-Resumable","1.0.0");var e=this.options.headers;for(var o in e)t.setRequestHeader(o,e[o]);t.withCredentials=this.options.withCredentials}},{key:"_createUpload",value:function(){var t=this,e=(0,ui.newRequest)();e.open("POST",this.options.endpoint,!0),e.onload=function(){if(H(e.status,200)){var o=e.getResponseHeader("Location");null!=o?(t.url=(0,ui.resolveUrl)(t.options.endpoint,o),t.options.resume&&Pi.setItem(t._fingerprint,t.url),t._offset=0,t._startUpload()):t._emitXhrError(e,new Error("tus: invalid or missing Location header"))}else t._emitXhrError(e,new Error("tus: unexpected response while creating upload"))},e.onerror=function(o){t._emitXhrError(e,new Error("tus: failed to create upload"),o)},this._setupXHR(e),e.setRequestHeader("Upload-Length",this._size);var o=function(t){if(!_i.isSupported)return"";var e=[];for(var o in t)e.push(o+" "+_i.encode(t[o]));return e.join(",")}(this.options.metadata);""!==o&&e.setRequestHeader("Upload-Metadata",o),e.send(null)}},{key:"_resumeUpload",value:function(){var t=this,e=(0,ui.newRequest)();e.open("HEAD",this.url,!0),e.onload=function(){if(!H(e.status,200))return t.options.resume&&H(e.status,400)&&Pi.removeItem(t._fingerprint),423===e.status?void t._emitXhrError(e,new Error("tus: upload is currently locked; retry later")):(t.url=null,void t._createUpload());var o=parseInt(e.getResponseHeader("Upload-Offset"),10);if(isNaN(o))t._emitXhrError(e,new Error("tus: invalid or missing offset value"));else{var n=parseInt(e.getResponseHeader("Upload-Length"),10);if(isNaN(n))t._emitXhrError(e,new Error("tus: invalid or missing length value"));else{if(o===n)return t._emitProgress(n,n),void t._emitSuccess();t._offset=o,t._startUpload()}}},e.onerror=function(o){t._emitXhrError(e,new Error("tus: failed to resume upload"),o)},this._setupXHR(e),e.send(null)}},{key:"_startUpload",value:function(){var t=this;if(!this._aborted){var e=(0,ui.newRequest)();this.options.overridePatchMethod?(e.open("POST",this.url,!0),e.setRequestHeader("X-HTTP-Method-Override","PATCH")):e.open("PATCH",this.url,!0),e.onload=function(){if(H(e.status,200)){var o=parseInt(e.getResponseHeader("Upload-Offset"),10);if(isNaN(o))t._emitXhrError(e,new Error("tus: invalid or missing offset value"));else{if(t._emitProgress(o,t._size),t._emitChunkComplete(o-t._offset,o,t._size),t._offset=o,o==t._size)return t._emitSuccess(),void t._source.close();t._startUpload()}}else t._emitXhrError(e,new Error("tus: unexpected response while uploading chunk"))},e.onerror=function(o){t._aborted||t._emitXhrError(e,new Error("tus: failed to upload chunk at offset "+t._offset),o)},"upload"in e&&(e.upload.onprogress=function(e){e.lengthComputable&&t._emitProgress(o+e.loaded,t._size)}),this._setupXHR(e),e.setRequestHeader("Upload-Offset",this._offset),e.setRequestHeader("Content-Type","application/offset+octet-stream");var o=this._offset,n=this._offset+this.options.chunkSize;(n===1/0||n>this._size)&&(n=this._size),e.send(this._source.slice(o,n)),this._emitProgress(this._offset,this._size)}}}]),t}();xi.defaultOptions=ki,mi.default=xi;var Ei=function(t){return t&&t.__esModule?t:{default:t}}(mi);Ei.default.defaultOptions;if("undefined"!=typeof window){var Ti=window,Oi=Ti.XMLHttpRequest,Ai=Ti.Blob;Oi&&Ai&&Ai.prototype.slice}else!0;var Ci={Upload:Ei.default},Di=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ui="undefined"==typeof Promise?ot.Promise:Promise,Ii=lt.emitSocketProgress,Fi=lt.getSocketHost,ji=lt.settle,Ri={endpoint:"",resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},Bi=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));return r.type="uploader",r.id="Tus",r.title="Tus",r.opts=Di({},{resume:!0,autoRetry:!0,retryDelays:[0,1e3,3e3,5e3]},n),r.uploaders=Object.create(null),r.uploaderEvents=Object.create(null),r.uploaderSockets=Object.create(null),r.handleResetProgress=r.handleResetProgress.bind(r),r.handleUpload=r.handleUpload.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleResetProgress=function(){var t=Di({},this.uppy.state.files);Object.keys(t).forEach(function(e){if(t[e].tus&&t[e].tus.uploadUrl){var o=Di({},t[e].tus);delete o.uploadUrl,t[e]=Di({},t[e],{tus:o})}}),this.uppy.setState({files:t})},e.prototype.resetUploaderReferences=function(t){this.uploaders[t]&&(this.uploaders[t].abort(),this.uploaders[t]=null),this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null),this.uploaderSockets[t]&&(this.uploaderSockets[t].close(),this.uploaderSockets[t]=null)},e.prototype.upload=function(t,e,o){var n=this;return this.resetUploaderReferences(t.id),new Ui(function(e,o){var r=Di({},Ri,n.opts,t.tus||{});r.onError=function(e){n.uppy.log(e),n.uppy.emit("upload-error",t.id,e),e.message="Failed because: "+e.message,n.resetUploaderReferences(t.id),o(e)},r.onProgress=function(e,o){n.onReceiveUploadUrl(t,i.url),n.uppy.emit("upload-progress",{uploader:n,id:t.id,bytesUploaded:e,bytesTotal:o})},r.onSuccess=function(){n.uppy.emit("upload-success",t.id,i,i.url),i.url&&n.uppy.log("Download "+i.file.name+" from "+i.url),n.resetUploaderReferences(t.id),e(i)},r.metadata=t.meta;var i=new Ci.Upload(t.data,r);n.uploaders[t.id]=i,n.uploaderEvents[t.id]=W(n.uppy),n.onFileRemove(t.id,function(o){n.resetUploaderReferences(t.id),e("upload "+o+" was removed")}),n.onPause(t.id,function(t){t?i.abort():i.start()}),n.onPauseAll(t.id,function(){i.abort()}),n.onCancelAll(t.id,function(){n.resetUploaderReferences(t.id)}),n.onResumeAll(t.id,function(){t.error&&i.abort(),i.start()}),t.isPaused||i.start(),t.isRestored||n.uppy.emit("upload-started",t.id,i)})},e.prototype.uploadRemote=function(t,e,o){var n=this;return this.resetUploaderReferences(t.id),new Ui(function(e,o){if(n.uppy.log(t.remote.url),t.serverToken)return n.connectToServerSocket(t).then(function(){return e()}).catch(o);var r=n.opts.endpoint;t.tus&&t.tus.endpoint&&(r=t.tus.endpoint),n.uppy.emit("upload-started",t.id),fetch(t.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Di({},t.remote.body,{endpoint:r,protocol:"tus",size:t.data.size,metadata:t.meta}))}).then(function(e){return e.status<200||e.status>300?o(e.statusText):e.json().then(function(e){return n.uppy.setFileState(t.id,{serverToken:e.token}),t=n.getFile(t.id)})}).then(function(t){return n.connectToServerSocket(t)}).then(function(){e()}).catch(function(t){o(new Error(t))})})},e.prototype.connectToServerSocket=function(t){var e=this;return new Ui(function(o,n){var r=t.serverToken,i=Fi(t.remote.host),s=new Ft({target:i+"/api/"+r});e.uploaderSockets[t.id]=s,e.uploaderEvents[t.id]=W(e.uppy),e.onFileRemove(t.id,function(){s.send("pause",{}),o("upload "+t.id+" was removed")}),e.onPause(t.id,function(t){t?s.send("pause",{}):s.send("resume",{})}),e.onPauseAll(t.id,function(){return s.send("pause",{})}),e.onCancelAll(t.id,function(){return s.send("pause",{})}),e.onResumeAll(t.id,function(){t.error&&s.send("pause",{}),s.send("resume",{})}),e.onRetry(t.id,function(){s.send("pause",{}),s.send("resume",{})}),e.onRetryAll(t.id,function(){s.send("pause",{}),s.send("resume",{})}),t.isPaused&&s.send("pause",{}),s.on("progress",function(o){return Ii(e,o,t)}),s.on("error",function(o){e.uppy.emit("upload-error",t.id,new Error(o.error)),n(new Error(o.error))}),s.on("success",function(n){e.uppy.emit("upload-success",t.id,n,n.url),e.resetUploaderReferences(t.id),o()})})},e.prototype.getFile=function(t){return this.uppy.state.files[t]},e.prototype.updateFile=function(t){var e,o=Di({},this.uppy.state.files,(e={},e[t.id]=t,e));this.uppy.setState({files:o})},e.prototype.onReceiveUploadUrl=function(t,e){var o=this.getFile(t.id);if(o&&(!o.tus||o.tus.uploadUrl!==e)&&this.opts.resume){this.uppy.log("[Tus] Storing upload url");var n=Di({},o,{tus:Di({},o.tus,{uploadUrl:e})});this.updateFile(n)}},e.prototype.onFileRemove=function(t,e){this.uploaderEvents[t].on("file-removed",function(o){t===o&&e(o)})},e.prototype.onPause=function(t,e){this.uploaderEvents[t].on("upload-pause",function(o,n){t===o&&e(n)})},e.prototype.onRetry=function(t,e){this.uploaderEvents[t].on("upload-retry",function(o){t===o&&e()})},e.prototype.onRetryAll=function(t,e){var o=this;this.uploaderEvents[t].on("retry-all",function(n){o.uppy.getFile(t)&&e()})},e.prototype.onPauseAll=function(t,e){var o=this;this.uploaderEvents[t].on("pause-all",function(){o.uppy.getFile(t)&&e()})},e.prototype.onCancelAll=function(t,e){var o=this;this.uploaderEvents[t].on("cancel-all",function(){o.uppy.getFile(t)&&e()})},e.prototype.onResumeAll=function(t,e){var o=this;this.uploaderEvents[t].on("resume-all",function(){o.uppy.getFile(t)&&e()})},e.prototype.uploadFiles=function(t){var e=this,o=t.map(function(o,n){var r=parseInt(n,10)+1,i=t.length;return o.error?Ui.reject(new Error(o.error)):(e.uppy.log("uploading "+r+" of "+i),o.isRemote?e.uploadRemote(o,r,i):e.upload(o,r,i))});return ji(o)},e.prototype.handleUpload=function(t){var e=this;if(0===t.length)return this.uppy.log("Tus: no files to upload!"),Ui.resolve();this.uppy.log("Tus is uploading...");var o=t.map(function(t){return e.uppy.getFile(t)});return this.uploadFiles(o)},e.prototype.addResumableUploadsCapabilityFlag=function(){var t=Di({},this.uppy.getState().capabilities);t.resumableUploads=!0,this.uppy.setState({capabilities:t})},e.prototype.install=function(){this.addResumableUploadsCapabilityFlag(),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.uppy.on("back-online",this.uppy.retryAll)},e.prototype.uninstall=function(){this.uppy.removeUploader(this.handleUpload),this.opts.autoRetry&&this.uppy.off("back-online",this.uppy.retryAll)},e}(ht),Mi=V.h,Li=V.h,Ni=V.h,zi=function(t){var e=t.recording,o=t.onStartRecording,n=t.onStopRecording;return e?Ni("button",{class:"UppyButton--circular UppyButton--red UppyButton--sizeM uppy-Webcam-recordButton",type:"button",title:"Stop Recording","aria-label":"Stop Recording",onclick:n},Li("svg",{"aria-hidden":"true",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},Li("rect",{x:"15",y:"15",width:"70",height:"70"}))):Ni("button",{class:"UppyButton--circular UppyButton--red UppyButton--sizeM uppy-Webcam-recordButton",type:"button",title:"Begin Recording","aria-label":"Begin Recording",onclick:o},Mi("svg",{"aria-hidden":"true",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},Mi("circle",{cx:"50",cy:"50",r:"40"})))},qi=V.h,Hi=V.h,Wi=function(t){var e=t.onSnapshot;return Hi("button",{class:"UppyButton--circular UppyButton--red UppyButton--sizeM uppy-Webcam-recordButton",type:"button",title:"Take a snapshot","aria-label":"Take a snapshot",onclick:e},qi("svg",{"aria-hidden":"true",class:"UppyIcon",width:"100",height:"77",viewBox:"0 0 100 77"},qi("path",{d:"M50 32c-7.168 0-13 5.832-13 13s5.832 13 13 13 13-5.832 13-13-5.832-13-13-13z"}),qi("path",{d:"M87 13H72c0-7.18-5.82-13-13-13H41c-7.18 0-13 5.82-13 13H13C5.82 13 0 18.82 0 26v38c0 7.18 5.82 13 13 13h74c7.18 0 13-5.82 13-13V26c0-7.18-5.82-13-13-13zM50 68c-12.683 0-23-10.318-23-23s10.317-23 23-23 23 10.318 23 23-10.317 23-23 23z"})))},Xi=V.h,Vi=function(t){function e(){return function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.props.onFocus(),this.btnContainer.firstChild.focus()},e.prototype.componentWillUnmount=function(){this.props.onStop()},e.prototype.render=function(){var t=this,e=this.props.supportsRecording&&(X(this.props.modes,"video-only")||X(this.props.modes,"audio-only")||X(this.props.modes,"video-audio")),o=X(this.props.modes,"picture");return Xi("div",{class:"uppy uppy-Webcam-container"},Xi("div",{class:"uppy-Webcam-videoContainer"},Xi("video",{class:"uppy-Webcam-video",autoplay:!0,muted:!0,src:this.props.src||""})),Xi("div",{class:"uppy-Webcam-buttonContainer",ref:function(e){t.btnContainer=e}},o?Wi(this.props):null," ",e?zi(this.props):null),Xi("canvas",{class:"uppy-Webcam-canvas",style:"display: none;"}))},e}(V.Component),Gi=V.h,Yi=V.h,Ji=function(t){return Yi("svg",{"aria-hidden":"true",class:"UppyIcon",width:"18",height:"21",viewBox:"0 0 18 21"},Yi("path",{d:"M14.8 16.9c1.9-1.7 3.2-4.1 3.2-6.9 0-5-4-9-9-9s-9 4-9 9c0 2.8 1.2 5.2 3.2 6.9C1.9 17.9.5 19.4 0 21h3c1-1.9 11-1.9 12 0h3c-.5-1.6-1.9-3.1-3.2-4.1zM9 4c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6z"}),Yi("path",{d:"M9 14c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zM8 8c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1c0-.5.4-1 1-1z"}))},Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Qi="undefined"==typeof Promise?ot.Promise:Promise,Zi=V.h,ts=lt.getFileTypeExtension,es=lt.canvasToBlob,os=function(t){function e(o,n){!function(t,o){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o,n));r.mediaDevices=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var t=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return t?{getUserMedia:function(e){return new Qi(function(o,n){t.call(navigator,e,o,n)})}}:null}(),r.supportsUserMedia=!!r.mediaDevices,r.protocol=location.protocol.match(/https/i)?"https":"http",r.id=r.opts.id||"Webcam",r.title="Webcam",r.type="acquirer",r.icon=Ji;var i={strings:{smile:"Smile!"}},s={onBeforeSnapshot:function(){return Qi.resolve()},countdown:!1,locale:i,modes:["video-audio","video-only","audio-only","picture"]};return r.opts=$i({},s,n),r.locale=$i({},i,r.opts.locale),r.locale.strings=$i({},i.strings,r.opts.locale.strings),r.translator=new Ot({locale:r.locale}),r.i18n=r.translator.translate.bind(r.translator),r.install=r.install.bind(r),r.setPluginState=r.setPluginState.bind(r),r.render=r.render.bind(r),r.start=r.start.bind(r),r.stop=r.stop.bind(r),r.takeSnapshot=r.takeSnapshot.bind(r),r.startRecording=r.startRecording.bind(r),r.stopRecording=r.stopRecording.bind(r),r.oneTwoThreeSmile=r.oneTwoThreeSmile.bind(r),r.focus=r.focus.bind(r),r.webcamActive=!1,r.opts.countdown&&(r.opts.onBeforeSnapshot=r.oneTwoThreeSmile),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.isSupported=function(){return!!this.mediaDevices},e.prototype.getConstraints=function(){return{audio:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),video:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")}},e.prototype.start=function(){var t=this;if(!this.isSupported())return Qi.reject(new Error("Webcam access not supported"));this.webcamActive=!0;var e=this.getConstraints();return this.mediaDevices.getUserMedia(e).then(function(e){t.stream=e,console.log(e),t.streamSrc=URL.createObjectURL(t.stream),t.setPluginState({cameraReady:!0})}).catch(function(e){t.setPluginState({cameraError:e})})},e.prototype.startRecording=function(){var t=this;this.recorder=new MediaRecorder(this.stream),this.recordingChunks=[],this.recorder.addEventListener("dataavailable",function(e){t.recordingChunks.push(e.data)}),this.recorder.start(),this.setPluginState({isRecording:!0})},e.prototype.stopRecording=function(){var t=this;return new Qi(function(e,o){t.recorder.addEventListener("stop",function(){e()}),t.recorder.stop()}).then(function(){return t.setPluginState({isRecording:!1}),t.getVideo()}).then(this.uppy.addFile).then(function(){t.recordingChunks=null,t.recorder=null;var e=t.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()},function(e){throw t.recordingChunks=null,t.recorder=null,e})},e.prototype.stop=function(){this.stream.getAudioTracks().forEach(function(t){t.stop()}),this.stream.getVideoTracks().forEach(function(t){t.stop()}),this.webcamActive=!1,this.stream=null,this.streamSrc=null},e.prototype.getVideoElement=function(){return this.el.querySelector(".uppy-Webcam-video")},e.prototype.oneTwoThreeSmile=function(){var t=this;return new Qi(function(e,o){var n=t.opts.countdown,r=setInterval(function(){if(!t.webcamActive)return clearInterval(r),t.captureInProgress=!1,o(new Error("Webcam is not active"));n>0?(t.uppy.info(n+"...","warning",800),n--):(clearInterval(r),t.uppy.info(t.i18n("smile"),"success",1500),setTimeout(function(){return e()},1500))},1e3)})},e.prototype.takeSnapshot=function(){var t=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(e){var o="object"===(void 0===e?"undefined":Ki(e))?e.message:e;return t.uppy.info(o,"error",5e3),Qi.reject(new Error("onBeforeSnapshot: "+o))}).then(function(){return t.getImage()}).then(function(e){t.captureInProgress=!1,t.uppy.addFile(e);var o=t.uppy.getPlugin("Dashboard");o&&o.hideAllPanels()},function(e){throw t.captureInProgress=!1,e}))},e.prototype.getImage=function(){var t=this,e=this.getVideoElement();if(!e)return Qi.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var o="webcam-"+Date.now()+".jpg",n=document.createElement("canvas");return n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0),es(n,"image/jpeg").then(function(e){return{source:t.id,name:o,data:new File([e],o,{type:"image/jpeg"}),type:"image/jpeg"}})},e.prototype.getVideo=function(){var t=this.recordingChunks[0].type,e=ts(t);if(!e)return Qi.reject(new Error('Could not retrieve recording: Unsupported media type "'+t+'"'));var o="webcam-"+Date.now()+"."+e,n=new Blob(this.recordingChunks,{type:t}),r={source:this.id,name:o,data:new File([n],o,{type:t}),type:t};return Qi.resolve(r)},e.prototype.focus=function(){var t=this;this.opts.countdown||setTimeout(function(){t.uppy.info(t.i18n("smile"),"success",1500)},1e3)},e.prototype.render=function(t){this.webcamActive||this.start();var e=this.getPluginState();return e.cameraReady?Zi(Vi,$i({},e,{onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onFocus:this.focus,onStop:this.stop,modes:this.opts.modes,supportsRecording:"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start,recording:e.isRecording,src:this.streamSrc})):Gi("div",{class:"uppy-Webcam-permissons"},Gi("h1",{class:"uppy-Webcam-Title"},"Please allow access to your camera"),Gi("p",null,"You have been prompted to allow camera access from this site.",Gi("br",null),"In order to take pictures with your camera you must approve this request."))},e.prototype.install=function(){this.setPluginState({cameraReady:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.stream&&this.stop(),this.unmount()},e}(ht);return{Core:It,Plugin:ht,Dummy:qo,StatusBar:Ze,ProgressBar:Dn,Informer:Be,DragDrop:ho,GoogleDrive:xn,Dropbox:Lo,Instagram:On,FileInput:Vo,Tus:Bi,XHRUpload:zt,Transloadit:Zr,AwsS3:Wt,Dashboard:lo,Webcam:os,GoldenRetriever:_n,ReduxDevTools:Fn,ReduxStore:Un,Ftp:tn}});
//# sourceMappingURL=uppy.min.js.map